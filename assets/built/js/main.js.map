{
  "version": 3,
  "sources": ["../../../src/js/util/util.js", "../../../src/js/util/dom-events.js", "../../../src/js/util/viewport-size.js", "../../../src/js/slide/pan-bounds.js", "../../../src/js/slide/zoom-level.js", "../../../src/js/slide/slide.js", "../../../src/js/gestures/drag-handler.js", "../../../src/js/gestures/zoom-handler.js", "../../../src/js/gestures/tap-handler.js", "../../../src/js/gestures/gestures.js", "../../../src/js/main-scroll.js", "../../../src/js/keyboard.js", "../../../src/js/util/css-animation.js", "../../../src/js/util/spring-easer.js", "../../../src/js/util/spring-animation.js", "../../../src/js/util/animations.js", "../../../src/js/scroll-wheel.js", "../../../src/js/ui/ui-element.js", "../../../src/js/ui/button-arrow.js", "../../../src/js/ui/button-close.js", "../../../src/js/ui/button-zoom.js", "../../../src/js/ui/loading-indicator.js", "../../../src/js/ui/counter-indicator.js", "../../../src/js/ui/ui.js", "../../../src/js/slide/get-thumb-bounds.js", "../../../src/js/core/eventable.js", "../../../src/js/slide/placeholder.js", "../../../src/js/slide/content.js", "../../../src/js/slide/loader.js", "../../../src/js/core/base.js", "../../../src/js/opener.js", "../../../src/js/photoswipe.js", "../../../node_modules/prismjs/prism.js", "../../js/demo.js", "../../js/copy-link.js", "../../js/dark-mode-toggle.js", "../../js/enrol-dialog.js", "../../../src/js/util/util.js", "../../../src/js/core/eventable.js", "../../../src/js/slide/placeholder.js", "../../../src/js/slide/content.js", "../../../src/js/util/viewport-size.js", "../../../src/js/slide/zoom-level.js", "../../../src/js/slide/loader.js", "../../../src/js/core/base.js", "../../../src/js/lightbox/lightbox.js", "../../js/lightbox.js", "../../js/navigation.js", "../../js/pagination.js", "../../../node_modules/tocbot/src/js/build-html.js", "../../../node_modules/tocbot/src/js/default-options.js", "../../../node_modules/tocbot/src/js/parse-content.js", "../../../node_modules/tocbot/src/js/scroll-smooth/index.js", "../../../node_modules/tocbot/src/js/update-toc-scroll.js", "../../../node_modules/tocbot/src/js/index-esm.js", "../../../node_modules/tocbot/index.js", "../../js/table-of-contents.js", "../../js/main.js", "../../../node_modules/prismjs/components/prism-javascript.min.js", "../../../node_modules/prismjs/components/prism-nginx.js", "../../../node_modules/prismjs/components/prism-bash.min.js", "../../../node_modules/prismjs/plugins/command-line/prism-command-line.js"],
  "sourcesContent": ["/** @typedef {import('../photoswipe.js').Point} Point */\r\n\r\n/**\r\n * @template {keyof HTMLElementTagNameMap} T\r\n * @param {string} className\r\n * @param {T} tagName\r\n * @param {Node} [appendToEl]\r\n * @returns {HTMLElementTagNameMap[T]}\r\n */\r\nexport function createElement(className, tagName, appendToEl) {\r\n  const el = document.createElement(tagName);\r\n  if (className) {\r\n    el.className = className;\r\n  }\r\n  if (appendToEl) {\r\n    appendToEl.appendChild(el);\r\n  }\r\n  return el;\r\n}\r\n\r\n/**\r\n * @param {Point} p1\r\n * @param {Point} p2\r\n * @returns {Point}\r\n */\r\nexport function equalizePoints(p1, p2) {\r\n  p1.x = p2.x;\r\n  p1.y = p2.y;\r\n  if (p2.id !== undefined) {\r\n    p1.id = p2.id;\r\n  }\r\n  return p1;\r\n}\r\n\r\n/**\r\n * @param {Point} p\r\n */\r\nexport function roundPoint(p) {\r\n  p.x = Math.round(p.x);\r\n  p.y = Math.round(p.y);\r\n}\r\n\r\n/**\r\n * Returns distance between two points.\r\n *\r\n * @param {Point} p1\r\n * @param {Point} p2\r\n * @returns {number}\r\n */\r\nexport function getDistanceBetween(p1, p2) {\r\n  const x = Math.abs(p1.x - p2.x);\r\n  const y = Math.abs(p1.y - p2.y);\r\n  return Math.sqrt((x * x) + (y * y));\r\n}\r\n\r\n/**\r\n * Whether X and Y positions of points are equal\r\n *\r\n * @param {Point} p1\r\n * @param {Point} p2\r\n * @returns {boolean}\r\n */\r\nexport function pointsEqual(p1, p2) {\r\n  return p1.x === p2.x && p1.y === p2.y;\r\n}\r\n\r\n/**\r\n * The float result between the min and max values.\r\n *\r\n * @param {number} val\r\n * @param {number} min\r\n * @param {number} max\r\n * @returns {number}\r\n */\r\nexport function clamp(val, min, max) {\r\n  return Math.min(Math.max(val, min), max);\r\n}\r\n\r\n/**\r\n * Get transform string\r\n *\r\n * @param {number} x\r\n * @param {number} [y]\r\n * @param {number} [scale]\r\n * @returns {string}\r\n */\r\nexport function toTransformString(x, y, scale) {\r\n  let propValue = `translate3d(${x}px,${y || 0}px,0)`;\r\n\r\n  if (scale !== undefined) {\r\n    propValue += ` scale3d(${scale},${scale},1)`;\r\n  }\r\n\r\n  return propValue;\r\n}\r\n\r\n/**\r\n * Apply transform:translate(x, y) scale(scale) to element\r\n *\r\n * @param {HTMLElement} el\r\n * @param {number} x\r\n * @param {number} [y]\r\n * @param {number} [scale]\r\n */\r\nexport function setTransform(el, x, y, scale) {\r\n  el.style.transform = toTransformString(x, y, scale);\r\n}\r\n\r\nconst defaultCSSEasing = 'cubic-bezier(.4,0,.22,1)';\r\n\r\n/**\r\n * Apply CSS transition to element\r\n *\r\n * @param {HTMLElement} el\r\n * @param {string} [prop] CSS property to animate\r\n * @param {number} [duration] in ms\r\n * @param {string} [ease] CSS easing function\r\n */\r\nexport function setTransitionStyle(el, prop, duration, ease) {\r\n  // inOut: 'cubic-bezier(.4, 0, .22, 1)', // for \"toggle state\" transitions\r\n  // out: 'cubic-bezier(0, 0, .22, 1)', // for \"show\" transitions\r\n  // in: 'cubic-bezier(.4, 0, 1, 1)'// for \"hide\" transitions\r\n  el.style.transition = prop\r\n    ? `${prop} ${duration}ms ${ease || defaultCSSEasing}`\r\n    : 'none';\r\n}\r\n\r\n/**\r\n * Apply width and height CSS properties to element\r\n *\r\n * @param {HTMLElement} el\r\n * @param {string | number} w\r\n * @param {string | number} h\r\n */\r\nexport function setWidthHeight(el, w, h) {\r\n  el.style.width = (typeof w === 'number') ? `${w}px` : w;\r\n  el.style.height = (typeof h === 'number') ? `${h}px` : h;\r\n}\r\n\r\n/**\r\n * @param {HTMLElement} el\r\n */\r\nexport function removeTransitionStyle(el) {\r\n  setTransitionStyle(el);\r\n}\r\n\r\n/**\r\n * @param {HTMLImageElement} img\r\n * @returns {Promise<HTMLImageElement | void>}\r\n */\r\nexport function decodeImage(img) {\r\n  if ('decode' in img) {\r\n    return img.decode().catch(() => {});\r\n  }\r\n\r\n  if (img.complete) {\r\n    return Promise.resolve(img);\r\n  }\r\n\r\n  return new Promise((resolve, reject) => {\r\n    img.onload = () => resolve(img);\r\n    img.onerror = reject;\r\n  });\r\n}\r\n\r\n/** @typedef {LOAD_STATE[keyof LOAD_STATE]} LoadState */\r\n/** @type {{ IDLE: 'idle'; LOADING: 'loading'; LOADED: 'loaded'; ERROR: 'error' }} */\r\nexport const LOAD_STATE = {\r\n  IDLE: 'idle',\r\n  LOADING: 'loading',\r\n  LOADED: 'loaded',\r\n  ERROR: 'error',\r\n};\r\n\r\n\r\n/**\r\n * Check if click or keydown event was dispatched\r\n * with a special key or via mouse wheel.\r\n *\r\n * @param {MouseEvent | KeyboardEvent} e\r\n * @returns {boolean}\r\n */\r\nexport function specialKeyUsed(e) {\r\n  return ('button' in e && e.button === 1) || e.ctrlKey || e.metaKey || e.altKey || e.shiftKey;\r\n}\r\n\r\n/**\r\n * Parse `gallery` or `children` options.\r\n *\r\n * @param {import('../photoswipe.js').ElementProvider} [option]\r\n * @param {string} [legacySelector]\r\n * @param {HTMLElement | Document} [parent]\r\n * @returns HTMLElement[]\r\n */\r\nexport function getElementsFromOption(option, legacySelector, parent = document) {\r\n  /** @type {HTMLElement[]} */\r\n  let elements = [];\r\n\r\n  if (option instanceof Element) {\r\n    elements = [option];\r\n  } else if (option instanceof NodeList || Array.isArray(option)) {\r\n    elements = Array.from(option);\r\n  } else {\r\n    const selector = typeof option === 'string' ? option : legacySelector;\r\n    if (selector) {\r\n      elements = Array.from(parent.querySelectorAll(selector));\r\n    }\r\n  }\r\n\r\n  return elements;\r\n}\r\n\r\n/**\r\n * Check if variable is PhotoSwipe class\r\n *\r\n * @param {any} fn\r\n * @returns {boolean}\r\n */\r\nexport function isPswpClass(fn) {\r\n  return typeof fn === 'function'\r\n    && fn.prototype\r\n    && fn.prototype.goTo;\r\n}\r\n\r\n/**\r\n * Check if browser is Safari\r\n *\r\n * @returns {boolean}\r\n */\r\nexport function isSafari() {\r\n  return !!(navigator.vendor && navigator.vendor.match(/apple/i));\r\n}\r\n\r\n", "// Detect passive event listener support\r\nlet supportsPassive = false;\r\n/* eslint-disable */\r\ntry {\r\n  /* @ts-ignore */\r\n  window.addEventListener('test', null, Object.defineProperty({}, 'passive', {\r\n    get: () => {\r\n      supportsPassive = true;\r\n    }\r\n  }));\r\n} catch (e) {}\r\n/* eslint-enable */\r\n\r\n/**\r\n * @typedef {Object} PoolItem\r\n * @prop {HTMLElement | Window | Document | undefined | null} target\r\n * @prop {string} type\r\n * @prop {EventListenerOrEventListenerObject} listener\r\n * @prop {boolean} [passive]\r\n */\r\n\r\nclass DOMEvents {\r\n  constructor() {\r\n    /**\r\n     * @type {PoolItem[]}\r\n     * @private\r\n     */\r\n    this._pool = [];\r\n  }\r\n\r\n  /**\r\n   * Adds event listeners\r\n   *\r\n   * @param {PoolItem['target']} target\r\n   * @param {PoolItem['type']} type Can be multiple, separated by space.\r\n   * @param {PoolItem['listener']} listener\r\n   * @param {PoolItem['passive']} [passive]\r\n   */\r\n  add(target, type, listener, passive) {\r\n    this._toggleListener(target, type, listener, passive);\r\n  }\r\n\r\n  /**\r\n   * Removes event listeners\r\n   *\r\n   * @param {PoolItem['target']} target\r\n   * @param {PoolItem['type']} type\r\n   * @param {PoolItem['listener']} listener\r\n   * @param {PoolItem['passive']} [passive]\r\n   */\r\n  remove(target, type, listener, passive) {\r\n    this._toggleListener(target, type, listener, passive, true);\r\n  }\r\n\r\n  /**\r\n   * Removes all bound events\r\n   */\r\n  removeAll() {\r\n    this._pool.forEach((poolItem) => {\r\n      this._toggleListener(\r\n        poolItem.target,\r\n        poolItem.type,\r\n        poolItem.listener,\r\n        poolItem.passive,\r\n        true,\r\n        true\r\n      );\r\n    });\r\n    this._pool = [];\r\n  }\r\n\r\n  /**\r\n   * Adds or removes event\r\n   *\r\n   * @private\r\n   * @param {PoolItem['target']} target\r\n   * @param {PoolItem['type']} type\r\n   * @param {PoolItem['listener']} listener\r\n   * @param {PoolItem['passive']} [passive]\r\n   * @param {boolean} [unbind] Whether the event should be added or removed\r\n   * @param {boolean} [skipPool] Whether events pool should be skipped\r\n   */\r\n  _toggleListener(target, type, listener, passive, unbind, skipPool) {\r\n    if (!target) {\r\n      return;\r\n    }\r\n\r\n    const methodName = unbind ? 'removeEventListener' : 'addEventListener';\r\n    const types = type.split(' ');\r\n    types.forEach((eType) => {\r\n      if (eType) {\r\n        // Events pool is used to easily unbind all events when PhotoSwipe is closed,\r\n        // so developer doesn't need to do this manually\r\n        if (!skipPool) {\r\n          if (unbind) {\r\n            // Remove from the events pool\r\n            this._pool = this._pool.filter((poolItem) => {\r\n              return poolItem.type !== eType\r\n                || poolItem.listener !== listener\r\n                || poolItem.target !== target;\r\n            });\r\n          } else {\r\n            // Add to the events pool\r\n            this._pool.push({\r\n              target,\r\n              type: eType,\r\n              listener,\r\n              passive\r\n            });\r\n          }\r\n        }\r\n\r\n        // most PhotoSwipe events call preventDefault,\r\n        // and we do not need browser to scroll the page\r\n        const eventOptions = supportsPassive ? { passive: (passive || false) } : false;\r\n\r\n        target[methodName](\r\n          eType,\r\n          listener,\r\n          eventOptions\r\n        );\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport default DOMEvents;\r\n", "/** @typedef {import('../photoswipe.js').PhotoSwipeOptions} PhotoSwipeOptions */\r\n/** @typedef {import('../core/base.js').default} PhotoSwipeBase */\r\n/** @typedef {import('../photoswipe.js').Point} Point */\r\n/** @typedef {import('../slide/slide.js').SlideData} SlideData */\r\n\r\n/**\r\n * @param {PhotoSwipeOptions} options\r\n * @param {PhotoSwipeBase} pswp\r\n * @returns {Point}\r\n */\r\nexport function getViewportSize(options, pswp) {\r\n  if (options.getViewportSizeFn) {\r\n    const newViewportSize = options.getViewportSizeFn(options, pswp);\r\n    if (newViewportSize) {\r\n      return newViewportSize;\r\n    }\r\n  }\r\n\r\n  return {\r\n    x: document.documentElement.clientWidth,\r\n\r\n    // TODO: height on mobile is very incosistent due to toolbar\r\n    // find a way to improve this\r\n    //\r\n    // document.documentElement.clientHeight - doesn't seem to work well\r\n    y: window.innerHeight\r\n  };\r\n}\r\n\r\n/**\r\n * Parses padding option.\r\n * Supported formats:\r\n *\r\n * // Object\r\n * padding: {\r\n *  top: 0,\r\n *  bottom: 0,\r\n *  left: 0,\r\n *  right: 0\r\n * }\r\n *\r\n * // A function that returns the object\r\n * paddingFn: (viewportSize, itemData, index) => {\r\n *  return {\r\n *    top: 0,\r\n *    bottom: 0,\r\n *    left: 0,\r\n *    right: 0\r\n *  };\r\n * }\r\n *\r\n * // Legacy variant\r\n * paddingLeft: 0,\r\n * paddingRight: 0,\r\n * paddingTop: 0,\r\n * paddingBottom: 0,\r\n *\r\n * @param {'left' | 'top' | 'bottom' | 'right'} prop\r\n * @param {PhotoSwipeOptions} options PhotoSwipe options\r\n * @param {Point} viewportSize PhotoSwipe viewport size, for example: { x:800, y:600 }\r\n * @param {SlideData} itemData Data about the slide\r\n * @param {number} index Slide index\r\n * @returns {number}\r\n */\r\nexport function parsePaddingOption(prop, options, viewportSize, itemData, index) {\r\n  let paddingValue = 0;\r\n\r\n  if (options.paddingFn) {\r\n    paddingValue = options.paddingFn(viewportSize, itemData, index)[prop];\r\n  } else if (options.padding) {\r\n    paddingValue = options.padding[prop];\r\n  } else {\r\n    const legacyPropName = 'padding' + prop[0].toUpperCase() + prop.slice(1);\r\n    // @ts-expect-error\r\n    if (options[legacyPropName]) {\r\n      // @ts-expect-error\r\n      paddingValue = options[legacyPropName];\r\n    }\r\n  }\r\n\r\n  return Number(paddingValue) || 0;\r\n}\r\n\r\n/**\r\n * @param {PhotoSwipeOptions} options\r\n * @param {Point} viewportSize\r\n * @param {SlideData} itemData\r\n * @param {number} index\r\n * @returns {Point}\r\n */\r\nexport function getPanAreaSize(options, viewportSize, itemData, index) {\r\n  return {\r\n    x: viewportSize.x\r\n      - parsePaddingOption('left', options, viewportSize, itemData, index)\r\n      - parsePaddingOption('right', options, viewportSize, itemData, index),\r\n    y: viewportSize.y\r\n      - parsePaddingOption('top', options, viewportSize, itemData, index)\r\n      - parsePaddingOption('bottom', options, viewportSize, itemData, index)\r\n  };\r\n}\r\n", "import { clamp } from '../util/util.js';\r\nimport { parsePaddingOption } from '../util/viewport-size.js';\r\n\r\n/** @typedef {import('./slide.js').default} Slide */\r\n/** @typedef {Record<Axis, number>} Point */\r\n/** @typedef {'x' | 'y'} Axis */\r\n\r\n/**\r\n * Calculates minimum, maximum and initial (center) bounds of a slide\r\n */\r\nclass PanBounds {\r\n  /**\r\n   * @param {Slide} slide\r\n   */\r\n  constructor(slide) {\r\n    this.slide = slide;\r\n    this.currZoomLevel = 1;\r\n    this.center = /** @type {Point} */ { x: 0, y: 0 };\r\n    this.max = /** @type {Point} */ { x: 0, y: 0 };\r\n    this.min = /** @type {Point} */ { x: 0, y: 0 };\r\n  }\r\n\r\n  /**\r\n   * _getItemBounds\r\n   *\r\n   * @param {number} currZoomLevel\r\n   */\r\n  update(currZoomLevel) {\r\n    this.currZoomLevel = currZoomLevel;\r\n\r\n    if (!this.slide.width) {\r\n      this.reset();\r\n    } else {\r\n      this._updateAxis('x');\r\n      this._updateAxis('y');\r\n      this.slide.pswp.dispatch('calcBounds', { slide: this.slide });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * _calculateItemBoundsForAxis\r\n   *\r\n   * @param {Axis} axis\r\n   */\r\n  _updateAxis(axis) {\r\n    const { pswp } = this.slide;\r\n    const elSize = this.slide[axis === 'x' ? 'width' : 'height'] * this.currZoomLevel;\r\n    const paddingProp = axis === 'x' ? 'left' : 'top';\r\n    const padding = parsePaddingOption(\r\n      paddingProp,\r\n      pswp.options,\r\n      pswp.viewportSize,\r\n      this.slide.data,\r\n      this.slide.index\r\n    );\r\n\r\n    const panAreaSize = this.slide.panAreaSize[axis];\r\n\r\n    // Default position of element.\r\n    // By default, it is center of viewport:\r\n    this.center[axis] = Math.round((panAreaSize - elSize) / 2) + padding;\r\n\r\n    // maximum pan position\r\n    this.max[axis] = (elSize > panAreaSize)\r\n      ? Math.round(panAreaSize - elSize) + padding\r\n      : this.center[axis];\r\n\r\n    // minimum pan position\r\n    this.min[axis] = (elSize > panAreaSize)\r\n      ? padding\r\n      : this.center[axis];\r\n  }\r\n\r\n  // _getZeroBounds\r\n  reset() {\r\n    this.center.x = 0;\r\n    this.center.y = 0;\r\n    this.max.x = 0;\r\n    this.max.y = 0;\r\n    this.min.x = 0;\r\n    this.min.y = 0;\r\n  }\r\n\r\n  /**\r\n   * Correct pan position if it's beyond the bounds\r\n   *\r\n   * @param {Axis} axis x or y\r\n   * @param {number} panOffset\r\n   * @returns {number}\r\n   */\r\n  correctPan(axis, panOffset) { // checkPanBounds\r\n    return clamp(panOffset, this.max[axis], this.min[axis]);\r\n  }\r\n}\r\n\r\nexport default PanBounds;\r\n", "const MAX_IMAGE_WIDTH = 4000;\r\n\r\n/** @typedef {import('../photoswipe.js').default} PhotoSwipe */\r\n/** @typedef {import('../photoswipe.js').PhotoSwipeOptions} PhotoSwipeOptions */\r\n/** @typedef {import('../photoswipe.js').Point} Point */\r\n/** @typedef {import('../slide/slide.js').SlideData} SlideData */\r\n\r\n/** @typedef {'fit' | 'fill' | number | ((zoomLevelObject: ZoomLevel) => number)} ZoomLevelOption */\r\n\r\n/**\r\n * Calculates zoom levels for specific slide.\r\n * Depends on viewport size and image size.\r\n */\r\nclass ZoomLevel {\r\n  /**\r\n   * @param {PhotoSwipeOptions} options PhotoSwipe options\r\n   * @param {SlideData} itemData Slide data\r\n   * @param {number} index Slide index\r\n   * @param {PhotoSwipe} [pswp] PhotoSwipe instance, can be undefined if not initialized yet\r\n   */\r\n  constructor(options, itemData, index, pswp) {\r\n    this.pswp = pswp;\r\n    this.options = options;\r\n    this.itemData = itemData;\r\n    this.index = index;\r\n    /** @type { Point | null } */\r\n    this.panAreaSize = null;\r\n    /** @type { Point | null } */\r\n    this.elementSize = null;\r\n    this.fit = 1;\r\n    this.fill = 1;\r\n    this.vFill = 1;\r\n    this.initial = 1;\r\n    this.secondary = 1;\r\n    this.max = 1;\r\n    this.min = 1;\r\n  }\r\n\r\n  /**\r\n   * Calculate initial, secondary and maximum zoom level for the specified slide.\r\n   *\r\n   * It should be called when either image or viewport size changes.\r\n   *\r\n   * @param {number} maxWidth\r\n   * @param {number} maxHeight\r\n   * @param {Point} panAreaSize\r\n   */\r\n  update(maxWidth, maxHeight, panAreaSize) {\r\n    /** @type {Point} */\r\n    const elementSize = { x: maxWidth, y: maxHeight };\r\n    this.elementSize = elementSize;\r\n    this.panAreaSize = panAreaSize;\r\n\r\n    const hRatio = panAreaSize.x / elementSize.x;\r\n    const vRatio = panAreaSize.y / elementSize.y;\r\n\r\n    this.fit = Math.min(1, hRatio < vRatio ? hRatio : vRatio);\r\n    this.fill = Math.min(1, hRatio > vRatio ? hRatio : vRatio);\r\n\r\n    // zoom.vFill defines zoom level of the image\r\n    // when it has 100% of viewport vertical space (height)\r\n    this.vFill = Math.min(1, vRatio);\r\n\r\n    this.initial = this._getInitial();\r\n    this.secondary = this._getSecondary();\r\n    this.max = Math.max(\r\n      this.initial,\r\n      this.secondary,\r\n      this._getMax()\r\n    );\r\n\r\n    this.min = Math.min(\r\n      this.fit,\r\n      this.initial,\r\n      this.secondary\r\n    );\r\n\r\n    if (this.pswp) {\r\n      this.pswp.dispatch('zoomLevelsUpdate', { zoomLevels: this, slideData: this.itemData });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Parses user-defined zoom option.\r\n   *\r\n   * @private\r\n   * @param {'initial' | 'secondary' | 'max'} optionPrefix Zoom level option prefix (initial, secondary, max)\r\n   * @returns { number | undefined }\r\n   */\r\n  _parseZoomLevelOption(optionPrefix) {\r\n    const optionName = /** @type {'initialZoomLevel' | 'secondaryZoomLevel' | 'maxZoomLevel'} */ (\r\n      optionPrefix + 'ZoomLevel'\r\n    );\r\n    const optionValue = this.options[optionName];\r\n\r\n    if (!optionValue) {\r\n      return;\r\n    }\r\n\r\n    if (typeof optionValue === 'function') {\r\n      return optionValue(this);\r\n    }\r\n\r\n    if (optionValue === 'fill') {\r\n      return this.fill;\r\n    }\r\n\r\n    if (optionValue === 'fit') {\r\n      return this.fit;\r\n    }\r\n\r\n    return Number(optionValue);\r\n  }\r\n\r\n  /**\r\n   * Get zoom level to which image will be zoomed after double-tap gesture,\r\n   * or when user clicks on zoom icon,\r\n   * or mouse-click on image itself.\r\n   * If you return 1 image will be zoomed to its original size.\r\n   *\r\n   * @private\r\n   * @return {number}\r\n   */\r\n  _getSecondary() {\r\n    let currZoomLevel = this._parseZoomLevelOption('secondary');\r\n\r\n    if (currZoomLevel) {\r\n      return currZoomLevel;\r\n    }\r\n\r\n    // 3x of \"fit\" state, but not larger than original\r\n    currZoomLevel = Math.min(1, this.fit * 3);\r\n\r\n    if (this.elementSize && currZoomLevel * this.elementSize.x > MAX_IMAGE_WIDTH) {\r\n      currZoomLevel = MAX_IMAGE_WIDTH / this.elementSize.x;\r\n    }\r\n\r\n    return currZoomLevel;\r\n  }\r\n\r\n  /**\r\n   * Get initial image zoom level.\r\n   *\r\n   * @private\r\n   * @return {number}\r\n   */\r\n  _getInitial() {\r\n    return this._parseZoomLevelOption('initial') || this.fit;\r\n  }\r\n\r\n  /**\r\n   * Maximum zoom level when user zooms\r\n   * via zoom/pinch gesture,\r\n   * via cmd/ctrl-wheel or via trackpad.\r\n   *\r\n   * @private\r\n   * @return {number}\r\n   */\r\n  _getMax() {\r\n    // max zoom level is x4 from \"fit state\",\r\n    // used for zoom gesture and ctrl/trackpad zoom\r\n    return this._parseZoomLevelOption('max') || Math.max(1, this.fit * 4);\r\n  }\r\n}\r\n\r\nexport default ZoomLevel;\r\n", "/** @typedef {import('../photoswipe.js').default} PhotoSwipe */\r\n/** @typedef {import('../photoswipe.js').Point} Point */\r\n\r\n/**\r\n * @typedef {_SlideData & Record<string, any>} SlideData\r\n * @typedef {Object} _SlideData\r\n * @prop {HTMLElement} [element] thumbnail element\r\n * @prop {string} [src] image URL\r\n * @prop {string} [srcset] image srcset\r\n * @prop {number} [w] image width (deprecated)\r\n * @prop {number} [h] image height (deprecated)\r\n * @prop {number} [width] image width\r\n * @prop {number} [height] image height\r\n * @prop {string} [msrc] placeholder image URL that's displayed before large image is loaded\r\n * @prop {string} [alt] image alt text\r\n * @prop {boolean} [thumbCropped] whether thumbnail is cropped client-side or not\r\n * @prop {string} [html] html content of a slide\r\n * @prop {'image' | 'html' | string} [type] slide type\r\n */\r\n\r\nimport {\r\n  createElement,\r\n  setTransform,\r\n  equalizePoints,\r\n  roundPoint,\r\n  toTransformString,\r\n  clamp,\r\n} from '../util/util.js';\r\n\r\nimport PanBounds from './pan-bounds.js';\r\nimport ZoomLevel from './zoom-level.js';\r\nimport { getPanAreaSize } from '../util/viewport-size.js';\r\n\r\n/**\r\n * Renders and allows to control a single slide\r\n */\r\nclass Slide {\r\n  /**\r\n   * @param {SlideData} data\r\n   * @param {number} index\r\n   * @param {PhotoSwipe} pswp\r\n   */\r\n  constructor(data, index, pswp) {\r\n    this.data = data;\r\n    this.index = index;\r\n    this.pswp = pswp;\r\n    this.isActive = (index === pswp.currIndex);\r\n    this.currentResolution = 0;\r\n    /** @type {Point} */\r\n    this.panAreaSize = { x: 0, y: 0 };\r\n    /** @type {Point} */\r\n    this.pan = { x: 0, y: 0 };\r\n\r\n    this.isFirstSlide = (this.isActive && !pswp.opener.isOpen);\r\n\r\n    this.zoomLevels = new ZoomLevel(pswp.options, data, index, pswp);\r\n\r\n    this.pswp.dispatch('gettingData', {\r\n      slide: this,\r\n      data: this.data,\r\n      index\r\n    });\r\n\r\n    this.content = this.pswp.contentLoader.getContentBySlide(this);\r\n    this.container = createElement('pswp__zoom-wrap', 'div');\r\n    /** @type {HTMLElement | null} */\r\n    this.holderElement = null;\r\n\r\n    this.currZoomLevel = 1;\r\n    /** @type {number} */\r\n    this.width = this.content.width;\r\n    /** @type {number} */\r\n    this.height = this.content.height;\r\n    this.heavyAppended = false;\r\n    this.bounds = new PanBounds(this);\r\n\r\n    this.prevDisplayedWidth = -1;\r\n    this.prevDisplayedHeight = -1;\r\n\r\n    this.pswp.dispatch('slideInit', { slide: this });\r\n  }\r\n\r\n  /**\r\n   * If this slide is active/current/visible\r\n   *\r\n   * @param {boolean} isActive\r\n   */\r\n  setIsActive(isActive) {\r\n    if (isActive && !this.isActive) {\r\n      // slide just became active\r\n      this.activate();\r\n    } else if (!isActive && this.isActive) {\r\n      // slide just became non-active\r\n      this.deactivate();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Appends slide content to DOM\r\n   *\r\n   * @param {HTMLElement} holderElement\r\n   */\r\n  append(holderElement) {\r\n    this.holderElement = holderElement;\r\n\r\n    this.container.style.transformOrigin = '0 0';\r\n\r\n    // Slide appended to DOM\r\n    if (!this.data) {\r\n      return;\r\n    }\r\n\r\n    this.calculateSize();\r\n\r\n    this.load();\r\n    this.updateContentSize();\r\n    this.appendHeavy();\r\n\r\n    this.holderElement.appendChild(this.container);\r\n\r\n    this.zoomAndPanToInitial();\r\n\r\n    this.pswp.dispatch('firstZoomPan', { slide: this });\r\n\r\n    this.applyCurrentZoomPan();\r\n\r\n    this.pswp.dispatch('afterSetContent', { slide: this });\r\n\r\n    if (this.isActive) {\r\n      this.activate();\r\n    }\r\n  }\r\n\r\n  load() {\r\n    this.content.load(false);\r\n    this.pswp.dispatch('slideLoad', { slide: this });\r\n  }\r\n\r\n  /**\r\n   * Append \"heavy\" DOM elements\r\n   *\r\n   * This may depend on a type of slide,\r\n   * but generally these are large images.\r\n   */\r\n  appendHeavy() {\r\n    const { pswp } = this;\r\n    const appendHeavyNearby = true; // todo\r\n\r\n    // Avoid appending heavy elements during animations\r\n    if (this.heavyAppended\r\n        || !pswp.opener.isOpen\r\n        || pswp.mainScroll.isShifted()\r\n        || (!this.isActive && !appendHeavyNearby)) {\r\n      return;\r\n    }\r\n\r\n    if (this.pswp.dispatch('appendHeavy', { slide: this }).defaultPrevented) {\r\n      return;\r\n    }\r\n\r\n    this.heavyAppended = true;\r\n\r\n    this.content.append();\r\n\r\n    this.pswp.dispatch('appendHeavyContent', { slide: this });\r\n  }\r\n\r\n  /**\r\n   * Triggered when this slide is active (selected).\r\n   *\r\n   * If it's part of opening/closing transition -\r\n   * activate() will trigger after the transition is ended.\r\n   */\r\n  activate() {\r\n    this.isActive = true;\r\n    this.appendHeavy();\r\n    this.content.activate();\r\n    this.pswp.dispatch('slideActivate', { slide: this });\r\n  }\r\n\r\n  /**\r\n   * Triggered when this slide becomes inactive.\r\n   *\r\n   * Slide can become inactive only after it was active.\r\n   */\r\n  deactivate() {\r\n    this.isActive = false;\r\n    this.content.deactivate();\r\n\r\n    if (this.currZoomLevel !== this.zoomLevels.initial) {\r\n      // allow filtering\r\n      this.calculateSize();\r\n    }\r\n\r\n    // reset zoom level\r\n    this.currentResolution = 0;\r\n    this.zoomAndPanToInitial();\r\n    this.applyCurrentZoomPan();\r\n    this.updateContentSize();\r\n\r\n    this.pswp.dispatch('slideDeactivate', { slide: this });\r\n  }\r\n\r\n  /**\r\n   * The slide should destroy itself, it will never be used again.\r\n   * (unbind all events and destroy internal components)\r\n   */\r\n  destroy() {\r\n    this.content.hasSlide = false;\r\n    this.content.remove();\r\n    this.container.remove();\r\n    this.pswp.dispatch('slideDestroy', { slide: this });\r\n  }\r\n\r\n  resize() {\r\n    if (this.currZoomLevel === this.zoomLevels.initial || !this.isActive) {\r\n      // Keep initial zoom level if it was before the resize,\r\n      // as well as when this slide is not active\r\n\r\n      // Reset position and scale to original state\r\n      this.calculateSize();\r\n      this.currentResolution = 0;\r\n      this.zoomAndPanToInitial();\r\n      this.applyCurrentZoomPan();\r\n      this.updateContentSize();\r\n    } else {\r\n      // readjust pan position if it's beyond the bounds\r\n      this.calculateSize();\r\n      this.bounds.update(this.currZoomLevel);\r\n      this.panTo(this.pan.x, this.pan.y);\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Apply size to current slide content,\r\n   * based on the current resolution and scale.\r\n   *\r\n   * @param {boolean} [force] if size should be updated even if dimensions weren't changed\r\n   */\r\n  updateContentSize(force) {\r\n    // Use initial zoom level\r\n    // if resolution is not defined (user didn't zoom yet)\r\n    const scaleMultiplier = this.currentResolution || this.zoomLevels.initial;\r\n\r\n    if (!scaleMultiplier) {\r\n      return;\r\n    }\r\n\r\n    const width = Math.round(this.width * scaleMultiplier) || this.pswp.viewportSize.x;\r\n    const height = Math.round(this.height * scaleMultiplier) || this.pswp.viewportSize.y;\r\n\r\n    if (!this.sizeChanged(width, height) && !force) {\r\n      return;\r\n    }\r\n    this.content.setDisplayedSize(width, height);\r\n  }\r\n\r\n  /**\r\n   * @param {number} width\r\n   * @param {number} height\r\n   */\r\n  sizeChanged(width, height) {\r\n    if (width !== this.prevDisplayedWidth\r\n        || height !== this.prevDisplayedHeight) {\r\n      this.prevDisplayedWidth = width;\r\n      this.prevDisplayedHeight = height;\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /** @returns {HTMLImageElement | HTMLDivElement | null | undefined} */\r\n  getPlaceholderElement() {\r\n    return this.content.placeholder?.element;\r\n  }\r\n\r\n  /**\r\n   * Zoom current slide image to...\r\n   *\r\n   * @param {number} destZoomLevel Destination zoom level.\r\n   * @param {Point} [centerPoint]\r\n   * Transform origin center point, or false if viewport center should be used.\r\n   * @param {number | false} [transitionDuration] Transition duration, may be set to 0.\r\n   * @param {boolean} [ignoreBounds] Minimum and maximum zoom levels will be ignored.\r\n   */\r\n  zoomTo(destZoomLevel, centerPoint, transitionDuration, ignoreBounds) {\r\n    const { pswp } = this;\r\n    if (!this.isZoomable()\r\n        || pswp.mainScroll.isShifted()) {\r\n      return;\r\n    }\r\n\r\n    pswp.dispatch('beforeZoomTo', {\r\n      destZoomLevel, centerPoint, transitionDuration\r\n    });\r\n\r\n    // stop all pan and zoom transitions\r\n    pswp.animations.stopAllPan();\r\n\r\n    // if (!centerPoint) {\r\n    //   centerPoint = pswp.getViewportCenterPoint();\r\n    // }\r\n\r\n    const prevZoomLevel = this.currZoomLevel;\r\n\r\n    if (!ignoreBounds) {\r\n      destZoomLevel = clamp(destZoomLevel, this.zoomLevels.min, this.zoomLevels.max);\r\n    }\r\n\r\n    // if (transitionDuration === undefined) {\r\n    //   transitionDuration = this.pswp.options.zoomAnimationDuration;\r\n    // }\r\n\r\n    this.setZoomLevel(destZoomLevel);\r\n    this.pan.x = this.calculateZoomToPanOffset('x', centerPoint, prevZoomLevel);\r\n    this.pan.y = this.calculateZoomToPanOffset('y', centerPoint, prevZoomLevel);\r\n    roundPoint(this.pan);\r\n\r\n    const finishTransition = () => {\r\n      this._setResolution(destZoomLevel);\r\n      this.applyCurrentZoomPan();\r\n    };\r\n\r\n    if (!transitionDuration) {\r\n      finishTransition();\r\n    } else {\r\n      pswp.animations.startTransition({\r\n        isPan: true,\r\n        name: 'zoomTo',\r\n        target: this.container,\r\n        transform: this.getCurrentTransform(),\r\n        onComplete: finishTransition,\r\n        duration: transitionDuration,\r\n        easing: pswp.options.easing\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {Point} [centerPoint]\r\n   */\r\n  toggleZoom(centerPoint) {\r\n    this.zoomTo(\r\n      this.currZoomLevel === this.zoomLevels.initial\r\n        ? this.zoomLevels.secondary : this.zoomLevels.initial,\r\n      centerPoint,\r\n      this.pswp.options.zoomAnimationDuration\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Updates zoom level property and recalculates new pan bounds,\r\n   * unlike zoomTo it does not apply transform (use applyCurrentZoomPan)\r\n   *\r\n   * @param {number} currZoomLevel\r\n   */\r\n  setZoomLevel(currZoomLevel) {\r\n    this.currZoomLevel = currZoomLevel;\r\n    this.bounds.update(this.currZoomLevel);\r\n  }\r\n\r\n  /**\r\n   * Get pan position after zoom at a given `point`.\r\n   *\r\n   * Always call setZoomLevel(newZoomLevel) beforehand to recalculate\r\n   * pan bounds according to the new zoom level.\r\n   *\r\n   * @param {'x' | 'y'} axis\r\n   * @param {Point} [point]\r\n   * point based on which zoom is performed, usually refers to the current mouse position,\r\n   * if false - viewport center will be used.\r\n   * @param {number} [prevZoomLevel] Zoom level before new zoom was applied.\r\n   * @returns {number}\r\n   */\r\n  calculateZoomToPanOffset(axis, point, prevZoomLevel) {\r\n    const totalPanDistance = this.bounds.max[axis] - this.bounds.min[axis];\r\n    if (totalPanDistance === 0) {\r\n      return this.bounds.center[axis];\r\n    }\r\n\r\n    if (!point) {\r\n      point = this.pswp.getViewportCenterPoint();\r\n    }\r\n\r\n    if (!prevZoomLevel) {\r\n      prevZoomLevel = this.zoomLevels.initial;\r\n    }\r\n\r\n    const zoomFactor = this.currZoomLevel / prevZoomLevel;\r\n    return this.bounds.correctPan(\r\n      axis,\r\n      (this.pan[axis] - point[axis]) * zoomFactor + point[axis]\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Apply pan and keep it within bounds.\r\n   *\r\n   * @param {number} panX\r\n   * @param {number} panY\r\n   */\r\n  panTo(panX, panY) {\r\n    this.pan.x = this.bounds.correctPan('x', panX);\r\n    this.pan.y = this.bounds.correctPan('y', panY);\r\n    this.applyCurrentZoomPan();\r\n  }\r\n\r\n  /**\r\n   * If the slide in the current state can be panned by the user\r\n   * @returns {boolean}\r\n   */\r\n  isPannable() {\r\n    return Boolean(this.width) && (this.currZoomLevel > this.zoomLevels.fit);\r\n  }\r\n\r\n  /**\r\n   * If the slide can be zoomed\r\n   * @returns {boolean}\r\n   */\r\n  isZoomable() {\r\n    return Boolean(this.width) && this.content.isZoomable();\r\n  }\r\n\r\n  /**\r\n   * Apply transform and scale based on\r\n   * the current pan position (this.pan) and zoom level (this.currZoomLevel)\r\n   */\r\n  applyCurrentZoomPan() {\r\n    this._applyZoomTransform(this.pan.x, this.pan.y, this.currZoomLevel);\r\n    if (this === this.pswp.currSlide) {\r\n      this.pswp.dispatch('zoomPanUpdate', { slide: this });\r\n    }\r\n  }\r\n\r\n  zoomAndPanToInitial() {\r\n    this.currZoomLevel = this.zoomLevels.initial;\r\n\r\n    // pan according to the zoom level\r\n    this.bounds.update(this.currZoomLevel);\r\n    equalizePoints(this.pan, this.bounds.center);\r\n    this.pswp.dispatch('initialZoomPan', { slide: this });\r\n  }\r\n\r\n  /**\r\n   * Set translate and scale based on current resolution\r\n   *\r\n   * @param {number} x\r\n   * @param {number} y\r\n   * @param {number} zoom\r\n   * @private\r\n   */\r\n  _applyZoomTransform(x, y, zoom) {\r\n    zoom /= this.currentResolution || this.zoomLevels.initial;\r\n    setTransform(this.container, x, y, zoom);\r\n  }\r\n\r\n  calculateSize() {\r\n    const { pswp } = this;\r\n\r\n    equalizePoints(\r\n      this.panAreaSize,\r\n      getPanAreaSize(pswp.options, pswp.viewportSize, this.data, this.index)\r\n    );\r\n\r\n    this.zoomLevels.update(this.width, this.height, this.panAreaSize);\r\n\r\n    pswp.dispatch('calcSlideSize', {\r\n      slide: this\r\n    });\r\n  }\r\n\r\n  /** @returns {string} */\r\n  getCurrentTransform() {\r\n    const scale = this.currZoomLevel / (this.currentResolution || this.zoomLevels.initial);\r\n    return toTransformString(this.pan.x, this.pan.y, scale);\r\n  }\r\n\r\n  /**\r\n   * Set resolution and re-render the image.\r\n   *\r\n   * For example, if the real image size is 2000x1500,\r\n   * and resolution is 0.5 - it will be rendered as 1000x750.\r\n   *\r\n   * Image with zoom level 2 and resolution 0.5 is\r\n   * the same as image with zoom level 1 and resolution 1.\r\n   *\r\n   * Used to optimize animations and make\r\n   * sure that browser renders image in the highest quality.\r\n   * Also used by responsive images to load the correct one.\r\n   *\r\n   * @param {number} newResolution\r\n   */\r\n  _setResolution(newResolution) {\r\n    if (newResolution === this.currentResolution) {\r\n      return;\r\n    }\r\n\r\n    this.currentResolution = newResolution;\r\n    this.updateContentSize();\r\n\r\n    this.pswp.dispatch('resolutionChanged');\r\n  }\r\n}\r\n\r\nexport default Slide;\r\n", "import {\r\n  equalizePoints, roundPoint, clamp\r\n} from '../util/util.js';\r\n\r\n/** @typedef {import('../photoswipe.js').Point} Point */\r\n/** @typedef {import('./gestures.js').default} Gestures */\r\n\r\nconst PAN_END_FRICTION = 0.35;\r\nconst VERTICAL_DRAG_FRICTION = 0.6;\r\n\r\n// 1 corresponds to the third of viewport height\r\nconst MIN_RATIO_TO_CLOSE = 0.4;\r\n\r\n// Minimum speed required to navigate\r\n// to next or previous slide\r\nconst MIN_NEXT_SLIDE_SPEED = 0.5;\r\n\r\n/**\r\n * @param {number} initialVelocity\r\n * @param {number} decelerationRate\r\n * @returns {number}\r\n */\r\nfunction project(initialVelocity, decelerationRate) {\r\n  return initialVelocity * decelerationRate / (1 - decelerationRate);\r\n}\r\n\r\n/**\r\n * Handles single pointer dragging\r\n */\r\nclass DragHandler {\r\n  /**\r\n   * @param {Gestures} gestures\r\n   */\r\n  constructor(gestures) {\r\n    this.gestures = gestures;\r\n    this.pswp = gestures.pswp;\r\n    /** @type {Point} */\r\n    this.startPan = { x: 0, y: 0 };\r\n  }\r\n\r\n  start() {\r\n    if (this.pswp.currSlide) {\r\n      equalizePoints(this.startPan, this.pswp.currSlide.pan);\r\n    }\r\n    this.pswp.animations.stopAll();\r\n  }\r\n\r\n  change() {\r\n    const { p1, prevP1, dragAxis } = this.gestures;\r\n    const { currSlide } = this.pswp;\r\n\r\n    if (dragAxis === 'y'\r\n        && this.pswp.options.closeOnVerticalDrag\r\n        && (currSlide && currSlide.currZoomLevel <= currSlide.zoomLevels.fit)\r\n        && !this.gestures.isMultitouch) {\r\n      // Handle vertical drag to close\r\n      const panY = currSlide.pan.y + (p1.y - prevP1.y);\r\n      if (!this.pswp.dispatch('verticalDrag', { panY }).defaultPrevented) {\r\n        this._setPanWithFriction('y', panY, VERTICAL_DRAG_FRICTION);\r\n        const bgOpacity = 1 - Math.abs(this._getVerticalDragRatio(currSlide.pan.y));\r\n        this.pswp.applyBgOpacity(bgOpacity);\r\n        currSlide.applyCurrentZoomPan();\r\n      }\r\n    } else {\r\n      const mainScrollChanged = this._panOrMoveMainScroll('x');\r\n      if (!mainScrollChanged) {\r\n        this._panOrMoveMainScroll('y');\r\n\r\n        if (currSlide) {\r\n          roundPoint(currSlide.pan);\r\n          currSlide.applyCurrentZoomPan();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  end() {\r\n    const { velocity } = this.gestures;\r\n    const { mainScroll, currSlide } = this.pswp;\r\n    let indexDiff = 0;\r\n\r\n    this.pswp.animations.stopAll();\r\n\r\n    // Handle main scroll if it's shifted\r\n    if (mainScroll.isShifted()) {\r\n      // Position of the main scroll relative to the viewport\r\n      const mainScrollShiftDiff = mainScroll.x - mainScroll.getCurrSlideX();\r\n\r\n      // Ratio between 0 and 1:\r\n      // 0 - slide is not visible at all,\r\n      // 0.5 - half of the slide is visible\r\n      // 1 - slide is fully visible\r\n      const currentSlideVisibilityRatio = (mainScrollShiftDiff / this.pswp.viewportSize.x);\r\n\r\n      // Go next slide.\r\n      //\r\n      // - if velocity and its direction is matched,\r\n      //   and we see at least tiny part of the next slide\r\n      //\r\n      // - or if we see less than 50% of the current slide\r\n      //   and velocity is close to 0\r\n      //\r\n      if ((velocity.x < -MIN_NEXT_SLIDE_SPEED && currentSlideVisibilityRatio < 0)\r\n          || (velocity.x < 0.1 && currentSlideVisibilityRatio < -0.5)) {\r\n        // Go to next slide\r\n        indexDiff = 1;\r\n        velocity.x = Math.min(velocity.x, 0);\r\n      } else if ((velocity.x > MIN_NEXT_SLIDE_SPEED && currentSlideVisibilityRatio > 0)\r\n          || (velocity.x > -0.1 && currentSlideVisibilityRatio > 0.5)) {\r\n        // Go to prev slide\r\n        indexDiff = -1;\r\n        velocity.x = Math.max(velocity.x, 0);\r\n      }\r\n\r\n      mainScroll.moveIndexBy(indexDiff, true, velocity.x);\r\n    }\r\n\r\n    // Restore zoom level\r\n    if ((currSlide && currSlide.currZoomLevel > currSlide.zoomLevels.max)\r\n        || this.gestures.isMultitouch) {\r\n      this.gestures.zoomLevels.correctZoomPan(true);\r\n    } else {\r\n      // we run two animations instead of one,\r\n      // as each axis has own pan boundaries and thus different spring function\r\n      // (correctZoomPan does not have this functionality,\r\n      //  it animates all properties with single timing function)\r\n      this._finishPanGestureForAxis('x');\r\n      this._finishPanGestureForAxis('y');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * @param {'x' | 'y'} axis\r\n   */\r\n  _finishPanGestureForAxis(axis) {\r\n    const { velocity } = this.gestures;\r\n    const { currSlide } = this.pswp;\r\n\r\n    if (!currSlide) {\r\n      return;\r\n    }\r\n\r\n    const { pan, bounds } = currSlide;\r\n    const panPos = pan[axis];\r\n    const restoreBgOpacity = (this.pswp.bgOpacity < 1 && axis === 'y');\r\n\r\n    // 0.995 means - scroll view loses 0.5% of its velocity per millisecond\r\n    // Increasing this number will reduce travel distance\r\n    const decelerationRate = 0.995; // 0.99\r\n\r\n    // Pan position if there is no bounds\r\n    const projectedPosition = panPos + project(velocity[axis], decelerationRate);\r\n\r\n    if (restoreBgOpacity) {\r\n      const vDragRatio = this._getVerticalDragRatio(panPos);\r\n      const projectedVDragRatio = this._getVerticalDragRatio(projectedPosition);\r\n\r\n      // If we are above and moving upwards,\r\n      // or if we are below and moving downwards\r\n      if ((vDragRatio < 0 && projectedVDragRatio < -MIN_RATIO_TO_CLOSE)\r\n          || (vDragRatio > 0 && projectedVDragRatio > MIN_RATIO_TO_CLOSE)) {\r\n        this.pswp.close();\r\n        return;\r\n      }\r\n    }\r\n\r\n    // Pan position with corrected bounds\r\n    const correctedPanPosition = bounds.correctPan(axis, projectedPosition);\r\n\r\n    // Exit if pan position should not be changed\r\n    // or if speed it too low\r\n    if (panPos === correctedPanPosition) {\r\n      return;\r\n    }\r\n\r\n    // Overshoot if the final position is out of pan bounds\r\n    const dampingRatio = (correctedPanPosition === projectedPosition) ? 1 : 0.82;\r\n\r\n    const initialBgOpacity = this.pswp.bgOpacity;\r\n    const totalPanDist = correctedPanPosition - panPos;\r\n\r\n    this.pswp.animations.startSpring({\r\n      name: 'panGesture' + axis,\r\n      isPan: true,\r\n      start: panPos,\r\n      end: correctedPanPosition,\r\n      velocity: velocity[axis],\r\n      dampingRatio,\r\n      onUpdate: (pos) => {\r\n        // Animate opacity of background relative to Y pan position of an image\r\n        if (restoreBgOpacity && this.pswp.bgOpacity < 1) {\r\n          // 0 - start of animation, 1 - end of animation\r\n          const animationProgressRatio = 1 - (correctedPanPosition - pos) / totalPanDist;\r\n\r\n          // We clamp opacity to keep it between 0 and 1.\r\n          // As progress ratio can be larger than 1 due to overshoot,\r\n          // and we do not want to bounce opacity.\r\n          this.pswp.applyBgOpacity(clamp(\r\n            initialBgOpacity + (1 - initialBgOpacity) * animationProgressRatio,\r\n            0,\r\n            1\r\n          ));\r\n        }\r\n\r\n        pan[axis] = Math.floor(pos);\r\n        currSlide.applyCurrentZoomPan();\r\n      },\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Update position of the main scroll,\r\n   * or/and update pan position of the current slide.\r\n   *\r\n   * Should return true if it changes (or can change) main scroll.\r\n   *\r\n   * @private\r\n   * @param {'x' | 'y'} axis\r\n   * @returns {boolean}\r\n   */\r\n  _panOrMoveMainScroll(axis) {\r\n    const { p1, dragAxis, prevP1, isMultitouch } = this.gestures;\r\n    const { currSlide, mainScroll } = this.pswp;\r\n    const delta = (p1[axis] - prevP1[axis]);\r\n    const newMainScrollX = mainScroll.x + delta;\r\n\r\n    if (!delta || !currSlide) {\r\n      return false;\r\n    }\r\n\r\n    // Always move main scroll if image can not be panned\r\n    if (axis === 'x' && !currSlide.isPannable() && !isMultitouch) {\r\n      mainScroll.moveTo(newMainScrollX, true);\r\n      return true; // changed main scroll\r\n    }\r\n\r\n    const { bounds } = currSlide;\r\n    const newPan = currSlide.pan[axis] + delta;\r\n\r\n    if (this.pswp.options.allowPanToNext\r\n        && dragAxis === 'x'\r\n        && axis === 'x'\r\n        && !isMultitouch) {\r\n      const currSlideMainScrollX = mainScroll.getCurrSlideX();\r\n\r\n      // Position of the main scroll relative to the viewport\r\n      const mainScrollShiftDiff = mainScroll.x - currSlideMainScrollX;\r\n\r\n      const isLeftToRight = delta > 0;\r\n      const isRightToLeft = !isLeftToRight;\r\n\r\n      if (newPan > bounds.min[axis] && isLeftToRight) {\r\n        // Panning from left to right, beyond the left edge\r\n\r\n        // Wether the image was at minimum pan position (or less)\r\n        // when this drag gesture started.\r\n        // Minimum pan position refers to the left edge of the image.\r\n        const wasAtMinPanPosition = (bounds.min[axis] <= this.startPan[axis]);\r\n\r\n        if (wasAtMinPanPosition) {\r\n          mainScroll.moveTo(newMainScrollX, true);\r\n          return true;\r\n        } else {\r\n          this._setPanWithFriction(axis, newPan);\r\n          //currSlide.pan[axis] = newPan;\r\n        }\r\n      } else if (newPan < bounds.max[axis] && isRightToLeft) {\r\n        // Paning from right to left, beyond the right edge\r\n\r\n        // Maximum pan position refers to the right edge of the image.\r\n        const wasAtMaxPanPosition = (this.startPan[axis] <= bounds.max[axis]);\r\n\r\n        if (wasAtMaxPanPosition) {\r\n          mainScroll.moveTo(newMainScrollX, true);\r\n          return true;\r\n        } else {\r\n          this._setPanWithFriction(axis, newPan);\r\n          //currSlide.pan[axis] = newPan;\r\n        }\r\n      } else {\r\n        // If main scroll is shifted\r\n        if (mainScrollShiftDiff !== 0) {\r\n          // If main scroll is shifted right\r\n          if (mainScrollShiftDiff > 0 /*&& isRightToLeft*/) {\r\n            mainScroll.moveTo(Math.max(newMainScrollX, currSlideMainScrollX), true);\r\n            return true;\r\n          } else if (mainScrollShiftDiff < 0 /*&& isLeftToRight*/) {\r\n            // Main scroll is shifted left (Position is less than 0 comparing to the viewport 0)\r\n            mainScroll.moveTo(Math.min(newMainScrollX, currSlideMainScrollX), true);\r\n            return true;\r\n          }\r\n        } else {\r\n          // We are within pan bounds, so just pan\r\n          this._setPanWithFriction(axis, newPan);\r\n        }\r\n      }\r\n    } else {\r\n      if (axis === 'y') {\r\n        // Do not pan vertically if main scroll is shifted o\r\n        if (!mainScroll.isShifted() && bounds.min.y !== bounds.max.y) {\r\n          this._setPanWithFriction(axis, newPan);\r\n        }\r\n      } else {\r\n        this._setPanWithFriction(axis, newPan);\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  // If we move above - the ratio is negative\r\n  // If we move below the ratio is positive\r\n\r\n  /**\r\n   * Relation between pan Y position and third of viewport height.\r\n   *\r\n   * When we are at initial position (center bounds) - the ratio is 0,\r\n   * if position is shifted upwards - the ratio is negative,\r\n   * if position is shifted downwards - the ratio is positive.\r\n   *\r\n   * @private\r\n   * @param {number} panY The current pan Y position.\r\n   * @returns {number}\r\n   */\r\n  _getVerticalDragRatio(panY) {\r\n    return (panY - (this.pswp.currSlide?.bounds.center.y ?? 0)) / (this.pswp.viewportSize.y / 3);\r\n  }\r\n\r\n  /**\r\n   * Set pan position of the current slide.\r\n   * Apply friction if the position is beyond the pan bounds,\r\n   * or if custom friction is defined.\r\n   *\r\n   * @private\r\n   * @param {'x' | 'y'} axis\r\n   * @param {number} potentialPan\r\n   * @param {number} [customFriction] (0.1 - 1)\r\n   */\r\n  _setPanWithFriction(axis, potentialPan, customFriction) {\r\n    const { currSlide } = this.pswp;\r\n\r\n    if (!currSlide) {\r\n      return;\r\n    }\r\n\r\n    const { pan, bounds } = currSlide;\r\n    const correctedPan = bounds.correctPan(axis, potentialPan);\r\n    // If we are out of pan bounds\r\n    if (correctedPan !== potentialPan || customFriction) {\r\n      const delta = Math.round(potentialPan - pan[axis]);\r\n      pan[axis] += delta * (customFriction || PAN_END_FRICTION);\r\n    } else {\r\n      pan[axis] = potentialPan;\r\n    }\r\n  }\r\n}\r\n\r\nexport default DragHandler;\r\n", "import {\r\n  equalizePoints, getDistanceBetween, clamp, pointsEqual\r\n} from '../util/util.js';\r\n\r\n/** @typedef {import('../photoswipe.js').Point} Point */\r\n/** @typedef {import('./gestures.js').default} Gestures */\r\n\r\nconst UPPER_ZOOM_FRICTION = 0.05;\r\nconst LOWER_ZOOM_FRICTION = 0.15;\r\n\r\n\r\n/**\r\n * Get center point between two points\r\n *\r\n * @param {Point} p\r\n * @param {Point} p1\r\n * @param {Point} p2\r\n * @returns {Point}\r\n */\r\nfunction getZoomPointsCenter(p, p1, p2) {\r\n  p.x = (p1.x + p2.x) / 2;\r\n  p.y = (p1.y + p2.y) / 2;\r\n  return p;\r\n}\r\n\r\nclass ZoomHandler {\r\n  /**\r\n   * @param {Gestures} gestures\r\n   */\r\n  constructor(gestures) {\r\n    this.gestures = gestures;\r\n    /**\r\n     * @private\r\n     * @type {Point}\r\n     */\r\n    this._startPan = { x: 0, y: 0 };\r\n    /**\r\n     * @private\r\n     * @type {Point}\r\n     */\r\n    this._startZoomPoint = { x: 0, y: 0 };\r\n    /**\r\n     * @private\r\n     * @type {Point}\r\n     */\r\n    this._zoomPoint = { x: 0, y: 0 };\r\n    /** @private */\r\n    this._wasOverFitZoomLevel = false;\r\n    /** @private */\r\n    this._startZoomLevel = 1;\r\n  }\r\n\r\n  start() {\r\n    const { currSlide } = this.gestures.pswp;\r\n    if (currSlide) {\r\n      this._startZoomLevel = currSlide.currZoomLevel;\r\n      equalizePoints(this._startPan, currSlide.pan);\r\n    }\r\n\r\n    this.gestures.pswp.animations.stopAllPan();\r\n    this._wasOverFitZoomLevel = false;\r\n  }\r\n\r\n  change() {\r\n    const { p1, startP1, p2, startP2, pswp } = this.gestures;\r\n    const { currSlide } = pswp;\r\n\r\n    if (!currSlide) {\r\n      return;\r\n    }\r\n\r\n    const minZoomLevel = currSlide.zoomLevels.min;\r\n    const maxZoomLevel = currSlide.zoomLevels.max;\r\n\r\n    if (!currSlide.isZoomable() || pswp.mainScroll.isShifted()) {\r\n      return;\r\n    }\r\n\r\n    getZoomPointsCenter(this._startZoomPoint, startP1, startP2);\r\n    getZoomPointsCenter(this._zoomPoint, p1, p2);\r\n\r\n    let currZoomLevel = (1 / getDistanceBetween(startP1, startP2))\r\n                      * getDistanceBetween(p1, p2)\r\n                      * this._startZoomLevel;\r\n\r\n    // slightly over the zoom.fit\r\n    if (currZoomLevel > currSlide.zoomLevels.initial + (currSlide.zoomLevels.initial / 15)) {\r\n      this._wasOverFitZoomLevel = true;\r\n    }\r\n\r\n    if (currZoomLevel < minZoomLevel) {\r\n      if (pswp.options.pinchToClose\r\n          && !this._wasOverFitZoomLevel\r\n          && this._startZoomLevel <= currSlide.zoomLevels.initial) {\r\n        // fade out background if zooming out\r\n        const bgOpacity = 1 - ((minZoomLevel - currZoomLevel) / (minZoomLevel / 1.2));\r\n        if (!pswp.dispatch('pinchClose', { bgOpacity }).defaultPrevented) {\r\n          pswp.applyBgOpacity(bgOpacity);\r\n        }\r\n      } else {\r\n        // Apply the friction if zoom level is below the min\r\n        currZoomLevel = minZoomLevel - (minZoomLevel - currZoomLevel) * LOWER_ZOOM_FRICTION;\r\n      }\r\n    } else if (currZoomLevel > maxZoomLevel) {\r\n      // Apply the friction if zoom level is above the max\r\n      currZoomLevel = maxZoomLevel + (currZoomLevel - maxZoomLevel) * UPPER_ZOOM_FRICTION;\r\n    }\r\n\r\n    currSlide.pan.x = this._calculatePanForZoomLevel('x', currZoomLevel);\r\n    currSlide.pan.y = this._calculatePanForZoomLevel('y', currZoomLevel);\r\n\r\n    currSlide.setZoomLevel(currZoomLevel);\r\n    currSlide.applyCurrentZoomPan();\r\n  }\r\n\r\n  end() {\r\n    const { pswp } = this.gestures;\r\n    const { currSlide } = pswp;\r\n    if ((!currSlide || currSlide.currZoomLevel < currSlide.zoomLevels.initial)\r\n        && !this._wasOverFitZoomLevel\r\n        && pswp.options.pinchToClose) {\r\n      pswp.close();\r\n    } else {\r\n      this.correctZoomPan();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * @param {'x' | 'y'} axis\r\n   * @param {number} currZoomLevel\r\n   * @returns {number}\r\n   */\r\n  _calculatePanForZoomLevel(axis, currZoomLevel) {\r\n    const zoomFactor = currZoomLevel / this._startZoomLevel;\r\n    return this._zoomPoint[axis]\r\n            - ((this._startZoomPoint[axis] - this._startPan[axis]) * zoomFactor);\r\n  }\r\n\r\n  /**\r\n   * Correct currZoomLevel and pan if they are\r\n   * beyond minimum or maximum values.\r\n   * With animation.\r\n   *\r\n   * @param {boolean} [ignoreGesture]\r\n   * Wether gesture coordinates should be ignored when calculating destination pan position.\r\n   */\r\n  correctZoomPan(ignoreGesture) {\r\n    const { pswp } = this.gestures;\r\n    const { currSlide } = pswp;\r\n\r\n    if (!currSlide?.isZoomable()) {\r\n      return;\r\n    }\r\n\r\n    if (this._zoomPoint.x === 0) {\r\n      ignoreGesture = true;\r\n    }\r\n\r\n    const prevZoomLevel = currSlide.currZoomLevel;\r\n\r\n    /** @type {number} */\r\n    let destinationZoomLevel;\r\n    let currZoomLevelNeedsChange = true;\r\n\r\n    if (prevZoomLevel < currSlide.zoomLevels.initial) {\r\n      destinationZoomLevel = currSlide.zoomLevels.initial;\r\n      // zoom to min\r\n    } else if (prevZoomLevel > currSlide.zoomLevels.max) {\r\n      destinationZoomLevel = currSlide.zoomLevels.max;\r\n      // zoom to max\r\n    } else {\r\n      currZoomLevelNeedsChange = false;\r\n      destinationZoomLevel = prevZoomLevel;\r\n    }\r\n\r\n    const initialBgOpacity = pswp.bgOpacity;\r\n    const restoreBgOpacity = pswp.bgOpacity < 1;\r\n\r\n    const initialPan = equalizePoints({ x: 0, y: 0 }, currSlide.pan);\r\n    let destinationPan = equalizePoints({ x: 0, y: 0 }, initialPan);\r\n\r\n    if (ignoreGesture) {\r\n      this._zoomPoint.x = 0;\r\n      this._zoomPoint.y = 0;\r\n      this._startZoomPoint.x = 0;\r\n      this._startZoomPoint.y = 0;\r\n      this._startZoomLevel = prevZoomLevel;\r\n      equalizePoints(this._startPan, initialPan);\r\n    }\r\n\r\n    if (currZoomLevelNeedsChange) {\r\n      destinationPan = {\r\n        x: this._calculatePanForZoomLevel('x', destinationZoomLevel),\r\n        y: this._calculatePanForZoomLevel('y', destinationZoomLevel)\r\n      };\r\n    }\r\n\r\n    // set zoom level, so pan bounds are updated according to it\r\n    currSlide.setZoomLevel(destinationZoomLevel);\r\n\r\n    destinationPan = {\r\n      x: currSlide.bounds.correctPan('x', destinationPan.x),\r\n      y: currSlide.bounds.correctPan('y', destinationPan.y)\r\n    };\r\n\r\n    // return zoom level and its bounds to initial\r\n    currSlide.setZoomLevel(prevZoomLevel);\r\n\r\n    const panNeedsChange = !pointsEqual(destinationPan, initialPan);\r\n\r\n    if (!panNeedsChange && !currZoomLevelNeedsChange && !restoreBgOpacity) {\r\n      // update resolution after gesture\r\n      currSlide._setResolution(destinationZoomLevel);\r\n      currSlide.applyCurrentZoomPan();\r\n\r\n      // nothing to animate\r\n      return;\r\n    }\r\n\r\n    pswp.animations.stopAllPan();\r\n\r\n    pswp.animations.startSpring({\r\n      isPan: true,\r\n      start: 0,\r\n      end: 1000,\r\n      velocity: 0,\r\n      dampingRatio: 1,\r\n      naturalFrequency: 40,\r\n      onUpdate: (now) => {\r\n        now /= 1000; // 0 - start, 1 - end\r\n\r\n        if (panNeedsChange || currZoomLevelNeedsChange) {\r\n          if (panNeedsChange) {\r\n            currSlide.pan.x = initialPan.x + (destinationPan.x - initialPan.x) * now;\r\n            currSlide.pan.y = initialPan.y + (destinationPan.y - initialPan.y) * now;\r\n          }\r\n\r\n          if (currZoomLevelNeedsChange) {\r\n            const newZoomLevel = prevZoomLevel\r\n                        + (destinationZoomLevel - prevZoomLevel) * now;\r\n            currSlide.setZoomLevel(newZoomLevel);\r\n          }\r\n\r\n          currSlide.applyCurrentZoomPan();\r\n        }\r\n\r\n        // Restore background opacity\r\n        if (restoreBgOpacity && pswp.bgOpacity < 1) {\r\n          // We clamp opacity to keep it between 0 and 1.\r\n          // As progress ratio can be larger than 1 due to overshoot,\r\n          // and we do not want to bounce opacity.\r\n          pswp.applyBgOpacity(clamp(\r\n            initialBgOpacity + (1 - initialBgOpacity) * now, 0, 1\r\n          ));\r\n        }\r\n      },\r\n      onComplete: () => {\r\n        // update resolution after transition ends\r\n        currSlide._setResolution(destinationZoomLevel);\r\n        currSlide.applyCurrentZoomPan();\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport default ZoomHandler;\r\n", "/**\r\n * @template {string} T\r\n * @template {string} P\r\n * @typedef {import('../types.js').AddPostfix<T, P>} AddPostfix<T, P>\r\n */\r\n\r\n/** @typedef {import('./gestures.js').default} Gestures */\r\n/** @typedef {import('../photoswipe.js').Point} Point */\r\n\r\n/** @typedef {'imageClick' | 'bgClick' | 'tap' | 'doubleTap'} Actions */\r\n\r\n/**\r\n * Whether the tap was performed on the main slide\r\n * (rather than controls or caption).\r\n *\r\n * @param {PointerEvent} event\r\n * @returns {boolean}\r\n */\r\nfunction didTapOnMainContent(event) {\r\n  return !!(/** @type {HTMLElement} */ (event.target).closest('.pswp__container'));\r\n}\r\n\r\n/**\r\n * Tap, double-tap handler.\r\n */\r\nclass TapHandler {\r\n  /**\r\n   * @param {Gestures} gestures\r\n   */\r\n  constructor(gestures) {\r\n    this.gestures = gestures;\r\n  }\r\n\r\n  /**\r\n   * @param {Point} point\r\n   * @param {PointerEvent} originalEvent\r\n   */\r\n  click(point, originalEvent) {\r\n    const targetClassList = /** @type {HTMLElement} */ (originalEvent.target).classList;\r\n    const isImageClick = targetClassList.contains('pswp__img');\r\n    const isBackgroundClick = targetClassList.contains('pswp__item')\r\n                              || targetClassList.contains('pswp__zoom-wrap');\r\n\r\n    if (isImageClick) {\r\n      this._doClickOrTapAction('imageClick', point, originalEvent);\r\n    } else if (isBackgroundClick) {\r\n      this._doClickOrTapAction('bgClick', point, originalEvent);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {Point} point\r\n   * @param {PointerEvent} originalEvent\r\n   */\r\n  tap(point, originalEvent) {\r\n    if (didTapOnMainContent(originalEvent)) {\r\n      this._doClickOrTapAction('tap', point, originalEvent);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {Point} point\r\n   * @param {PointerEvent} originalEvent\r\n   */\r\n  doubleTap(point, originalEvent) {\r\n    if (didTapOnMainContent(originalEvent)) {\r\n      this._doClickOrTapAction('doubleTap', point, originalEvent);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * @param {Actions} actionName\r\n   * @param {Point} point\r\n   * @param {PointerEvent} originalEvent\r\n   */\r\n  _doClickOrTapAction(actionName, point, originalEvent) {\r\n    const { pswp } = this.gestures;\r\n    const { currSlide } = pswp;\r\n    const actionFullName = /** @type {AddPostfix<Actions, 'Action'>} */ (actionName + 'Action');\r\n    const optionValue = pswp.options[actionFullName];\r\n\r\n    if (pswp.dispatch(actionFullName, { point, originalEvent }).defaultPrevented) {\r\n      return;\r\n    }\r\n\r\n    if (typeof optionValue === 'function') {\r\n      optionValue.call(pswp, point, originalEvent);\r\n      return;\r\n    }\r\n\r\n    switch (optionValue) {\r\n      case 'close':\r\n      case 'next':\r\n        pswp[optionValue]();\r\n        break;\r\n      case 'zoom':\r\n        currSlide?.toggleZoom(point);\r\n        break;\r\n      case 'zoom-or-close':\r\n        // by default click zooms current image,\r\n        // if it can not be zoomed - gallery will be closed\r\n        if (currSlide?.isZoomable()\r\n            && currSlide.zoomLevels.secondary !== currSlide.zoomLevels.initial) {\r\n          currSlide.toggleZoom(point);\r\n        } else if (pswp.options.clickToCloseNonZoomable) {\r\n          pswp.close();\r\n        }\r\n        break;\r\n      case 'toggle-controls':\r\n        this.gestures.pswp.element?.classList.toggle('pswp--ui-visible');\r\n        // if (_controlsVisible) {\r\n        //   _ui.hideControls();\r\n        // } else {\r\n        //   _ui.showControls();\r\n        // }\r\n        break;\r\n    }\r\n  }\r\n}\r\n\r\nexport default TapHandler;\r\n", "import {\r\n  equalizePoints, pointsEqual, getDistanceBetween\r\n} from '../util/util.js';\r\n\r\nimport DragHandler from './drag-handler.js';\r\nimport ZoomHandler from './zoom-handler.js';\r\nimport TapHandler from './tap-handler.js';\r\n\r\n/** @typedef {import('../photoswipe.js').default} PhotoSwipe */\r\n/** @typedef {import('../photoswipe.js').Point} Point */\r\n\r\n// How far should user should drag\r\n// until we can determine that the gesture is swipe and its direction\r\nconst AXIS_SWIPE_HYSTERISIS = 10;\r\n//const PAN_END_FRICTION = 0.35;\r\n\r\nconst DOUBLE_TAP_DELAY = 300; // ms\r\nconst MIN_TAP_DISTANCE = 25; // px\r\n\r\n/**\r\n * Gestures class bind touch, pointer or mouse events\r\n * and emits drag to drag-handler and zoom events zoom-handler.\r\n *\r\n * Drag and zoom events are emited in requestAnimationFrame,\r\n * and only when one of pointers was actually changed.\r\n */\r\nclass Gestures {\r\n  /**\r\n   * @param {PhotoSwipe} pswp\r\n   */\r\n  constructor(pswp) {\r\n    this.pswp = pswp;\r\n\r\n    /** @type {'x' | 'y' | null} */\r\n    this.dragAxis = null;\r\n\r\n    // point objects are defined once and reused\r\n    // PhotoSwipe keeps track only of two pointers, others are ignored\r\n    /** @type {Point} */\r\n    this.p1 = { x: 0, y: 0 }; // the first pressed pointer\r\n    /** @type {Point} */\r\n    this.p2 = { x: 0, y: 0 }; // the second pressed pointer\r\n    /** @type {Point} */\r\n    this.prevP1 = { x: 0, y: 0 };\r\n    /** @type {Point} */\r\n    this.prevP2 = { x: 0, y: 0 };\r\n    /** @type {Point} */\r\n    this.startP1 = { x: 0, y: 0 };\r\n    /** @type {Point} */\r\n    this.startP2 = { x: 0, y: 0 };\r\n    /** @type {Point} */\r\n    this.velocity = { x: 0, y: 0 };\r\n\r\n    /** @type {Point}\r\n     * @private\r\n     */\r\n    this._lastStartP1 = { x: 0, y: 0 };\r\n    /** @type {Point}\r\n     * @private\r\n     */\r\n    this._intervalP1 = { x: 0, y: 0 };\r\n    /** @private */\r\n    this._numActivePoints = 0;\r\n    /** @type {Point[]}\r\n     * @private\r\n     */\r\n    this._ongoingPointers = [];\r\n    /** @private */\r\n    this._touchEventEnabled = 'ontouchstart' in window;\r\n    /** @private */\r\n    this._pointerEventEnabled = !!(window.PointerEvent);\r\n    this.supportsTouch = this._touchEventEnabled\r\n                          || (this._pointerEventEnabled && navigator.maxTouchPoints > 1);\r\n    /** @private */\r\n    this._numActivePoints = 0;\r\n    /** @private */\r\n    this._intervalTime = 0;\r\n    /** @private */\r\n    this._velocityCalculated = false;\r\n    this.isMultitouch = false;\r\n    this.isDragging = false;\r\n    this.isZooming = false;\r\n    /** @type {number | null} */\r\n    this.raf = null;\r\n    /** @type {NodeJS.Timeout | null}\r\n     * @private\r\n     */\r\n    this._tapTimer = null;\r\n\r\n    if (!this.supportsTouch) {\r\n      // disable pan to next slide for non-touch devices\r\n      pswp.options.allowPanToNext = false;\r\n    }\r\n\r\n    this.drag = new DragHandler(this);\r\n    this.zoomLevels = new ZoomHandler(this);\r\n    this.tapHandler = new TapHandler(this);\r\n\r\n    pswp.on('bindEvents', () => {\r\n      pswp.events.add(\r\n        pswp.scrollWrap,\r\n        'click',\r\n        /** @type EventListener */(this._onClick.bind(this))\r\n      );\r\n\r\n      if (this._pointerEventEnabled) {\r\n        this._bindEvents('pointer', 'down', 'up', 'cancel');\r\n      } else if (this._touchEventEnabled) {\r\n        this._bindEvents('touch', 'start', 'end', 'cancel');\r\n\r\n        // In previous versions we also bound mouse event here,\r\n        // in case device supports both touch and mouse events,\r\n        // but newer versions of browsers now support PointerEvent.\r\n\r\n        // on iOS10 if you bind touchmove/end after touchstart,\r\n        // and you don't preventDefault touchstart (which PhotoSwipe does),\r\n        // preventDefault will have no effect on touchmove and touchend.\r\n        // Unless you bind it previously.\r\n        if (pswp.scrollWrap) {\r\n          pswp.scrollWrap.ontouchmove = () => {};\r\n          pswp.scrollWrap.ontouchend = () => {};\r\n        }\r\n      } else {\r\n        this._bindEvents('mouse', 'down', 'up');\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * @param {'mouse' | 'touch' | 'pointer'} pref\r\n   * @param {'down' | 'start'} down\r\n   * @param {'up' | 'end'} up\r\n   * @param {'cancel'} [cancel]\r\n   */\r\n  _bindEvents(pref, down, up, cancel) {\r\n    const { pswp } = this;\r\n    const { events } = pswp;\r\n\r\n    const cancelEvent = cancel ? pref + cancel : '';\r\n\r\n    events.add(\r\n      pswp.scrollWrap,\r\n      pref + down,\r\n      /** @type EventListener */(this.onPointerDown.bind(this))\r\n    );\r\n    events.add(window, pref + 'move', /** @type EventListener */(this.onPointerMove.bind(this)));\r\n    events.add(window, pref + up, /** @type EventListener */(this.onPointerUp.bind(this)));\r\n    if (cancelEvent) {\r\n      events.add(\r\n        pswp.scrollWrap,\r\n        cancelEvent,\r\n        /** @type EventListener */(this.onPointerUp.bind(this))\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {PointerEvent} e\r\n   */\r\n  onPointerDown(e) {\r\n    // We do not call preventDefault for touch events\r\n    // to allow browser to show native dialog on longpress\r\n    // (the one that allows to save image or open it in new tab).\r\n    //\r\n    // Desktop Safari allows to drag images when preventDefault isn't called on mousedown,\r\n    // even though preventDefault IS called on mousemove. That's why we preventDefault mousedown.\r\n    const isMousePointer = e.type === 'mousedown' || e.pointerType === 'mouse';\r\n\r\n    // Allow dragging only via left mouse button.\r\n    // http://www.quirksmode.org/js/events_properties.html\r\n    // https://developer.mozilla.org/en-US/docs/Web/API/event.button\r\n    if (isMousePointer && e.button > 0) {\r\n      return;\r\n    }\r\n\r\n    const { pswp } = this;\r\n\r\n    // if PhotoSwipe is opening or closing\r\n    if (!pswp.opener.isOpen) {\r\n      e.preventDefault();\r\n      return;\r\n    }\r\n\r\n    if (pswp.dispatch('pointerDown', { originalEvent: e }).defaultPrevented) {\r\n      return;\r\n    }\r\n\r\n    if (isMousePointer) {\r\n      pswp.mouseDetected();\r\n\r\n      // preventDefault mouse event to prevent\r\n      // browser image drag feature\r\n      this._preventPointerEventBehaviour(e, 'down');\r\n    }\r\n\r\n    pswp.animations.stopAll();\r\n\r\n    this._updatePoints(e, 'down');\r\n\r\n    if (this._numActivePoints === 1) {\r\n      this.dragAxis = null;\r\n      // we need to store initial point to determine the main axis,\r\n      // drag is activated only after the axis is determined\r\n      equalizePoints(this.startP1, this.p1);\r\n    }\r\n\r\n    if (this._numActivePoints > 1) {\r\n      // Tap or double tap should not trigger if more than one pointer\r\n      this._clearTapTimer();\r\n      this.isMultitouch = true;\r\n    } else {\r\n      this.isMultitouch = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {PointerEvent} e\r\n   */\r\n  onPointerMove(e) {\r\n    this._preventPointerEventBehaviour(e, 'move');\r\n\r\n    if (!this._numActivePoints) {\r\n      return;\r\n    }\r\n\r\n    this._updatePoints(e, 'move');\r\n\r\n    if (this.pswp.dispatch('pointerMove', { originalEvent: e }).defaultPrevented) {\r\n      return;\r\n    }\r\n\r\n    if (this._numActivePoints === 1 && !this.isDragging) {\r\n      if (!this.dragAxis) {\r\n        this._calculateDragDirection();\r\n      }\r\n\r\n      // Drag axis was detected, emit drag.start\r\n      if (this.dragAxis && !this.isDragging) {\r\n        if (this.isZooming) {\r\n          this.isZooming = false;\r\n          this.zoomLevels.end();\r\n        }\r\n\r\n        this.isDragging = true;\r\n        this._clearTapTimer(); // Tap can not trigger after drag\r\n\r\n        // Adjust starting point\r\n        this._updateStartPoints();\r\n        this._intervalTime = Date.now();\r\n        //this._startTime = this._intervalTime;\r\n        this._velocityCalculated = false;\r\n        equalizePoints(this._intervalP1, this.p1);\r\n        this.velocity.x = 0;\r\n        this.velocity.y = 0;\r\n        this.drag.start();\r\n\r\n        this._rafStopLoop();\r\n        this._rafRenderLoop();\r\n      }\r\n    } else if (this._numActivePoints > 1 && !this.isZooming) {\r\n      this._finishDrag();\r\n\r\n      this.isZooming = true;\r\n\r\n      // Adjust starting points\r\n      this._updateStartPoints();\r\n\r\n      this.zoomLevels.start();\r\n\r\n      this._rafStopLoop();\r\n      this._rafRenderLoop();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  _finishDrag() {\r\n    if (this.isDragging) {\r\n      this.isDragging = false;\r\n\r\n      // Try to calculate velocity,\r\n      // if it wasn't calculated yet in drag.change\r\n      if (!this._velocityCalculated) {\r\n        this._updateVelocity(true);\r\n      }\r\n\r\n      this.drag.end();\r\n      this.dragAxis = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {PointerEvent} e\r\n   */\r\n  onPointerUp(e) {\r\n    if (!this._numActivePoints) {\r\n      return;\r\n    }\r\n\r\n    this._updatePoints(e, 'up');\r\n\r\n    if (this.pswp.dispatch('pointerUp', { originalEvent: e }).defaultPrevented) {\r\n      return;\r\n    }\r\n\r\n    if (this._numActivePoints === 0) {\r\n      this._rafStopLoop();\r\n\r\n      if (this.isDragging) {\r\n        this._finishDrag();\r\n      } else if (!this.isZooming && !this.isMultitouch) {\r\n        //this.zoomLevels.correctZoomPan();\r\n        this._finishTap(e);\r\n      }\r\n    }\r\n\r\n    if (this._numActivePoints < 2 && this.isZooming) {\r\n      this.isZooming = false;\r\n      this.zoomLevels.end();\r\n\r\n      if (this._numActivePoints === 1) {\r\n        // Since we have 1 point left, we need to reinitiate drag\r\n        this.dragAxis = null;\r\n        this._updateStartPoints();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  _rafRenderLoop() {\r\n    if (this.isDragging || this.isZooming) {\r\n      this._updateVelocity();\r\n\r\n      if (this.isDragging) {\r\n        // make sure that pointer moved since the last update\r\n        if (!pointsEqual(this.p1, this.prevP1)) {\r\n          this.drag.change();\r\n        }\r\n      } else /* if (this.isZooming) */ {\r\n        if (!pointsEqual(this.p1, this.prevP1)\r\n            || !pointsEqual(this.p2, this.prevP2)) {\r\n          this.zoomLevels.change();\r\n        }\r\n      }\r\n\r\n      this._updatePrevPoints();\r\n      this.raf = requestAnimationFrame(this._rafRenderLoop.bind(this));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update velocity at 50ms interval\r\n   *\r\n   * @private\r\n   * @param {boolean} [force]\r\n   */\r\n  _updateVelocity(force) {\r\n    const time = Date.now();\r\n    const duration = time - this._intervalTime;\r\n\r\n    if (duration < 50 && !force) {\r\n      return;\r\n    }\r\n\r\n\r\n    this.velocity.x = this._getVelocity('x', duration);\r\n    this.velocity.y = this._getVelocity('y', duration);\r\n\r\n    this._intervalTime = time;\r\n    equalizePoints(this._intervalP1, this.p1);\r\n    this._velocityCalculated = true;\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * @param {PointerEvent} e\r\n   */\r\n  _finishTap(e) {\r\n    const { mainScroll } = this.pswp;\r\n\r\n    // Do not trigger tap events if main scroll is shifted\r\n    if (mainScroll.isShifted()) {\r\n      // restore main scroll position\r\n      // (usually happens if stopped in the middle of animation)\r\n      mainScroll.moveIndexBy(0, true);\r\n      return;\r\n    }\r\n\r\n    // Do not trigger tap for touchcancel or pointercancel\r\n    if (e.type.indexOf('cancel') > 0) {\r\n      return;\r\n    }\r\n\r\n    // Trigger click instead of tap for mouse events\r\n    if (e.type === 'mouseup' || e.pointerType === 'mouse') {\r\n      this.tapHandler.click(this.startP1, e);\r\n      return;\r\n    }\r\n\r\n    // Disable delay if there is no doubleTapAction\r\n    const tapDelay = this.pswp.options.doubleTapAction ? DOUBLE_TAP_DELAY : 0;\r\n\r\n    // If tapTimer is defined - we tapped recently,\r\n    // check if the current tap is close to the previous one,\r\n    // if yes - trigger double tap\r\n    if (this._tapTimer) {\r\n      this._clearTapTimer();\r\n      // Check if two taps were more or less on the same place\r\n      if (getDistanceBetween(this._lastStartP1, this.startP1) < MIN_TAP_DISTANCE) {\r\n        this.tapHandler.doubleTap(this.startP1, e);\r\n      }\r\n    } else {\r\n      equalizePoints(this._lastStartP1, this.startP1);\r\n      this._tapTimer = setTimeout(() => {\r\n        this.tapHandler.tap(this.startP1, e);\r\n        this._clearTapTimer();\r\n      }, tapDelay);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  _clearTapTimer() {\r\n    if (this._tapTimer) {\r\n      clearTimeout(this._tapTimer);\r\n      this._tapTimer = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get velocity for axis\r\n   *\r\n   * @private\r\n   * @param {'x' | 'y'} axis\r\n   * @param {number} duration\r\n   * @returns {number}\r\n   */\r\n  _getVelocity(axis, duration) {\r\n    // displacement is like distance, but can be negative.\r\n    const displacement = this.p1[axis] - this._intervalP1[axis];\r\n\r\n    if (Math.abs(displacement) > 1 && duration > 5) {\r\n      return displacement / duration;\r\n    }\r\n\r\n    return 0;\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  _rafStopLoop() {\r\n    if (this.raf) {\r\n      cancelAnimationFrame(this.raf);\r\n      this.raf = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * @param {PointerEvent} e\r\n   * @param {'up' | 'down' | 'move'} pointerType Normalized pointer type\r\n   */\r\n  _preventPointerEventBehaviour(e, pointerType) {\r\n    const preventPointerEvent = this.pswp.applyFilters('preventPointerEvent', true, e, pointerType);\r\n    if (preventPointerEvent) {\r\n      e.preventDefault();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Parses and normalizes points from the touch, mouse or pointer event.\r\n   * Updates p1 and p2.\r\n   *\r\n   * @private\r\n   * @param {PointerEvent | TouchEvent} e\r\n   * @param {'up' | 'down' | 'move'} pointerType Normalized pointer type\r\n   */\r\n  _updatePoints(e, pointerType) {\r\n    if (this._pointerEventEnabled) {\r\n      const pointerEvent = /** @type {PointerEvent} */ (e);\r\n      // Try to find the current pointer in ongoing pointers by its ID\r\n      const pointerIndex = this._ongoingPointers.findIndex((ongoingPointer) => {\r\n        return ongoingPointer.id === pointerEvent.pointerId;\r\n      });\r\n\r\n      if (pointerType === 'up' && pointerIndex > -1) {\r\n        // release the pointer - remove it from ongoing\r\n        this._ongoingPointers.splice(pointerIndex, 1);\r\n      } else if (pointerType === 'down' && pointerIndex === -1) {\r\n        // add new pointer\r\n        this._ongoingPointers.push(this._convertEventPosToPoint(pointerEvent, { x: 0, y: 0 }));\r\n      } else if (pointerIndex > -1) {\r\n        // update existing pointer\r\n        this._convertEventPosToPoint(pointerEvent, this._ongoingPointers[pointerIndex]);\r\n      }\r\n\r\n      this._numActivePoints = this._ongoingPointers.length;\r\n\r\n      // update points that PhotoSwipe uses\r\n      // to calculate position and scale\r\n      if (this._numActivePoints > 0) {\r\n        equalizePoints(this.p1, this._ongoingPointers[0]);\r\n      }\r\n\r\n      if (this._numActivePoints > 1) {\r\n        equalizePoints(this.p2, this._ongoingPointers[1]);\r\n      }\r\n    } else {\r\n      const touchEvent = /** @type {TouchEvent} */ (e);\r\n\r\n      this._numActivePoints = 0;\r\n      if (touchEvent.type.indexOf('touch') > -1) {\r\n        // Touch Event\r\n        // https://developer.mozilla.org/en-US/docs/Web/API/TouchEvent\r\n        if (touchEvent.touches && touchEvent.touches.length > 0) {\r\n          this._convertEventPosToPoint(touchEvent.touches[0], this.p1);\r\n          this._numActivePoints++;\r\n          if (touchEvent.touches.length > 1) {\r\n            this._convertEventPosToPoint(touchEvent.touches[1], this.p2);\r\n            this._numActivePoints++;\r\n          }\r\n        }\r\n      } else {\r\n        // Mouse Event\r\n        this._convertEventPosToPoint(/** @type {PointerEvent} */ (e), this.p1);\r\n        if (pointerType === 'up') {\r\n          // clear all points on mouseup\r\n          this._numActivePoints = 0;\r\n        } else {\r\n          this._numActivePoints++;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /** update points that were used during previous rAF tick\r\n   * @private\r\n   */\r\n  _updatePrevPoints() {\r\n    equalizePoints(this.prevP1, this.p1);\r\n    equalizePoints(this.prevP2, this.p2);\r\n  }\r\n\r\n  /** update points at the start of gesture\r\n   * @private\r\n   */\r\n  _updateStartPoints() {\r\n    equalizePoints(this.startP1, this.p1);\r\n    equalizePoints(this.startP2, this.p2);\r\n    this._updatePrevPoints();\r\n  }\r\n\r\n  /** @private */\r\n  _calculateDragDirection() {\r\n    if (this.pswp.mainScroll.isShifted()) {\r\n      // if main scroll position is shifted – direction is always horizontal\r\n      this.dragAxis = 'x';\r\n    } else {\r\n      // calculate delta of the last touchmove tick\r\n      const diff = Math.abs(this.p1.x - this.startP1.x) - Math.abs(this.p1.y - this.startP1.y);\r\n\r\n      if (diff !== 0) {\r\n        // check if pointer was shifted horizontally or vertically\r\n        const axisToCheck = diff > 0 ? 'x' : 'y';\r\n\r\n        if (Math.abs(this.p1[axisToCheck] - this.startP1[axisToCheck]) >= AXIS_SWIPE_HYSTERISIS) {\r\n          this.dragAxis = axisToCheck;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Converts touch, pointer or mouse event\r\n   * to PhotoSwipe point.\r\n   *\r\n   * @private\r\n   * @param {Touch | PointerEvent} e\r\n   * @param {Point} p\r\n   * @returns {Point}\r\n   */\r\n  _convertEventPosToPoint(e, p) {\r\n    p.x = e.pageX - this.pswp.offset.x;\r\n    p.y = e.pageY - this.pswp.offset.y;\r\n\r\n    if ('pointerId' in e) {\r\n      p.id = e.pointerId;\r\n    } else if (e.identifier !== undefined) {\r\n      p.id = e.identifier;\r\n    }\r\n\r\n    return p;\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * @param {PointerEvent} e\r\n   */\r\n  _onClick(e) {\r\n    // Do not allow click event to pass through after drag\r\n    if (this.pswp.mainScroll.isShifted()) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    }\r\n  }\r\n}\r\n\r\nexport default Gestures;\r\n", "import {\r\n  setTransform,\r\n  createElement,\r\n} from './util/util.js';\r\n\r\n/** @typedef {import('./photoswipe.js').default} PhotoSwipe */\r\n/** @typedef {import('./slide/slide.js').default} Slide */\r\n\r\n/** @typedef {{ el: HTMLDivElement; slide?: Slide }} ItemHolder */\r\n\r\nconst MAIN_SCROLL_END_FRICTION = 0.35;\r\n\r\n\r\n// const MIN_SWIPE_TRANSITION_DURATION = 250;\r\n// const MAX_SWIPE_TRABSITION_DURATION = 500;\r\n// const DEFAULT_SWIPE_TRANSITION_DURATION = 333;\r\n\r\n/**\r\n * Handles movement of the main scrolling container\r\n * (for example, it repositions when user swipes left or right).\r\n *\r\n * Also stores its state.\r\n */\r\nclass MainScroll {\r\n  /**\r\n   * @param {PhotoSwipe} pswp\r\n   */\r\n  constructor(pswp) {\r\n    this.pswp = pswp;\r\n    this.x = 0;\r\n    this.slideWidth = 0;\r\n    /** @private */\r\n    this._currPositionIndex = 0;\r\n    /** @private */\r\n    this._prevPositionIndex = 0;\r\n    /** @private */\r\n    this._containerShiftIndex = -1;\r\n\r\n    /** @type {ItemHolder[]} */\r\n    this.itemHolders = [];\r\n  }\r\n\r\n  /**\r\n   * Position the scroller and slide containers\r\n   * according to viewport size.\r\n   *\r\n   * @param {boolean} [resizeSlides] Whether slides content should resized\r\n   */\r\n  resize(resizeSlides) {\r\n    const { pswp } = this;\r\n    const newSlideWidth = Math.round(\r\n      pswp.viewportSize.x + pswp.viewportSize.x * pswp.options.spacing\r\n    );\r\n    // Mobile browsers might trigger a resize event during a gesture.\r\n    // (due to toolbar appearing or hiding).\r\n    // Avoid re-adjusting main scroll position if width wasn't changed\r\n    const slideWidthChanged = (newSlideWidth !== this.slideWidth);\r\n\r\n    if (slideWidthChanged) {\r\n      this.slideWidth = newSlideWidth;\r\n      this.moveTo(this.getCurrSlideX());\r\n    }\r\n\r\n    this.itemHolders.forEach((itemHolder, index) => {\r\n      if (slideWidthChanged) {\r\n        setTransform(itemHolder.el, (index + this._containerShiftIndex)\r\n                                    * this.slideWidth);\r\n      }\r\n\r\n      if (resizeSlides && itemHolder.slide) {\r\n        itemHolder.slide.resize();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Reset X position of the main scroller to zero\r\n   */\r\n  resetPosition() {\r\n    // Position on the main scroller (offset)\r\n    // it is independent from slide index\r\n    this._currPositionIndex = 0;\r\n    this._prevPositionIndex = 0;\r\n\r\n    // This will force recalculation of size on next resize()\r\n    this.slideWidth = 0;\r\n\r\n    // _containerShiftIndex*viewportSize will give you amount of transform of the current slide\r\n    this._containerShiftIndex = -1;\r\n  }\r\n\r\n  /**\r\n   * Create and append array of three items\r\n   * that hold data about slides in DOM\r\n   */\r\n  appendHolders() {\r\n    this.itemHolders = [];\r\n\r\n    // append our three slide holders -\r\n    // previous, current, and next\r\n    for (let i = 0; i < 3; i++) {\r\n      const el = createElement('pswp__item', 'div', this.pswp.container);\r\n      el.setAttribute('role', 'group');\r\n      el.setAttribute('aria-roledescription', 'slide');\r\n      el.setAttribute('aria-hidden', 'true');\r\n\r\n      // hide nearby item holders until initial zoom animation finishes (to avoid extra Paints)\r\n      el.style.display = (i === 1) ? 'block' : 'none';\r\n\r\n      this.itemHolders.push({\r\n        el,\r\n        //index: -1\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Whether the main scroll can be horizontally swiped to the next or previous slide.\r\n   * @returns {boolean}\r\n   */\r\n  canBeSwiped() {\r\n    return this.pswp.getNumItems() > 1;\r\n  }\r\n\r\n  /**\r\n   * Move main scroll by X amount of slides.\r\n   * For example:\r\n   *   `-1` will move to the previous slide,\r\n   *    `0` will reset the scroll position of the current slide,\r\n   *    `3` will move three slides forward\r\n   *\r\n   * If loop option is enabled - index will be automatically looped too,\r\n   * (for example `-1` will move to the last slide of the gallery).\r\n   *\r\n   * @param {number} diff\r\n   * @param {boolean} [animate]\r\n   * @param {number} [velocityX]\r\n   * @returns {boolean} whether index was changed or not\r\n   */\r\n  moveIndexBy(diff, animate, velocityX) {\r\n    const { pswp } = this;\r\n    let newIndex = pswp.potentialIndex + diff;\r\n    const numSlides = pswp.getNumItems();\r\n\r\n    if (pswp.canLoop()) {\r\n      newIndex = pswp.getLoopedIndex(newIndex);\r\n      const distance = (diff + numSlides) % numSlides;\r\n      if (distance <= numSlides / 2) {\r\n        // go forward\r\n        diff = distance;\r\n      } else {\r\n        // go backwards\r\n        diff = distance - numSlides;\r\n      }\r\n    } else {\r\n      if (newIndex < 0) {\r\n        newIndex = 0;\r\n      } else if (newIndex >= numSlides) {\r\n        newIndex = numSlides - 1;\r\n      }\r\n      diff = newIndex - pswp.potentialIndex;\r\n    }\r\n\r\n    pswp.potentialIndex = newIndex;\r\n    this._currPositionIndex -= diff;\r\n\r\n    pswp.animations.stopMainScroll();\r\n\r\n    const destinationX = this.getCurrSlideX();\r\n    if (!animate) {\r\n      this.moveTo(destinationX);\r\n      this.updateCurrItem();\r\n    } else {\r\n      pswp.animations.startSpring({\r\n        isMainScroll: true,\r\n        start: this.x,\r\n        end: destinationX,\r\n        velocity: velocityX || 0,\r\n        naturalFrequency: 30,\r\n        dampingRatio: 1, //0.7,\r\n        onUpdate: (x) => {\r\n          this.moveTo(x);\r\n        },\r\n        onComplete: () => {\r\n          this.updateCurrItem();\r\n          pswp.appendHeavy();\r\n        }\r\n      });\r\n\r\n      let currDiff = pswp.potentialIndex - pswp.currIndex;\r\n      if (pswp.canLoop()) {\r\n        const currDistance = (currDiff + numSlides) % numSlides;\r\n        if (currDistance <= numSlides / 2) {\r\n          // go forward\r\n          currDiff = currDistance;\r\n        } else {\r\n          // go backwards\r\n          currDiff = currDistance - numSlides;\r\n        }\r\n      }\r\n\r\n      // Force-append new slides during transition\r\n      // if difference between slides is more than 1\r\n      if (Math.abs(currDiff) > 1) {\r\n        this.updateCurrItem();\r\n      }\r\n    }\r\n\r\n    return Boolean(diff);\r\n  }\r\n\r\n  /**\r\n   * X position of the main scroll for the current slide\r\n   * (ignores position during dragging)\r\n   * @returns {number}\r\n   */\r\n  getCurrSlideX() {\r\n    return this.slideWidth * this._currPositionIndex;\r\n  }\r\n\r\n  /**\r\n   * Whether scroll position is shifted.\r\n   * For example, it will return true if the scroll is being dragged or animated.\r\n   * @returns {boolean}\r\n   */\r\n  isShifted() {\r\n    return this.x !== this.getCurrSlideX();\r\n  }\r\n\r\n  /**\r\n   * Update slides X positions and set their content\r\n   */\r\n  updateCurrItem() {\r\n    const { pswp } = this;\r\n    const positionDifference = this._prevPositionIndex - this._currPositionIndex;\r\n\r\n    if (!positionDifference) {\r\n      return;\r\n    }\r\n\r\n    this._prevPositionIndex = this._currPositionIndex;\r\n\r\n    pswp.currIndex = pswp.potentialIndex;\r\n\r\n    let diffAbs = Math.abs(positionDifference);\r\n    /** @type {ItemHolder | undefined} */\r\n    let tempHolder;\r\n\r\n    if (diffAbs >= 3) {\r\n      this._containerShiftIndex += positionDifference + (positionDifference > 0 ? -3 : 3);\r\n      diffAbs = 3;\r\n\r\n      // If slides are changed by 3 screens or more - clean up previous slides\r\n      this.itemHolders.forEach((itemHolder) => {\r\n        itemHolder.slide?.destroy();\r\n        itemHolder.slide = undefined;\r\n      });\r\n    }\r\n\r\n    for (let i = 0; i < diffAbs; i++) {\r\n      if (positionDifference > 0) {\r\n        tempHolder = this.itemHolders.shift();\r\n        if (tempHolder) {\r\n          this.itemHolders[2] = tempHolder; // move first to last\r\n\r\n          this._containerShiftIndex++;\r\n\r\n          setTransform(tempHolder.el, (this._containerShiftIndex + 2) * this.slideWidth);\r\n\r\n          pswp.setContent(tempHolder, (pswp.currIndex - diffAbs) + i + 2);\r\n        }\r\n      } else {\r\n        tempHolder = this.itemHolders.pop();\r\n        if (tempHolder) {\r\n          this.itemHolders.unshift(tempHolder); // move last to first\r\n\r\n          this._containerShiftIndex--;\r\n\r\n          setTransform(tempHolder.el, this._containerShiftIndex * this.slideWidth);\r\n\r\n          pswp.setContent(tempHolder, (pswp.currIndex + diffAbs) - i - 2);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Reset transfrom every 50ish navigations in one direction.\r\n    //\r\n    // Otherwise transform will keep growing indefinitely,\r\n    // which might cause issues as browsers have a maximum transform limit.\r\n    // I wasn't able to reach it, but just to be safe.\r\n    // This should not cause noticable lag.\r\n    if (Math.abs(this._containerShiftIndex) > 50 && !this.isShifted()) {\r\n      this.resetPosition();\r\n      this.resize();\r\n    }\r\n\r\n    // Pan transition might be running (and consntantly updating pan position)\r\n    pswp.animations.stopAllPan();\r\n\r\n    this.itemHolders.forEach((itemHolder, i) => {\r\n      if (itemHolder.slide) {\r\n        // Slide in the 2nd holder is always active\r\n        itemHolder.slide.setIsActive(i === 1);\r\n      }\r\n    });\r\n\r\n    pswp.currSlide = this.itemHolders[1]?.slide;\r\n    pswp.contentLoader.updateLazy(positionDifference);\r\n\r\n    if (pswp.currSlide) {\r\n      pswp.currSlide.applyCurrentZoomPan();\r\n    }\r\n\r\n    pswp.dispatch('change');\r\n  }\r\n\r\n  /**\r\n   * Move the X position of the main scroll container\r\n   *\r\n   * @param {number} x\r\n   * @param {boolean} [dragging]\r\n   */\r\n  moveTo(x, dragging) {\r\n    if (!this.pswp.canLoop() && dragging) {\r\n      // Apply friction\r\n      let newSlideIndexOffset = ((this.slideWidth * this._currPositionIndex) - x) / this.slideWidth;\r\n      newSlideIndexOffset += this.pswp.currIndex;\r\n      const delta = Math.round(x - this.x);\r\n\r\n      if ((newSlideIndexOffset < 0 && delta > 0)\r\n          || (newSlideIndexOffset >= this.pswp.getNumItems() - 1 && delta < 0)) {\r\n        x = this.x + (delta * MAIN_SCROLL_END_FRICTION);\r\n      }\r\n    }\r\n\r\n    this.x = x;\r\n\r\n    if (this.pswp.container) {\r\n      setTransform(this.pswp.container, x);\r\n    }\r\n\r\n    this.pswp.dispatch('moveMainScroll', { x, dragging: dragging ?? false });\r\n  }\r\n}\r\n\r\nexport default MainScroll;\r\n", "import { specialKeyUsed } from './util/util.js';\r\n\r\n/** @typedef {import('./photoswipe.js').default} PhotoSwipe */\r\n\r\n/**\r\n * @template T\r\n * @typedef {import('./types.js').Methods<T>} Methods<T>\r\n */\r\n\r\nconst KeyboardKeyCodesMap = {\r\n  Escape: 27,\r\n  z: 90,\r\n  ArrowLeft: 37,\r\n  ArrowUp: 38,\r\n  ArrowRight: 39,\r\n  ArrowDown: 40,\r\n  Tab: 9,\r\n};\r\n\r\n/**\r\n * @template {keyof KeyboardKeyCodesMap} T\r\n * @param {T} key\r\n * @param {boolean} isKeySupported\r\n * @returns {T | number | undefined}\r\n */\r\nconst getKeyboardEventKey = (key, isKeySupported) => {\r\n  return isKeySupported ? key : KeyboardKeyCodesMap[key];\r\n};\r\n\r\n/**\r\n * - Manages keyboard shortcuts.\r\n * - Helps trap focus within photoswipe.\r\n */\r\nclass Keyboard {\r\n  /**\r\n   * @param {PhotoSwipe} pswp\r\n   */\r\n  constructor(pswp) {\r\n    this.pswp = pswp;\r\n    /** @private */\r\n    this._wasFocused = false;\r\n\r\n    pswp.on('bindEvents', () => {\r\n      if (pswp.options.trapFocus) {\r\n        // Dialog was likely opened by keyboard if initial point is not defined\r\n        if (!pswp.options.initialPointerPos) {\r\n          // focus causes layout,\r\n          // which causes lag during the animation,\r\n          // that's why we delay it until the opener transition ends\r\n          this._focusRoot();\r\n        }\r\n\r\n        pswp.events.add(\r\n          document,\r\n          'focusin',\r\n          /** @type EventListener */(this._onFocusIn.bind(this))\r\n        );\r\n      }\r\n\r\n      pswp.events.add(document, 'keydown', /** @type EventListener */(this._onKeyDown.bind(this)));\r\n    });\r\n\r\n    const lastActiveElement = /** @type {HTMLElement} */ (document.activeElement);\r\n    pswp.on('destroy', () => {\r\n      if (pswp.options.returnFocus\r\n          && lastActiveElement\r\n          && this._wasFocused) {\r\n        lastActiveElement.focus();\r\n      }\r\n    });\r\n  }\r\n\r\n  /** @private */\r\n  _focusRoot() {\r\n    if (!this._wasFocused && this.pswp.element) {\r\n      this.pswp.element.focus();\r\n      this._wasFocused = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * @param {KeyboardEvent} e\r\n   */\r\n  _onKeyDown(e) {\r\n    const { pswp } = this;\r\n\r\n    if (pswp.dispatch('keydown', { originalEvent: e }).defaultPrevented) {\r\n      return;\r\n    }\r\n\r\n    if (specialKeyUsed(e)) {\r\n      // don't do anything if special key pressed\r\n      // to prevent from overriding default browser actions\r\n      // for example, in Chrome on Mac cmd+arrow-left returns to previous page\r\n      return;\r\n    }\r\n\r\n    /** @type {Methods<PhotoSwipe> | undefined} */\r\n    let keydownAction;\r\n    /** @type {'x' | 'y' | undefined} */\r\n    let axis;\r\n    let isForward = false;\r\n    const isKeySupported = 'key' in e;\r\n\r\n    switch (isKeySupported ? e.key : e.keyCode) {\r\n      case getKeyboardEventKey('Escape', isKeySupported):\r\n        if (pswp.options.escKey) {\r\n          keydownAction = 'close';\r\n        }\r\n        break;\r\n      case getKeyboardEventKey('z', isKeySupported):\r\n        keydownAction = 'toggleZoom';\r\n        break;\r\n      case getKeyboardEventKey('ArrowLeft', isKeySupported):\r\n        axis = 'x';\r\n        break;\r\n      case getKeyboardEventKey('ArrowUp', isKeySupported):\r\n        axis = 'y';\r\n        break;\r\n      case getKeyboardEventKey('ArrowRight', isKeySupported):\r\n        axis = 'x';\r\n        isForward = true;\r\n        break;\r\n      case getKeyboardEventKey('ArrowDown', isKeySupported):\r\n        isForward = true;\r\n        axis = 'y';\r\n        break;\r\n      case getKeyboardEventKey('Tab', isKeySupported):\r\n        this._focusRoot();\r\n        break;\r\n      default:\r\n    }\r\n\r\n    // if left/right/top/bottom key\r\n    if (axis) {\r\n      // prevent page scroll\r\n      e.preventDefault();\r\n\r\n      const { currSlide } = pswp;\r\n\r\n      if (pswp.options.arrowKeys\r\n          && axis === 'x'\r\n          && pswp.getNumItems() > 1) {\r\n        keydownAction = isForward ? 'next' : 'prev';\r\n      } else if (currSlide && currSlide.currZoomLevel > currSlide.zoomLevels.fit) {\r\n        // up/down arrow keys pan the image vertically\r\n        // left/right arrow keys pan horizontally.\r\n        // Unless there is only one image,\r\n        // or arrowKeys option is disabled\r\n        currSlide.pan[axis] += isForward ? -80 : 80;\r\n        currSlide.panTo(currSlide.pan.x, currSlide.pan.y);\r\n      }\r\n    }\r\n\r\n    if (keydownAction) {\r\n      e.preventDefault();\r\n      // @ts-ignore\r\n      pswp[keydownAction]();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Trap focus inside photoswipe\r\n   *\r\n   * @private\r\n   * @param {FocusEvent} e\r\n   */\r\n  _onFocusIn(e) {\r\n    const { template } = this.pswp;\r\n    if (template\r\n        && document !== e.target\r\n        && template !== e.target\r\n        && !template.contains(/** @type {Node} */ (e.target))) {\r\n      // focus root element\r\n      template.focus();\r\n    }\r\n  }\r\n}\r\n\r\nexport default Keyboard;\r\n", "import { setTransitionStyle, removeTransitionStyle } from './util.js';\r\n\r\nconst DEFAULT_EASING = 'cubic-bezier(.4,0,.22,1)';\r\n\r\n/** @typedef {import('./animations.js').SharedAnimationProps} SharedAnimationProps */\r\n\r\n/** @typedef {Object} DefaultCssAnimationProps\r\n *\r\n * @prop {HTMLElement} target\r\n * @prop {number} [duration]\r\n * @prop {string} [easing]\r\n * @prop {string} [transform]\r\n * @prop {string} [opacity]\r\n * */\r\n\r\n/** @typedef {SharedAnimationProps & DefaultCssAnimationProps} CssAnimationProps */\r\n\r\n/**\r\n * Runs CSS transition.\r\n */\r\nclass CSSAnimation {\r\n  /**\r\n   * onComplete can be unpredictable, be careful about current state\r\n   *\r\n   * @param {CssAnimationProps} props\r\n   */\r\n  constructor(props) {\r\n    this.props = props;\r\n    const {\r\n      target,\r\n      onComplete,\r\n      transform,\r\n      onFinish = () => {},\r\n      duration = 333,\r\n      easing = DEFAULT_EASING,\r\n    } = props;\r\n\r\n    this.onFinish = onFinish;\r\n\r\n    // support only transform and opacity\r\n    const prop = transform ? 'transform' : 'opacity';\r\n    const propValue = props[prop] ?? '';\r\n\r\n    /** @private */\r\n    this._target = target;\r\n    /** @private */\r\n    this._onComplete = onComplete;\r\n    /** @private */\r\n    this._finished = false;\r\n\r\n    /** @private */\r\n    this._onTransitionEnd = this._onTransitionEnd.bind(this);\r\n\r\n    // Using timeout hack to make sure that animation\r\n    // starts even if the animated property was changed recently,\r\n    // otherwise transitionend might not fire or transition won't start.\r\n    // https://drafts.csswg.org/css-transitions/#starting\r\n    //\r\n    // ¯\\_(ツ)_/¯\r\n    /** @private */\r\n    this._helperTimeout = setTimeout(() => {\r\n      setTransitionStyle(target, prop, duration, easing);\r\n      this._helperTimeout = setTimeout(() => {\r\n        target.addEventListener('transitionend', this._onTransitionEnd, false);\r\n        target.addEventListener('transitioncancel', this._onTransitionEnd, false);\r\n\r\n        // Safari occasionally does not emit transitionend event\r\n        // if element property was modified during the transition,\r\n        // which may be caused by resize or third party component,\r\n        // using timeout as a safety fallback\r\n        this._helperTimeout = setTimeout(() => {\r\n          this._finalizeAnimation();\r\n        }, duration + 500);\r\n        target.style[prop] = propValue;\r\n      }, 30); // Do not reduce this number\r\n    }, 0);\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * @param {TransitionEvent} e\r\n   */\r\n  _onTransitionEnd(e) {\r\n    if (e.target === this._target) {\r\n      this._finalizeAnimation();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  _finalizeAnimation() {\r\n    if (!this._finished) {\r\n      this._finished = true;\r\n      this.onFinish();\r\n      if (this._onComplete) {\r\n        this._onComplete();\r\n      }\r\n    }\r\n  }\r\n\r\n  // Destroy is called automatically onFinish\r\n  destroy() {\r\n    if (this._helperTimeout) {\r\n      clearTimeout(this._helperTimeout);\r\n    }\r\n    removeTransitionStyle(this._target);\r\n    this._target.removeEventListener('transitionend', this._onTransitionEnd, false);\r\n    this._target.removeEventListener('transitioncancel', this._onTransitionEnd, false);\r\n    if (!this._finished) {\r\n      this._finalizeAnimation();\r\n    }\r\n  }\r\n}\r\n\r\nexport default CSSAnimation;\r\n", "const DEFAULT_NATURAL_FREQUENCY = 12;\r\nconst DEFAULT_DAMPING_RATIO = 0.75;\r\n\r\n/**\r\n * Spring easing helper\r\n */\r\nclass SpringEaser {\r\n  /**\r\n   * @param {number} initialVelocity Initial velocity, px per ms.\r\n   *\r\n   * @param {number} [dampingRatio]\r\n   * Determines how bouncy animation will be.\r\n   * From 0 to 1, 0 - always overshoot, 1 - do not overshoot.\r\n   * \"overshoot\" refers to part of animation that\r\n   * goes beyond the final value.\r\n   *\r\n   * @param {number} [naturalFrequency]\r\n   * Determines how fast animation will slow down.\r\n   * The higher value - the stiffer the transition will be,\r\n   * and the faster it will slow down.\r\n   * Recommended value from 10 to 50\r\n   */\r\n  constructor(initialVelocity, dampingRatio, naturalFrequency) {\r\n    this.velocity = initialVelocity * 1000; // convert to \"pixels per second\"\r\n\r\n    // https://en.wikipedia.org/wiki/Damping_ratio\r\n    this._dampingRatio = dampingRatio || DEFAULT_DAMPING_RATIO;\r\n\r\n    // https://en.wikipedia.org/wiki/Natural_frequency\r\n    this._naturalFrequency = naturalFrequency || DEFAULT_NATURAL_FREQUENCY;\r\n\r\n    this._dampedFrequency = this._naturalFrequency;\r\n\r\n    if (this._dampingRatio < 1) {\r\n      this._dampedFrequency *= Math.sqrt(1 - this._dampingRatio * this._dampingRatio);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {number} deltaPosition Difference between current and end position of the animation\r\n   * @param {number} deltaTime Frame duration in milliseconds\r\n   *\r\n   * @returns {number} Displacement, relative to the end position.\r\n   */\r\n  easeFrame(deltaPosition, deltaTime) {\r\n    // Inspired by Apple Webkit and Android spring function implementation\r\n    // https://en.wikipedia.org/wiki/Oscillation\r\n    // https://en.wikipedia.org/wiki/Damping_ratio\r\n    // we ignore mass (assume that it's 1kg)\r\n\r\n    let displacement = 0;\r\n    let coeff;\r\n\r\n    deltaTime /= 1000;\r\n\r\n    const naturalDumpingPow = Math.E ** (-this._dampingRatio * this._naturalFrequency * deltaTime);\r\n\r\n    if (this._dampingRatio === 1) {\r\n      coeff = this.velocity + this._naturalFrequency * deltaPosition;\r\n\r\n      displacement = (deltaPosition + coeff * deltaTime) * naturalDumpingPow;\r\n\r\n      this.velocity = displacement\r\n                        * (-this._naturalFrequency) + coeff\r\n                        * naturalDumpingPow;\r\n    } else if (this._dampingRatio < 1) {\r\n      coeff = (1 / this._dampedFrequency)\r\n                * (this._dampingRatio * this._naturalFrequency * deltaPosition + this.velocity);\r\n\r\n      const dumpedFCos = Math.cos(this._dampedFrequency * deltaTime);\r\n      const dumpedFSin = Math.sin(this._dampedFrequency * deltaTime);\r\n\r\n      displacement = naturalDumpingPow\r\n                       * (deltaPosition * dumpedFCos + coeff * dumpedFSin);\r\n\r\n      this.velocity = displacement\r\n                        * (-this._naturalFrequency)\r\n                        * this._dampingRatio\r\n                        + naturalDumpingPow\r\n                        * (-this._dampedFrequency * deltaPosition * dumpedFSin\r\n                        + this._dampedFrequency * coeff * dumpedFCos);\r\n    }\r\n\r\n    // Overdamped (>1) damping ratio is not supported\r\n\r\n    return displacement;\r\n  }\r\n}\r\n\r\nexport default SpringEaser;\r\n", "import SpringEaser from './spring-easer.js';\r\n\r\n/** @typedef {import('./animations.js').SharedAnimationProps} SharedAnimationProps */\r\n\r\n/**\r\n * @typedef {Object} DefaultSpringAnimationProps\r\n *\r\n * @prop {number} start\r\n * @prop {number} end\r\n * @prop {number} velocity\r\n * @prop {number} [dampingRatio]\r\n * @prop {number} [naturalFrequency]\r\n * @prop {(end: number) => void} onUpdate\r\n */\r\n\r\n/** @typedef {SharedAnimationProps & DefaultSpringAnimationProps} SpringAnimationProps */\r\n\r\nclass SpringAnimation {\r\n  /**\r\n   * @param {SpringAnimationProps} props\r\n   */\r\n  constructor(props) {\r\n    this.props = props;\r\n    this._raf = 0;\r\n\r\n    const {\r\n      start,\r\n      end,\r\n      velocity,\r\n      onUpdate,\r\n      onComplete,\r\n      onFinish = () => {},\r\n      dampingRatio,\r\n      naturalFrequency\r\n    } = props;\r\n\r\n    this.onFinish = onFinish;\r\n\r\n    const easer = new SpringEaser(velocity, dampingRatio, naturalFrequency);\r\n    let prevTime = Date.now();\r\n    let deltaPosition = start - end;\r\n\r\n    const animationLoop = () => {\r\n      if (this._raf) {\r\n        deltaPosition = easer.easeFrame(deltaPosition, Date.now() - prevTime);\r\n\r\n        // Stop the animation if velocity is low and position is close to end\r\n        if (Math.abs(deltaPosition) < 1 && Math.abs(easer.velocity) < 50) {\r\n          // Finalize the animation\r\n          onUpdate(end);\r\n          if (onComplete) {\r\n            onComplete();\r\n          }\r\n          this.onFinish();\r\n        } else {\r\n          prevTime = Date.now();\r\n          onUpdate(deltaPosition + end);\r\n          this._raf = requestAnimationFrame(animationLoop);\r\n        }\r\n      }\r\n    };\r\n\r\n    this._raf = requestAnimationFrame(animationLoop);\r\n  }\r\n\r\n  // Destroy is called automatically onFinish\r\n  destroy() {\r\n    if (this._raf >= 0) {\r\n      cancelAnimationFrame(this._raf);\r\n    }\r\n    this._raf = 0;\r\n  }\r\n}\r\n\r\nexport default SpringAnimation;\r\n", "import CSSAnimation from './css-animation.js';\r\nimport SpringAnimation from './spring-animation.js';\r\n\r\n/** @typedef {import('./css-animation.js').CssAnimationProps} CssAnimationProps */\r\n/** @typedef {import('./spring-animation.js').SpringAnimationProps} SpringAnimationProps */\r\n\r\n/** @typedef {Object} SharedAnimationProps\r\n * @prop {string} [name]\r\n * @prop {boolean} [isPan]\r\n * @prop {boolean} [isMainScroll]\r\n * @prop {VoidFunction} [onComplete]\r\n * @prop {VoidFunction} [onFinish]\r\n */\r\n\r\n/** @typedef {SpringAnimation | CSSAnimation} Animation */\r\n/** @typedef {SpringAnimationProps | CssAnimationProps} AnimationProps */\r\n\r\n/**\r\n * Manages animations\r\n */\r\nclass Animations {\r\n  constructor() {\r\n    /** @type {Animation[]} */\r\n    this.activeAnimations = [];\r\n  }\r\n\r\n  /**\r\n   * @param {SpringAnimationProps} props\r\n   */\r\n  startSpring(props) {\r\n    this._start(props, true);\r\n  }\r\n\r\n  /**\r\n   * @param {CssAnimationProps} props\r\n   */\r\n  startTransition(props) {\r\n    this._start(props);\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * @param {AnimationProps} props\r\n   * @param {boolean} [isSpring]\r\n   * @returns {Animation}\r\n   */\r\n  _start(props, isSpring) {\r\n    const animation = isSpring\r\n      ? new SpringAnimation(/** @type SpringAnimationProps */ (props))\r\n      : new CSSAnimation(/** @type CssAnimationProps */ (props));\r\n\r\n    this.activeAnimations.push(animation);\r\n    animation.onFinish = () => this.stop(animation);\r\n\r\n    return animation;\r\n  }\r\n\r\n  /**\r\n   * @param {Animation} animation\r\n   */\r\n  stop(animation) {\r\n    animation.destroy();\r\n    const index = this.activeAnimations.indexOf(animation);\r\n    if (index > -1) {\r\n      this.activeAnimations.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  stopAll() { // _stopAllAnimations\r\n    this.activeAnimations.forEach((animation) => {\r\n      animation.destroy();\r\n    });\r\n    this.activeAnimations = [];\r\n  }\r\n\r\n  /**\r\n   * Stop all pan or zoom transitions\r\n   */\r\n  stopAllPan() {\r\n    this.activeAnimations = this.activeAnimations.filter((animation) => {\r\n      if (animation.props.isPan) {\r\n        animation.destroy();\r\n        return false;\r\n      }\r\n\r\n      return true;\r\n    });\r\n  }\r\n\r\n  stopMainScroll() {\r\n    this.activeAnimations = this.activeAnimations.filter((animation) => {\r\n      if (animation.props.isMainScroll) {\r\n        animation.destroy();\r\n        return false;\r\n      }\r\n\r\n      return true;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Returns true if main scroll transition is running\r\n   */\r\n  // isMainScrollRunning() {\r\n  //   return this.activeAnimations.some((animation) => {\r\n  //     return animation.props.isMainScroll;\r\n  //   });\r\n  // }\r\n\r\n  /**\r\n   * Returns true if any pan or zoom transition is running\r\n   */\r\n  isPanRunning() {\r\n    return this.activeAnimations.some((animation) => {\r\n      return animation.props.isPan;\r\n    });\r\n  }\r\n}\r\n\r\nexport default Animations;\r\n", "/** @typedef {import('./photoswipe.js').default} PhotoSwipe */\r\n\r\n/**\r\n * Handles scroll wheel.\r\n * Can pan and zoom current slide image.\r\n */\r\nclass ScrollWheel {\r\n  /**\r\n   * @param {PhotoSwipe} pswp\r\n   */\r\n  constructor(pswp) {\r\n    this.pswp = pswp;\r\n    pswp.events.add(pswp.element, 'wheel', /** @type EventListener */(this._onWheel.bind(this)));\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * @param {WheelEvent} e\r\n   */\r\n  _onWheel(e) {\r\n    e.preventDefault();\r\n    const { currSlide } = this.pswp;\r\n    let { deltaX, deltaY } = e;\r\n\r\n    if (!currSlide) {\r\n      return;\r\n    }\r\n\r\n    if (this.pswp.dispatch('wheel', { originalEvent: e }).defaultPrevented) {\r\n      return;\r\n    }\r\n\r\n    if (e.ctrlKey || this.pswp.options.wheelToZoom) {\r\n      // zoom\r\n      if (currSlide.isZoomable()) {\r\n        let zoomFactor = -deltaY;\r\n        if (e.deltaMode === 1 /* DOM_DELTA_LINE */) {\r\n          zoomFactor *= 0.05;\r\n        } else {\r\n          zoomFactor *= e.deltaMode ? 1 : 0.002;\r\n        }\r\n        zoomFactor = 2 ** zoomFactor;\r\n\r\n        const destZoomLevel = currSlide.currZoomLevel * zoomFactor;\r\n        currSlide.zoomTo(destZoomLevel, {\r\n          x: e.clientX,\r\n          y: e.clientY\r\n        });\r\n      }\r\n    } else {\r\n      // pan\r\n      if (currSlide.isPannable()) {\r\n        if (e.deltaMode === 1 /* DOM_DELTA_LINE */) {\r\n          // 18 - average line height\r\n          deltaX *= 18;\r\n          deltaY *= 18;\r\n        }\r\n\r\n        currSlide.panTo(\r\n          currSlide.pan.x - deltaX,\r\n          currSlide.pan.y - deltaY\r\n        );\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default ScrollWheel;\r\n", "import { createElement } from '../util/util.js';\r\n\r\n/** @typedef {import('../photoswipe.js').default} PhotoSwipe */\r\n\r\n/**\r\n * @template T\r\n * @typedef {import('../types.js').Methods<T>} Methods<T>\r\n */\r\n\r\n/**\r\n * @typedef {Object} UIElementMarkupProps\r\n * @prop {boolean} [isCustomSVG]\r\n * @prop {string} inner\r\n * @prop {string} [outlineID]\r\n * @prop {number | string} [size]\r\n */\r\n\r\n/**\r\n * @typedef {Object} UIElementData\r\n * @prop {DefaultUIElements | string} [name]\r\n * @prop {string} [className]\r\n * @prop {UIElementMarkup} [html]\r\n * @prop {boolean} [isButton]\r\n * @prop {keyof HTMLElementTagNameMap} [tagName]\r\n * @prop {string} [title]\r\n * @prop {string} [ariaLabel]\r\n * @prop {(element: HTMLElement, pswp: PhotoSwipe) => void} [onInit]\r\n * @prop {Methods<PhotoSwipe> | ((e: MouseEvent, element: HTMLElement, pswp: PhotoSwipe) => void)} [onClick]\r\n * @prop {'bar' | 'wrapper' | 'root'} [appendTo]\r\n * @prop {number} [order]\r\n */\r\n\r\n/** @typedef {'arrowPrev' | 'arrowNext' | 'close' | 'zoom' | 'counter'} DefaultUIElements */\r\n\r\n/** @typedef {string | UIElementMarkupProps} UIElementMarkup */\r\n\r\n/**\r\n * @param {UIElementMarkup} [htmlData]\r\n * @returns {string}\r\n */\r\nfunction addElementHTML(htmlData) {\r\n  if (typeof htmlData === 'string') {\r\n    // Allow developers to provide full svg,\r\n    // For example:\r\n    // <svg viewBox=\"0 0 32 32\" width=\"32\" height=\"32\" aria-hidden=\"true\" class=\"pswp__icn\">\r\n    //   <path d=\"...\" />\r\n    //   <circle ... />\r\n    // </svg>\r\n    // Can also be any HTML string.\r\n    return htmlData;\r\n  }\r\n\r\n  if (!htmlData || !htmlData.isCustomSVG) {\r\n    return '';\r\n  }\r\n\r\n  const svgData = htmlData;\r\n  let out = '<svg aria-hidden=\"true\" class=\"pswp__icn\" viewBox=\"0 0 %d %d\" width=\"%d\" height=\"%d\">';\r\n  // replace all %d with size\r\n  out = out.split('%d').join(/** @type {string} */ (svgData.size || 32));\r\n\r\n  // Icons may contain outline/shadow,\r\n  // to make it we \"clone\" base icon shape and add border to it.\r\n  // Icon itself and border are styled via CSS.\r\n  //\r\n  // Property shadowID defines ID of element that should be cloned.\r\n  if (svgData.outlineID) {\r\n    out += '<use class=\"pswp__icn-shadow\" xlink:href=\"#' + svgData.outlineID + '\"/>';\r\n  }\r\n\r\n  out += svgData.inner;\r\n\r\n  out += '</svg>';\r\n\r\n  return out;\r\n}\r\n\r\nclass UIElement {\r\n  /**\r\n   * @param {PhotoSwipe} pswp\r\n   * @param {UIElementData} data\r\n   */\r\n  constructor(pswp, data) {\r\n    const name = data.name || data.className;\r\n    let elementHTML = data.html;\r\n\r\n    // @ts-expect-error lookup only by `data.name` maybe?\r\n    if (pswp.options[name] === false) {\r\n      // exit if element is disabled from options\r\n      return;\r\n    }\r\n\r\n    // Allow to override SVG icons from options\r\n    // @ts-expect-error lookup only by `data.name` maybe?\r\n    if (typeof pswp.options[name + 'SVG'] === 'string') {\r\n      // arrowPrevSVG\r\n      // arrowNextSVG\r\n      // closeSVG\r\n      // zoomSVG\r\n      // @ts-expect-error lookup only by `data.name` maybe?\r\n      elementHTML = pswp.options[name + 'SVG'];\r\n    }\r\n\r\n    pswp.dispatch('uiElementCreate', { data });\r\n\r\n    let className = '';\r\n    if (data.isButton) {\r\n      className += 'pswp__button ';\r\n      className += (data.className || `pswp__button--${data.name}`);\r\n    } else {\r\n      className += (data.className || `pswp__${data.name}`);\r\n    }\r\n\r\n    let tagName = data.isButton ? (data.tagName || 'button') : (data.tagName || 'div');\r\n    tagName = /** @type {keyof HTMLElementTagNameMap} */ (tagName.toLowerCase());\r\n    /** @type {HTMLElement} */\r\n    const element = createElement(className, tagName);\r\n\r\n    if (data.isButton) {\r\n      if (tagName === 'button') {\r\n        /** @type {HTMLButtonElement} */ (element).type = 'button';\r\n      }\r\n\r\n      let { title } = data;\r\n      const { ariaLabel } = data;\r\n\r\n      // @ts-expect-error lookup only by `data.name` maybe?\r\n      if (typeof pswp.options[name + 'Title'] === 'string') {\r\n        // @ts-expect-error lookup only by `data.name` maybe?\r\n        title = pswp.options[name + 'Title'];\r\n      }\r\n\r\n      if (title) {\r\n        element.title = title;\r\n      }\r\n\r\n      const ariaText = ariaLabel || title;\r\n      if (ariaText) {\r\n        element.setAttribute('aria-label', ariaText);\r\n      }\r\n    }\r\n\r\n    element.innerHTML = addElementHTML(elementHTML);\r\n\r\n    if (data.onInit) {\r\n      data.onInit(element, pswp);\r\n    }\r\n\r\n    if (data.onClick) {\r\n      element.onclick = (e) => {\r\n        if (typeof data.onClick === 'string') {\r\n          // @ts-ignore\r\n          pswp[data.onClick]();\r\n        } else if (typeof data.onClick === 'function') {\r\n          data.onClick(e, element, pswp);\r\n        }\r\n      };\r\n    }\r\n\r\n    // Top bar is default position\r\n    const appendTo = data.appendTo || 'bar';\r\n    /** @type {HTMLElement | undefined} root element by default */\r\n    let container = pswp.element;\r\n    if (appendTo === 'bar') {\r\n      if (!pswp.topBar) {\r\n        pswp.topBar = createElement('pswp__top-bar pswp__hide-on-close', 'div', pswp.scrollWrap);\r\n      }\r\n      container = pswp.topBar;\r\n    } else {\r\n      // element outside of top bar gets a secondary class\r\n      // that makes element fade out on close\r\n      element.classList.add('pswp__hide-on-close');\r\n\r\n      if (appendTo === 'wrapper') {\r\n        container = pswp.scrollWrap;\r\n      }\r\n    }\r\n\r\n    container?.appendChild(pswp.applyFilters('uiElement', element, data));\r\n  }\r\n}\r\n\r\nexport default UIElement;\r\n", "/*\r\n  Backward and forward arrow buttons\r\n */\r\n\r\n/** @typedef {import('./ui-element.js').UIElementData} UIElementData */\r\n/** @typedef {import('../photoswipe.js').default} PhotoSwipe */\r\n\r\n/**\r\n *\r\n * @param {HTMLElement} element\r\n * @param {PhotoSwipe} pswp\r\n * @param {boolean} [isNextButton]\r\n */\r\nfunction initArrowButton(element, pswp, isNextButton) {\r\n  element.classList.add('pswp__button--arrow');\r\n  // TODO: this should point to a unique id for this instance\r\n  element.setAttribute('aria-controls', 'pswp__items');\r\n  pswp.on('change', () => {\r\n    if (!pswp.options.loop) {\r\n      if (isNextButton) {\r\n        /** @type {HTMLButtonElement} */\r\n        (element).disabled = !(pswp.currIndex < pswp.getNumItems() - 1);\r\n      } else {\r\n        /** @type {HTMLButtonElement} */\r\n        (element).disabled = !(pswp.currIndex > 0);\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\n/** @type {UIElementData} */\r\nexport const arrowPrev = {\r\n  name: 'arrowPrev',\r\n  className: 'pswp__button--arrow--prev',\r\n  title: 'Previous',\r\n  order: 10,\r\n  isButton: true,\r\n  appendTo: 'wrapper',\r\n  html: {\r\n    isCustomSVG: true,\r\n    size: 60,\r\n    inner: '<path d=\"M29 43l-3 3-16-16 16-16 3 3-13 13 13 13z\" id=\"pswp__icn-arrow\"/>',\r\n    outlineID: 'pswp__icn-arrow'\r\n  },\r\n  onClick: 'prev',\r\n  onInit: initArrowButton\r\n};\r\n\r\n/** @type {UIElementData} */\r\nexport const arrowNext = {\r\n  name: 'arrowNext',\r\n  className: 'pswp__button--arrow--next',\r\n  title: 'Next',\r\n  order: 11,\r\n  isButton: true,\r\n  appendTo: 'wrapper',\r\n  html: {\r\n    isCustomSVG: true,\r\n    size: 60,\r\n    inner: '<use xlink:href=\"#pswp__icn-arrow\"/>',\r\n    outlineID: 'pswp__icn-arrow'\r\n  },\r\n  onClick: 'next',\r\n  onInit: (el, pswp) => {\r\n    initArrowButton(el, pswp, true);\r\n  }\r\n};\r\n", "/** @type {import('./ui-element.js').UIElementData} UIElementData */\r\nconst closeButton = {\r\n  name: 'close',\r\n  title: 'Close',\r\n  order: 20,\r\n  isButton: true,\r\n  html: {\r\n    isCustomSVG: true,\r\n    inner: '<path d=\"M24 10l-2-2-6 6-6-6-2 2 6 6-6 6 2 2 6-6 6 6 2-2-6-6z\" id=\"pswp__icn-close\"/>',\r\n    outlineID: 'pswp__icn-close'\r\n  },\r\n  onClick: 'close'\r\n};\r\n\r\nexport default closeButton;\r\n", "/** @type {import('./ui-element.js').UIElementData} UIElementData */\r\nconst zoomButton = {\r\n  name: 'zoom',\r\n  title: 'Zoom',\r\n  order: 10,\r\n  isButton: true,\r\n  html: {\r\n    isCustomSVG: true,\r\n    // eslint-disable-next-line max-len\r\n    inner: '<path d=\"M17.426 19.926a6 6 0 1 1 1.5-1.5L23 22.5 21.5 24l-4.074-4.074z\" id=\"pswp__icn-zoom\"/>'\r\n          + '<path fill=\"currentColor\" class=\"pswp__zoom-icn-bar-h\" d=\"M11 16v-2h6v2z\"/>'\r\n          + '<path fill=\"currentColor\" class=\"pswp__zoom-icn-bar-v\" d=\"M13 12h2v6h-2z\"/>',\r\n    outlineID: 'pswp__icn-zoom'\r\n  },\r\n  onClick: 'toggleZoom'\r\n};\r\n\r\nexport default zoomButton;\r\n", "/** @type {import('./ui-element.js').UIElementData} UIElementData */\r\nexport const loadingIndicator = {\r\n  name: 'preloader',\r\n  appendTo: 'bar',\r\n  order: 7,\r\n  html: {\r\n    isCustomSVG: true,\r\n    // eslint-disable-next-line max-len\r\n    inner: '<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M21.2 16a5.2 5.2 0 1 1-5.2-5.2V8a8 8 0 1 0 8 8h-2.8Z\" id=\"pswp__icn-loading\"/>',\r\n    outlineID: 'pswp__icn-loading'\r\n  },\r\n  onInit: (indicatorElement, pswp) => {\r\n    /** @type {boolean | undefined} */\r\n    let isVisible;\r\n    /** @type {NodeJS.Timeout | null} */\r\n    let delayTimeout = null;\r\n\r\n    /**\r\n     * @param {string} className\r\n     * @param {boolean} add\r\n     */\r\n    const toggleIndicatorClass = (className, add) => {\r\n      indicatorElement.classList.toggle('pswp__preloader--' + className, add);\r\n    };\r\n\r\n    /**\r\n     * @param {boolean} visible\r\n     */\r\n    const setIndicatorVisibility = (visible) => {\r\n      if (isVisible !== visible) {\r\n        isVisible = visible;\r\n        toggleIndicatorClass('active', visible);\r\n      }\r\n    };\r\n\r\n    const updatePreloaderVisibility = () => {\r\n      if (!pswp.currSlide?.content.isLoading()) {\r\n        setIndicatorVisibility(false);\r\n        if (delayTimeout) {\r\n          clearTimeout(delayTimeout);\r\n          delayTimeout = null;\r\n        }\r\n        return;\r\n      }\r\n\r\n      if (!delayTimeout) {\r\n        // display loading indicator with delay\r\n        delayTimeout = setTimeout(() => {\r\n          setIndicatorVisibility(Boolean(pswp.currSlide?.content.isLoading()));\r\n          delayTimeout = null;\r\n        }, pswp.options.preloaderDelay);\r\n      }\r\n    };\r\n\r\n    pswp.on('change', updatePreloaderVisibility);\r\n\r\n    pswp.on('loadComplete', (e) => {\r\n      if (pswp.currSlide === e.slide) {\r\n        updatePreloaderVisibility();\r\n      }\r\n    });\r\n\r\n    // expose the method\r\n    if (pswp.ui) {\r\n      pswp.ui.updatePreloaderVisibility = updatePreloaderVisibility;\r\n    }\r\n  }\r\n};\r\n", "/** @type {import('./ui-element.js').UIElementData} UIElementData */\r\nexport const counterIndicator = {\r\n  name: 'counter',\r\n  order: 5,\r\n  onInit: (counterElement, pswp) => {\r\n    pswp.on('change', () => {\r\n      counterElement.innerText = (pswp.currIndex + 1)\r\n                                  + pswp.options.indexIndicatorSep\r\n                                  + pswp.getNumItems();\r\n    });\r\n  }\r\n};\r\n", "import UIElement from './ui-element.js';\r\nimport { arrowPrev, arrowNext } from './button-arrow.js';\r\nimport closeButton from './button-close.js';\r\nimport zoomButton from './button-zoom.js';\r\nimport { loadingIndicator } from './loading-indicator.js';\r\nimport { counterIndicator } from './counter-indicator.js';\r\n\r\n/** @typedef {import('../photoswipe.js').default} PhotoSwipe */\r\n/** @typedef {import('./ui-element.js').UIElementData} UIElementData */\r\n\r\n/**\r\n * Set special class on element when image is zoomed.\r\n *\r\n * By default, it is used to adjust\r\n * zoom icon and zoom cursor via CSS.\r\n *\r\n * @param {HTMLElement} el\r\n * @param {boolean} isZoomedIn\r\n */\r\nfunction setZoomedIn(el, isZoomedIn) {\r\n  el.classList.toggle('pswp--zoomed-in', isZoomedIn);\r\n}\r\n\r\nclass UI {\r\n  /**\r\n   * @param {PhotoSwipe} pswp\r\n   */\r\n  constructor(pswp) {\r\n    this.pswp = pswp;\r\n    this.isRegistered = false;\r\n    /** @type {UIElementData[]} */\r\n    this.uiElementsData = [];\r\n    /** @type {(UIElement | UIElementData)[]} */\r\n    this.items = [];\r\n    /** @type {() => void} */\r\n    this.updatePreloaderVisibility = () => {};\r\n\r\n    /**\r\n     * @private\r\n     * @type {number | undefined}\r\n     */\r\n    this._lastUpdatedZoomLevel = undefined;\r\n  }\r\n\r\n  init() {\r\n    const { pswp } = this;\r\n    this.isRegistered = false;\r\n    this.uiElementsData = [\r\n      closeButton,\r\n      arrowPrev,\r\n      arrowNext,\r\n      zoomButton,\r\n      loadingIndicator,\r\n      counterIndicator\r\n    ];\r\n\r\n    pswp.dispatch('uiRegister');\r\n\r\n    // sort by order\r\n    this.uiElementsData.sort((a, b) => {\r\n      // default order is 0\r\n      return (a.order || 0) - (b.order || 0);\r\n    });\r\n\r\n    this.items = [];\r\n\r\n    this.isRegistered = true;\r\n    this.uiElementsData.forEach((uiElementData) => {\r\n      this.registerElement(uiElementData);\r\n    });\r\n\r\n    pswp.on('change', () => {\r\n      pswp.element?.classList.toggle('pswp--one-slide', pswp.getNumItems() === 1);\r\n    });\r\n\r\n    pswp.on('zoomPanUpdate', () => this._onZoomPanUpdate());\r\n  }\r\n\r\n  /**\r\n   * @param {UIElementData} elementData\r\n   */\r\n  registerElement(elementData) {\r\n    if (this.isRegistered) {\r\n      this.items.push(\r\n        new UIElement(this.pswp, elementData)\r\n      );\r\n    } else {\r\n      this.uiElementsData.push(elementData);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Fired each time zoom or pan position is changed.\r\n   * Update classes that control visibility of zoom button and cursor icon.\r\n   *\r\n   * @private\r\n   */\r\n  _onZoomPanUpdate() {\r\n    const { template, currSlide, options } = this.pswp;\r\n\r\n    if (this.pswp.opener.isClosing || !template || !currSlide) {\r\n      return;\r\n    }\r\n\r\n    let { currZoomLevel } = currSlide;\r\n\r\n    // if not open yet - check against initial zoom level\r\n    if (!this.pswp.opener.isOpen) {\r\n      currZoomLevel = currSlide.zoomLevels.initial;\r\n    }\r\n\r\n    if (currZoomLevel === this._lastUpdatedZoomLevel) {\r\n      return;\r\n    }\r\n    this._lastUpdatedZoomLevel = currZoomLevel;\r\n\r\n    const currZoomLevelDiff = currSlide.zoomLevels.initial - currSlide.zoomLevels.secondary;\r\n\r\n    // Initial and secondary zoom levels are almost equal\r\n    if (Math.abs(currZoomLevelDiff) < 0.01 || !currSlide.isZoomable()) {\r\n      // disable zoom\r\n      setZoomedIn(template, false);\r\n      template.classList.remove('pswp--zoom-allowed');\r\n      return;\r\n    }\r\n\r\n    template.classList.add('pswp--zoom-allowed');\r\n\r\n    const potentialZoomLevel = currZoomLevel === currSlide.zoomLevels.initial\r\n      ? currSlide.zoomLevels.secondary : currSlide.zoomLevels.initial;\r\n\r\n    setZoomedIn(template, potentialZoomLevel <= currZoomLevel);\r\n\r\n    if (options.imageClickAction === 'zoom'\r\n        || options.imageClickAction === 'zoom-or-close') {\r\n      template.classList.add('pswp--click-to-zoom');\r\n    }\r\n  }\r\n}\r\n\r\nexport default UI;\r\n", "/** @typedef {import('./slide.js').SlideData} SlideData */\r\n/** @typedef {import('../photoswipe.js').default} PhotoSwipe */\r\n\r\n/** @typedef {{ x: number; y: number; w: number; innerRect?: { w: number; h: number; x: number; y: number } }} Bounds */\r\n\r\n/**\r\n * @param {HTMLElement} el\r\n * @returns Bounds\r\n */\r\nfunction getBoundsByElement(el) {\r\n  const thumbAreaRect = el.getBoundingClientRect();\r\n  return {\r\n    x: thumbAreaRect.left,\r\n    y: thumbAreaRect.top,\r\n    w: thumbAreaRect.width\r\n  };\r\n}\r\n\r\n/**\r\n * @param {HTMLElement} el\r\n * @param {number} imageWidth\r\n * @param {number} imageHeight\r\n * @returns Bounds\r\n */\r\nfunction getCroppedBoundsByElement(el, imageWidth, imageHeight) {\r\n  const thumbAreaRect = el.getBoundingClientRect();\r\n\r\n  // fill image into the area\r\n  // (do they same as object-fit:cover does to retrieve coordinates)\r\n  const hRatio = thumbAreaRect.width / imageWidth;\r\n  const vRatio = thumbAreaRect.height / imageHeight;\r\n  const fillZoomLevel = hRatio > vRatio ? hRatio : vRatio;\r\n\r\n  const offsetX = (thumbAreaRect.width - imageWidth * fillZoomLevel) / 2;\r\n  const offsetY = (thumbAreaRect.height - imageHeight * fillZoomLevel) / 2;\r\n\r\n  /**\r\n   * Coordinates of the image,\r\n   * as if it was not cropped,\r\n   * height is calculated automatically\r\n   *\r\n   * @type {Bounds}\r\n   */\r\n  const bounds = {\r\n    x: thumbAreaRect.left + offsetX,\r\n    y: thumbAreaRect.top + offsetY,\r\n    w: imageWidth * fillZoomLevel\r\n  };\r\n\r\n  // Coordinates of inner crop area\r\n  // relative to the image\r\n  bounds.innerRect = {\r\n    w: thumbAreaRect.width,\r\n    h: thumbAreaRect.height,\r\n    x: offsetX,\r\n    y: offsetY\r\n  };\r\n\r\n  return bounds;\r\n}\r\n\r\n/**\r\n * Get dimensions of thumbnail image\r\n * (click on which opens photoswipe or closes photoswipe to)\r\n *\r\n * @param {number} index\r\n * @param {SlideData} itemData\r\n * @param {PhotoSwipe} instance PhotoSwipe instance\r\n * @returns {Bounds | undefined}\r\n */\r\nexport function getThumbBounds(index, itemData, instance) {\r\n  // legacy event, before filters were introduced\r\n  const event = instance.dispatch('thumbBounds', {\r\n    index,\r\n    itemData,\r\n    instance\r\n  });\r\n  // @ts-expect-error\r\n  if (event.thumbBounds) {\r\n    // @ts-expect-error\r\n    return event.thumbBounds;\r\n  }\r\n\r\n  const { element } = itemData;\r\n  /** @type {Bounds | undefined} */\r\n  let thumbBounds;\r\n  /** @type {HTMLElement | null | undefined} */\r\n  let thumbnail;\r\n\r\n  if (element && instance.options.thumbSelector !== false) {\r\n    const thumbSelector = instance.options.thumbSelector || 'img';\r\n    thumbnail = element.matches(thumbSelector)\r\n      ? element : /** @type {HTMLElement | null} */ (element.querySelector(thumbSelector));\r\n  }\r\n\r\n  thumbnail = instance.applyFilters('thumbEl', thumbnail, itemData, index);\r\n\r\n  if (thumbnail) {\r\n    if (!itemData.thumbCropped) {\r\n      thumbBounds = getBoundsByElement(thumbnail);\r\n    } else {\r\n      thumbBounds = getCroppedBoundsByElement(\r\n        thumbnail,\r\n        itemData.width || itemData.w || 0,\r\n        itemData.height || itemData.h || 0\r\n      );\r\n    }\r\n  }\r\n\r\n  return instance.applyFilters('thumbBounds', thumbBounds, itemData, index);\r\n}\r\n", "/** @typedef {import('../lightbox/lightbox.js').default} PhotoSwipeLightbox */\r\n/** @typedef {import('../photoswipe.js').default} PhotoSwipe */\r\n/** @typedef {import('../photoswipe.js').PhotoSwipeOptions} PhotoSwipeOptions */\r\n/** @typedef {import('../photoswipe.js').DataSource} DataSource */\r\n/** @typedef {import('../ui/ui-element.js').UIElementData} UIElementData */\r\n/** @typedef {import('../slide/content.js').default} ContentDefault */\r\n/** @typedef {import('../slide/slide.js').default} Slide */\r\n/** @typedef {import('../slide/slide.js').SlideData} SlideData */\r\n/** @typedef {import('../slide/zoom-level.js').default} ZoomLevel */\r\n/** @typedef {import('../slide/get-thumb-bounds.js').Bounds} Bounds */\r\n\r\n/**\r\n * Allow adding an arbitrary props to the Content\r\n * https://photoswipe.com/custom-content/#using-webp-image-format\r\n * @typedef {ContentDefault & Record<string, any>} Content\r\n */\r\n/** @typedef {{ x?: number; y?: number }} Point */\r\n\r\n/**\r\n * @typedef {Object} PhotoSwipeEventsMap https://photoswipe.com/events/\r\n *\r\n *\r\n * https://photoswipe.com/adding-ui-elements/\r\n *\r\n * @prop {undefined} uiRegister\r\n * @prop {{ data: UIElementData }} uiElementCreate\r\n *\r\n *\r\n * https://photoswipe.com/events/#initialization-events\r\n *\r\n * @prop {undefined} beforeOpen\r\n * @prop {undefined} firstUpdate\r\n * @prop {undefined} initialLayout\r\n * @prop {undefined} change\r\n * @prop {undefined} afterInit\r\n * @prop {undefined} bindEvents\r\n *\r\n *\r\n * https://photoswipe.com/events/#opening-or-closing-transition-events\r\n *\r\n * @prop {undefined} openingAnimationStart\r\n * @prop {undefined} openingAnimationEnd\r\n * @prop {undefined} closingAnimationStart\r\n * @prop {undefined} closingAnimationEnd\r\n *\r\n *\r\n * https://photoswipe.com/events/#closing-events\r\n *\r\n * @prop {undefined} close\r\n * @prop {undefined} destroy\r\n *\r\n *\r\n * https://photoswipe.com/events/#pointer-and-gesture-events\r\n *\r\n * @prop {{ originalEvent: PointerEvent }} pointerDown\r\n * @prop {{ originalEvent: PointerEvent }} pointerMove\r\n * @prop {{ originalEvent: PointerEvent }} pointerUp\r\n * @prop {{ bgOpacity: number }} pinchClose can be default prevented\r\n * @prop {{ panY: number }} verticalDrag can be default prevented\r\n *\r\n *\r\n * https://photoswipe.com/events/#slide-content-events\r\n *\r\n * @prop {{ content: Content }} contentInit\r\n * @prop {{ content: Content; isLazy: boolean }} contentLoad can be default prevented\r\n * @prop {{ content: Content; isLazy: boolean }} contentLoadImage can be default prevented\r\n * @prop {{ content: Content; slide: Slide; isError?: boolean }} loadComplete\r\n * @prop {{ content: Content; slide: Slide }} loadError\r\n * @prop {{ content: Content; width: number; height: number }} contentResize can be default prevented\r\n * @prop {{ content: Content; width: number; height: number; slide: Slide }} imageSizeChange\r\n * @prop {{ content: Content }} contentLazyLoad can be default prevented\r\n * @prop {{ content: Content }} contentAppend can be default prevented\r\n * @prop {{ content: Content }} contentActivate can be default prevented\r\n * @prop {{ content: Content }} contentDeactivate can be default prevented\r\n * @prop {{ content: Content }} contentRemove can be default prevented\r\n * @prop {{ content: Content }} contentDestroy can be default prevented\r\n *\r\n *\r\n * undocumented\r\n *\r\n * @prop {{ point: Point; originalEvent: PointerEvent }} imageClickAction can be default prevented\r\n * @prop {{ point: Point; originalEvent: PointerEvent }} bgClickAction can be default prevented\r\n * @prop {{ point: Point; originalEvent: PointerEvent }} tapAction can be default prevented\r\n * @prop {{ point: Point; originalEvent: PointerEvent }} doubleTapAction can be default prevented\r\n *\r\n * @prop {{ originalEvent: KeyboardEvent }} keydown can be default prevented\r\n * @prop {{ x: number; dragging: boolean }} moveMainScroll\r\n * @prop {{ slide: Slide }} firstZoomPan\r\n * @prop {{ slide: Slide | undefined, data: SlideData, index: number }} gettingData\r\n * @prop {undefined} beforeResize\r\n * @prop {undefined} resize\r\n * @prop {undefined} viewportSize\r\n * @prop {undefined} updateScrollOffset\r\n * @prop {{ slide: Slide }} slideInit\r\n * @prop {{ slide: Slide }} afterSetContent\r\n * @prop {{ slide: Slide }} slideLoad\r\n * @prop {{ slide: Slide }} appendHeavy can be default prevented\r\n * @prop {{ slide: Slide }} appendHeavyContent\r\n * @prop {{ slide: Slide }} slideActivate\r\n * @prop {{ slide: Slide }} slideDeactivate\r\n * @prop {{ slide: Slide }} slideDestroy\r\n * @prop {{ destZoomLevel: number, centerPoint: Point | undefined, transitionDuration: number | false | undefined }} beforeZoomTo\r\n * @prop {{ slide: Slide }} zoomPanUpdate\r\n * @prop {{ slide: Slide }} initialZoomPan\r\n * @prop {{ slide: Slide }} calcSlideSize\r\n * @prop {undefined} resolutionChanged\r\n * @prop {{ originalEvent: WheelEvent }} wheel can be default prevented\r\n * @prop {{ content: Content }} contentAppendImage can be default prevented\r\n * @prop {{ index: number; itemData: SlideData }} lazyLoadSlide can be default prevented\r\n * @prop {undefined} lazyLoad\r\n * @prop {{ slide: Slide }} calcBounds\r\n * @prop {{ zoomLevels: ZoomLevel, slideData: SlideData }} zoomLevelsUpdate\r\n *\r\n *\r\n * legacy\r\n *\r\n * @prop {undefined} init\r\n * @prop {undefined} initialZoomIn\r\n * @prop {undefined} initialZoomOut\r\n * @prop {undefined} initialZoomInEnd\r\n * @prop {undefined} initialZoomOutEnd\r\n * @prop {{ dataSource: DataSource | undefined, numItems: number }} numItems\r\n * @prop {{ itemData: SlideData; index: number }} itemData\r\n * @prop {{ index: number, itemData: SlideData, instance: PhotoSwipe }} thumbBounds\r\n */\r\n\r\n/**\r\n * @typedef {Object} PhotoSwipeFiltersMap https://photoswipe.com/filters/\r\n *\r\n * @prop {(numItems: number, dataSource: DataSource | undefined) => number} numItems\r\n * Modify the total amount of slides. Example on Data sources page.\r\n * https://photoswipe.com/filters/#numitems\r\n *\r\n * @prop {(itemData: SlideData, index: number) => SlideData} itemData\r\n * Modify slide item data. Example on Data sources page.\r\n * https://photoswipe.com/filters/#itemdata\r\n *\r\n * @prop {(itemData: SlideData, element: HTMLElement, linkEl: HTMLAnchorElement) => SlideData} domItemData\r\n * Modify item data when it's parsed from DOM element. Example on Data sources page.\r\n * https://photoswipe.com/filters/#domitemdata\r\n *\r\n * @prop {(clickedIndex: number, e: MouseEvent, instance: PhotoSwipeLightbox) => number} clickedIndex\r\n * Modify clicked gallery item index.\r\n * https://photoswipe.com/filters/#clickedindex\r\n *\r\n * @prop {(placeholderSrc: string | false, content: Content) => string | false} placeholderSrc\r\n * Modify placeholder image source.\r\n * https://photoswipe.com/filters/#placeholdersrc\r\n *\r\n * @prop {(isContentLoading: boolean, content: Content) => boolean} isContentLoading\r\n * Modify if the content is currently loading.\r\n * https://photoswipe.com/filters/#iscontentloading\r\n *\r\n * @prop {(isContentZoomable: boolean, content: Content) => boolean} isContentZoomable\r\n * Modify if the content can be zoomed.\r\n * https://photoswipe.com/filters/#iscontentzoomable\r\n *\r\n * @prop {(useContentPlaceholder: boolean, content: Content) => boolean} useContentPlaceholder\r\n * Modify if the placeholder should be used for the content.\r\n * https://photoswipe.com/filters/#usecontentplaceholder\r\n *\r\n * @prop {(isKeepingPlaceholder: boolean, content: Content) => boolean} isKeepingPlaceholder\r\n * Modify if the placeholder should be kept after the content is loaded.\r\n * https://photoswipe.com/filters/#iskeepingplaceholder\r\n *\r\n *\r\n * @prop {(contentErrorElement: HTMLElement, content: Content) => HTMLElement} contentErrorElement\r\n * Modify an element when the content has error state (for example, if image cannot be loaded).\r\n * https://photoswipe.com/filters/#contenterrorelement\r\n *\r\n * @prop {(element: HTMLElement, data: UIElementData) => HTMLElement} uiElement\r\n * Modify a UI element that's being created.\r\n * https://photoswipe.com/filters/#uielement\r\n *\r\n * @prop {(thumbnail: HTMLElement | null | undefined, itemData: SlideData, index: number) => HTMLElement} thumbEl\r\n * Modify the thumbnail element from which opening zoom animation starts or ends.\r\n * https://photoswipe.com/filters/#thumbel\r\n *\r\n * @prop {(thumbBounds: Bounds | undefined, itemData: SlideData, index: number) => Bounds} thumbBounds\r\n * Modify the thumbnail bounds from which opening zoom animation starts or ends.\r\n * https://photoswipe.com/filters/#thumbbounds\r\n *\r\n * @prop {(srcsetSizesWidth: number, content: Content) => number} srcsetSizesWidth\r\n *\r\n * @prop {(preventPointerEvent: boolean, event: PointerEvent, pointerType: string) => boolean} preventPointerEvent\r\n *\r\n */\r\n\r\n/**\r\n * @template {keyof PhotoSwipeFiltersMap} T\r\n * @typedef {{ fn: PhotoSwipeFiltersMap[T], priority: number }} Filter\r\n */\r\n\r\n/**\r\n * @template {keyof PhotoSwipeEventsMap} T\r\n * @typedef {PhotoSwipeEventsMap[T] extends undefined ? PhotoSwipeEvent<T> : PhotoSwipeEvent<T> & PhotoSwipeEventsMap[T]} AugmentedEvent\r\n */\r\n\r\n/**\r\n * @template {keyof PhotoSwipeEventsMap} T\r\n * @typedef {(event: AugmentedEvent<T>) => void} EventCallback\r\n */\r\n\r\n/**\r\n * Base PhotoSwipe event object\r\n *\r\n * @template {keyof PhotoSwipeEventsMap} T\r\n */\r\nclass PhotoSwipeEvent {\r\n  /**\r\n   * @param {T} type\r\n   * @param {PhotoSwipeEventsMap[T]} [details]\r\n   */\r\n  constructor(type, details) {\r\n    this.type = type;\r\n    this.defaultPrevented = false;\r\n    if (details) {\r\n      Object.assign(this, details);\r\n    }\r\n  }\r\n\r\n  preventDefault() {\r\n    this.defaultPrevented = true;\r\n  }\r\n}\r\n\r\n/**\r\n * PhotoSwipe base class that can listen and dispatch for events.\r\n * Shared by PhotoSwipe Core and PhotoSwipe Lightbox, extended by base.js\r\n */\r\nclass Eventable {\r\n  constructor() {\r\n    /**\r\n     * @type {{ [T in keyof PhotoSwipeEventsMap]?: ((event: AugmentedEvent<T>) => void)[] }}\r\n     */\r\n    this._listeners = {};\r\n\r\n    /**\r\n     * @type {{ [T in keyof PhotoSwipeFiltersMap]?: Filter<T>[] }}\r\n     */\r\n    this._filters = {};\r\n\r\n    /** @type {PhotoSwipe | undefined} */\r\n    this.pswp = undefined;\r\n\r\n    /** @type {PhotoSwipeOptions | undefined} */\r\n    this.options = undefined;\r\n  }\r\n\r\n  /**\r\n   * @template {keyof PhotoSwipeFiltersMap} T\r\n   * @param {T} name\r\n   * @param {PhotoSwipeFiltersMap[T]} fn\r\n   * @param {number} priority\r\n   */\r\n  addFilter(name, fn, priority = 100) {\r\n    if (!this._filters[name]) {\r\n      this._filters[name] = [];\r\n    }\r\n\r\n    this._filters[name]?.push({ fn, priority });\r\n    this._filters[name]?.sort((f1, f2) => f1.priority - f2.priority);\r\n\r\n    this.pswp?.addFilter(name, fn, priority);\r\n  }\r\n\r\n  /**\r\n   * @template {keyof PhotoSwipeFiltersMap} T\r\n   * @param {T} name\r\n   * @param {PhotoSwipeFiltersMap[T]} fn\r\n   */\r\n  removeFilter(name, fn) {\r\n    if (this._filters[name]) {\r\n      // @ts-expect-error\r\n      this._filters[name] = this._filters[name].filter(filter => (filter.fn !== fn));\r\n    }\r\n\r\n    if (this.pswp) {\r\n      this.pswp.removeFilter(name, fn);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @template {keyof PhotoSwipeFiltersMap} T\r\n   * @param {T} name\r\n   * @param {Parameters<PhotoSwipeFiltersMap[T]>} args\r\n   * @returns {Parameters<PhotoSwipeFiltersMap[T]>[0]}\r\n   */\r\n  applyFilters(name, ...args) {\r\n    this._filters[name]?.forEach((filter) => {\r\n      // @ts-expect-error\r\n      args[0] = filter.fn.apply(this, args);\r\n    });\r\n    return args[0];\r\n  }\r\n\r\n  /**\r\n   * @template {keyof PhotoSwipeEventsMap} T\r\n   * @param {T} name\r\n   * @param {EventCallback<T>} fn\r\n   */\r\n  on(name, fn) {\r\n    if (!this._listeners[name]) {\r\n      this._listeners[name] = [];\r\n    }\r\n    this._listeners[name]?.push(fn);\r\n\r\n    // When binding events to lightbox,\r\n    // also bind events to PhotoSwipe Core,\r\n    // if it's open.\r\n    this.pswp?.on(name, fn);\r\n  }\r\n\r\n  /**\r\n   * @template {keyof PhotoSwipeEventsMap} T\r\n   * @param {T} name\r\n   * @param {EventCallback<T>} fn\r\n   */\r\n  off(name, fn) {\r\n    if (this._listeners[name]) {\r\n      // @ts-expect-error\r\n      this._listeners[name] = this._listeners[name].filter(listener => (fn !== listener));\r\n    }\r\n\r\n    this.pswp?.off(name, fn);\r\n  }\r\n\r\n  /**\r\n   * @template {keyof PhotoSwipeEventsMap} T\r\n   * @param {T} name\r\n   * @param {PhotoSwipeEventsMap[T]} [details]\r\n   * @returns {AugmentedEvent<T>}\r\n   */\r\n  dispatch(name, details) {\r\n    if (this.pswp) {\r\n      return this.pswp.dispatch(name, details);\r\n    }\r\n\r\n    const event = /** @type {AugmentedEvent<T>} */ (new PhotoSwipeEvent(name, details));\r\n\r\n    this._listeners[name]?.forEach((listener) => {\r\n      listener.call(this, event);\r\n    });\r\n\r\n    return event;\r\n  }\r\n}\r\n\r\nexport default Eventable;\r\n", "import { createElement, setWidthHeight, toTransformString } from '../util/util.js';\r\n\r\nclass Placeholder {\r\n  /**\r\n   * @param {string | false} imageSrc\r\n   * @param {HTMLElement} container\r\n   */\r\n  constructor(imageSrc, container) {\r\n    // Create placeholder\r\n    // (stretched thumbnail or simple div behind the main image)\r\n    /** @type {HTMLImageElement | HTMLDivElement | null} */\r\n    this.element = createElement(\r\n      'pswp__img pswp__img--placeholder',\r\n      imageSrc ? 'img' : 'div',\r\n      container\r\n    );\r\n\r\n    if (imageSrc) {\r\n      const imgEl = /** @type {HTMLImageElement} */ (this.element);\r\n      imgEl.decoding = 'async';\r\n      imgEl.alt = '';\r\n      imgEl.src = imageSrc;\r\n      imgEl.setAttribute('role', 'presentation');\r\n    }\r\n\r\n    this.element.setAttribute('aria-hidden', 'true');\r\n  }\r\n\r\n  /**\r\n   * @param {number} width\r\n   * @param {number} height\r\n   */\r\n  setDisplayedSize(width, height) {\r\n    if (!this.element) {\r\n      return;\r\n    }\r\n\r\n    if (this.element.tagName === 'IMG') {\r\n      // Use transform scale() to modify img placeholder size\r\n      // (instead of changing width/height directly).\r\n      // This helps with performance, specifically in iOS15 Safari.\r\n      setWidthHeight(this.element, 250, 'auto');\r\n      this.element.style.transformOrigin = '0 0';\r\n      this.element.style.transform = toTransformString(0, 0, width / 250);\r\n    } else {\r\n      setWidthHeight(this.element, width, height);\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    if (this.element?.parentNode) {\r\n      this.element.remove();\r\n    }\r\n    this.element = null;\r\n  }\r\n}\r\n\r\nexport default Placeholder;\r\n", "import { createElement, isSafari, LOAD_STATE, setWidthHeight } from '../util/util.js';\r\nimport Placeholder from './placeholder.js';\r\n\r\n/** @typedef {import('./slide.js').default} Slide */\r\n/** @typedef {import('./slide.js').SlideData} SlideData */\r\n/** @typedef {import('../core/base.js').default} PhotoSwipeBase */\r\n/** @typedef {import('../util/util.js').LoadState} LoadState */\r\n\r\nclass Content {\r\n  /**\r\n   * @param {SlideData} itemData Slide data\r\n   * @param {PhotoSwipeBase} instance PhotoSwipe or PhotoSwipeLightbox instance\r\n   * @param {number} index\r\n   */\r\n  constructor(itemData, instance, index) {\r\n    this.instance = instance;\r\n    this.data = itemData;\r\n    this.index = index;\r\n\r\n    /** @type {HTMLImageElement | HTMLDivElement | undefined} */\r\n    this.element = undefined;\r\n    /** @type {Placeholder | undefined} */\r\n    this.placeholder = undefined;\r\n    /** @type {Slide | undefined} */\r\n    this.slide = undefined;\r\n\r\n    this.displayedImageWidth = 0;\r\n    this.displayedImageHeight = 0;\r\n\r\n    this.width = Number(this.data.w) || Number(this.data.width) || 0;\r\n    this.height = Number(this.data.h) || Number(this.data.height) || 0;\r\n\r\n    this.isAttached = false;\r\n    this.hasSlide = false;\r\n    this.isDecoding = false;\r\n    /** @type {LoadState} */\r\n    this.state = LOAD_STATE.IDLE;\r\n\r\n    if (this.data.type) {\r\n      this.type = this.data.type;\r\n    } else if (this.data.src) {\r\n      this.type = 'image';\r\n    } else {\r\n      this.type = 'html';\r\n    }\r\n\r\n    this.instance.dispatch('contentInit', { content: this });\r\n  }\r\n\r\n  removePlaceholder() {\r\n    if (this.placeholder && !this.keepPlaceholder()) {\r\n      // With delay, as image might be loaded, but not rendered\r\n      setTimeout(() => {\r\n        if (this.placeholder) {\r\n          this.placeholder.destroy();\r\n          this.placeholder = undefined;\r\n        }\r\n      }, 1000);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Preload content\r\n   *\r\n   * @param {boolean} isLazy\r\n   * @param {boolean} [reload]\r\n   */\r\n  load(isLazy, reload) {\r\n    if (this.slide && this.usePlaceholder()) {\r\n      if (!this.placeholder) {\r\n        const placeholderSrc = this.instance.applyFilters(\r\n          'placeholderSrc',\r\n          // use  image-based placeholder only for the first slide,\r\n          // as rendering (even small stretched thumbnail) is an expensive operation\r\n          (this.data.msrc && this.slide.isFirstSlide) ? this.data.msrc : false,\r\n          this\r\n        );\r\n        this.placeholder = new Placeholder(\r\n          placeholderSrc,\r\n          this.slide.container\r\n        );\r\n      } else {\r\n        const placeholderEl = this.placeholder.element;\r\n        // Add placeholder to DOM if it was already created\r\n        if (placeholderEl && !placeholderEl.parentElement) {\r\n          this.slide.container.prepend(placeholderEl);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.element && !reload) {\r\n      return;\r\n    }\r\n\r\n    if (this.instance.dispatch('contentLoad', { content: this, isLazy }).defaultPrevented) {\r\n      return;\r\n    }\r\n\r\n    if (this.isImageContent()) {\r\n      this.element = createElement('pswp__img', 'img');\r\n      // Start loading only after width is defined, as sizes might depend on it.\r\n      // Due to Safari feature, we must define sizes before srcset.\r\n      if (this.displayedImageWidth) {\r\n        this.loadImage(isLazy);\r\n      }\r\n    } else {\r\n      this.element = createElement('pswp__content', 'div');\r\n      this.element.innerHTML = this.data.html || '';\r\n    }\r\n\r\n    if (reload && this.slide) {\r\n      this.slide.updateContentSize(true);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Preload image\r\n   *\r\n   * @param {boolean} isLazy\r\n   */\r\n  loadImage(isLazy) {\r\n    if (!this.isImageContent()\r\n      || !this.element\r\n      || this.instance.dispatch('contentLoadImage', { content: this, isLazy }).defaultPrevented) {\r\n      return;\r\n    }\r\n\r\n    const imageElement = /** @type HTMLImageElement */ (this.element);\r\n\r\n    this.updateSrcsetSizes();\r\n\r\n    if (this.data.srcset) {\r\n      imageElement.srcset = this.data.srcset;\r\n    }\r\n\r\n    imageElement.src = this.data.src ?? '';\r\n    imageElement.alt = this.data.alt ?? '';\r\n\r\n    this.state = LOAD_STATE.LOADING;\r\n\r\n    if (imageElement.complete) {\r\n      this.onLoaded();\r\n    } else {\r\n      imageElement.onload = () => {\r\n        this.onLoaded();\r\n      };\r\n\r\n      imageElement.onerror = () => {\r\n        this.onError();\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Assign slide to content\r\n   *\r\n   * @param {Slide} slide\r\n   */\r\n  setSlide(slide) {\r\n    this.slide = slide;\r\n    this.hasSlide = true;\r\n    this.instance = slide.pswp;\r\n\r\n    // todo: do we need to unset slide?\r\n  }\r\n\r\n  /**\r\n   * Content load success handler\r\n   */\r\n  onLoaded() {\r\n    this.state = LOAD_STATE.LOADED;\r\n\r\n    if (this.slide && this.element) {\r\n      this.instance.dispatch('loadComplete', { slide: this.slide, content: this });\r\n\r\n      // if content is reloaded\r\n      if (this.slide.isActive\r\n          && this.slide.heavyAppended\r\n          && !this.element.parentNode) {\r\n        this.append();\r\n        this.slide.updateContentSize(true);\r\n      }\r\n\r\n      if (this.state === LOAD_STATE.LOADED || this.state === LOAD_STATE.ERROR) {\r\n        this.removePlaceholder();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Content load error handler\r\n   */\r\n  onError() {\r\n    this.state = LOAD_STATE.ERROR;\r\n\r\n    if (this.slide) {\r\n      this.displayError();\r\n      this.instance.dispatch('loadComplete', { slide: this.slide, isError: true, content: this });\r\n      this.instance.dispatch('loadError', { slide: this.slide, content: this });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @returns {Boolean} If the content is currently loading\r\n   */\r\n  isLoading() {\r\n    return this.instance.applyFilters(\r\n      'isContentLoading',\r\n      this.state === LOAD_STATE.LOADING,\r\n      this\r\n    );\r\n  }\r\n\r\n  /**\r\n   * @returns {Boolean} If the content is in error state\r\n   */\r\n  isError() {\r\n    return this.state === LOAD_STATE.ERROR;\r\n  }\r\n\r\n  /**\r\n   * @returns {boolean} If the content is image\r\n   */\r\n  isImageContent() {\r\n    return this.type === 'image';\r\n  }\r\n\r\n  /**\r\n   * Update content size\r\n   *\r\n   * @param {Number} width\r\n   * @param {Number} height\r\n   */\r\n  setDisplayedSize(width, height) {\r\n    if (!this.element) {\r\n      return;\r\n    }\r\n\r\n    if (this.placeholder) {\r\n      this.placeholder.setDisplayedSize(width, height);\r\n    }\r\n\r\n    if (this.instance.dispatch(\r\n      'contentResize',\r\n      { content: this, width, height }).defaultPrevented\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    setWidthHeight(this.element, width, height);\r\n\r\n    if (this.isImageContent() && !this.isError()) {\r\n      const isInitialSizeUpdate = (!this.displayedImageWidth && width);\r\n\r\n      this.displayedImageWidth = width;\r\n      this.displayedImageHeight = height;\r\n\r\n      if (isInitialSizeUpdate) {\r\n        this.loadImage(false);\r\n      } else {\r\n        this.updateSrcsetSizes();\r\n      }\r\n\r\n      if (this.slide) {\r\n        this.instance.dispatch(\r\n          'imageSizeChange',\r\n          { slide: this.slide, width, height, content: this }\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @returns {boolean} If the content can be zoomed\r\n   */\r\n  isZoomable() {\r\n    return this.instance.applyFilters(\r\n      'isContentZoomable',\r\n      this.isImageContent() && (this.state !== LOAD_STATE.ERROR),\r\n      this\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Update image srcset sizes attribute based on width and height\r\n   */\r\n  updateSrcsetSizes() {\r\n    // Handle srcset sizes attribute.\r\n    //\r\n    // Never lower quality, if it was increased previously.\r\n    // Chrome does this automatically, Firefox and Safari do not,\r\n    // so we store largest used size in dataset.\r\n    if (!this.isImageContent() || !this.element || !this.data.srcset) {\r\n      return;\r\n    }\r\n\r\n    const image = /** @type HTMLImageElement */ (this.element);\r\n    const sizesWidth = this.instance.applyFilters(\r\n      'srcsetSizesWidth',\r\n      this.displayedImageWidth,\r\n      this\r\n    );\r\n\r\n    if (\r\n      !image.dataset.largestUsedSize\r\n      || sizesWidth > parseInt(image.dataset.largestUsedSize, 10)\r\n    ) {\r\n      image.sizes = sizesWidth + 'px';\r\n      image.dataset.largestUsedSize = String(sizesWidth);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @returns {boolean} If content should use a placeholder (from msrc by default)\r\n   */\r\n  usePlaceholder() {\r\n    return this.instance.applyFilters(\r\n      'useContentPlaceholder',\r\n      this.isImageContent(),\r\n      this\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Preload content with lazy-loading param\r\n   */\r\n  lazyLoad() {\r\n    if (this.instance.dispatch('contentLazyLoad', { content: this }).defaultPrevented) {\r\n      return;\r\n    }\r\n\r\n    this.load(true);\r\n  }\r\n\r\n  /**\r\n   * @returns {boolean} If placeholder should be kept after content is loaded\r\n   */\r\n  keepPlaceholder() {\r\n    return this.instance.applyFilters(\r\n      'isKeepingPlaceholder',\r\n      this.isLoading(),\r\n      this\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Destroy the content\r\n   */\r\n  destroy() {\r\n    this.hasSlide = false;\r\n    this.slide = undefined;\r\n\r\n    if (this.instance.dispatch('contentDestroy', { content: this }).defaultPrevented) {\r\n      return;\r\n    }\r\n\r\n    this.remove();\r\n\r\n    if (this.placeholder) {\r\n      this.placeholder.destroy();\r\n      this.placeholder = undefined;\r\n    }\r\n\r\n    if (this.isImageContent() && this.element) {\r\n      this.element.onload = null;\r\n      this.element.onerror = null;\r\n      this.element = undefined;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Display error message\r\n   */\r\n  displayError() {\r\n    if (this.slide) {\r\n      let errorMsgEl = createElement('pswp__error-msg', 'div');\r\n      errorMsgEl.innerText = this.instance.options?.errorMsg ?? '';\r\n      errorMsgEl = /** @type {HTMLDivElement} */ (this.instance.applyFilters(\r\n        'contentErrorElement',\r\n        errorMsgEl,\r\n        this\r\n      ));\r\n      this.element = createElement('pswp__content pswp__error-msg-container', 'div');\r\n      this.element.appendChild(errorMsgEl);\r\n      this.slide.container.innerText = '';\r\n      this.slide.container.appendChild(this.element);\r\n      this.slide.updateContentSize(true);\r\n      this.removePlaceholder();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Append the content\r\n   */\r\n  append() {\r\n    if (this.isAttached || !this.element) {\r\n      return;\r\n    }\r\n\r\n    this.isAttached = true;\r\n\r\n    if (this.state === LOAD_STATE.ERROR) {\r\n      this.displayError();\r\n      return;\r\n    }\r\n\r\n    if (this.instance.dispatch('contentAppend', { content: this }).defaultPrevented) {\r\n      return;\r\n    }\r\n\r\n    const supportsDecode = ('decode' in this.element);\r\n\r\n    if (this.isImageContent()) {\r\n      // Use decode() on nearby slides\r\n      //\r\n      // Nearby slide images are in DOM and not hidden via display:none.\r\n      // However, they are placed offscreen (to the left and right side).\r\n      //\r\n      // Some browsers do not composite the image until it's actually visible,\r\n      // using decode() helps.\r\n      //\r\n      // You might ask \"why dont you just decode() and then append all images\",\r\n      // that's because I want to show image before it's fully loaded,\r\n      // as browser can render parts of image while it is loading.\r\n      // We do not do this in Safari due to partial loading bug.\r\n      if (supportsDecode && this.slide && (!this.slide.isActive || isSafari())) {\r\n        this.isDecoding = true;\r\n        // purposefully using finally instead of then,\r\n        // as if srcset sizes changes dynamically - it may cause decode error\r\n        /** @type {HTMLImageElement} */\r\n        (this.element).decode().catch(() => {}).finally(() => {\r\n          this.isDecoding = false;\r\n          this.appendImage();\r\n        });\r\n      } else {\r\n        this.appendImage();\r\n      }\r\n    } else if (this.slide && !this.element.parentNode) {\r\n      this.slide.container.appendChild(this.element);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Activate the slide,\r\n   * active slide is generally the current one,\r\n   * meaning the user can see it.\r\n   */\r\n  activate() {\r\n    if (this.instance.dispatch('contentActivate', { content: this }).defaultPrevented\r\n      || !this.slide) {\r\n      return;\r\n    }\r\n\r\n    if (this.isImageContent() && this.isDecoding && !isSafari()) {\r\n      // add image to slide when it becomes active,\r\n      // even if it's not finished decoding\r\n      this.appendImage();\r\n    } else if (this.isError()) {\r\n      this.load(false, true); // try to reload\r\n    }\r\n\r\n    if (this.slide.holderElement) {\r\n      this.slide.holderElement.setAttribute('aria-hidden', 'false');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Deactivate the content\r\n   */\r\n  deactivate() {\r\n    this.instance.dispatch('contentDeactivate', { content: this });\r\n    if (this.slide && this.slide.holderElement) {\r\n      this.slide.holderElement.setAttribute('aria-hidden', 'true');\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Remove the content from DOM\r\n   */\r\n  remove() {\r\n    this.isAttached = false;\r\n\r\n    if (this.instance.dispatch('contentRemove', { content: this }).defaultPrevented) {\r\n      return;\r\n    }\r\n\r\n    if (this.element && this.element.parentNode) {\r\n      this.element.remove();\r\n    }\r\n\r\n    if (this.placeholder && this.placeholder.element) {\r\n      this.placeholder.element.remove();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Append the image content to slide container\r\n   */\r\n  appendImage() {\r\n    if (!this.isAttached) {\r\n      return;\r\n    }\r\n\r\n    if (this.instance.dispatch('contentAppendImage', { content: this }).defaultPrevented) {\r\n      return;\r\n    }\r\n\r\n    // ensure that element exists and is not already appended\r\n    if (this.slide && this.element && !this.element.parentNode) {\r\n      this.slide.container.appendChild(this.element);\r\n    }\r\n\r\n    if (this.state === LOAD_STATE.LOADED || this.state === LOAD_STATE.ERROR) {\r\n      this.removePlaceholder();\r\n    }\r\n  }\r\n}\r\n\r\nexport default Content;\r\n", "import { getViewportSize, getPanAreaSize } from '../util/viewport-size.js';\r\nimport ZoomLevel from './zoom-level.js';\r\n\r\n/** @typedef {import('./content.js').default} Content */\r\n/** @typedef {import('./slide.js').default} Slide */\r\n/** @typedef {import('./slide.js').SlideData} SlideData */\r\n/** @typedef {import('../core/base.js').default} PhotoSwipeBase */\r\n/** @typedef {import('../photoswipe.js').default} PhotoSwipe */\r\n\r\nconst MIN_SLIDES_TO_CACHE = 5;\r\n\r\n/**\r\n * Lazy-load an image\r\n * This function is used both by Lightbox and PhotoSwipe core,\r\n * thus it can be called before dialog is opened.\r\n *\r\n * @param {SlideData} itemData Data about the slide\r\n * @param {PhotoSwipeBase} instance PhotoSwipe or PhotoSwipeLightbox instance\r\n * @param {number} index\r\n * @returns {Content} Image that is being decoded or false.\r\n */\r\nexport function lazyLoadData(itemData, instance, index) {\r\n  const content = instance.createContentFromData(itemData, index);\r\n  /** @type {ZoomLevel | undefined} */\r\n  let zoomLevel;\r\n\r\n  const { options } = instance;\r\n\r\n  // We need to know dimensions of the image to preload it,\r\n  // as it might use srcset, and we need to define sizes\r\n  if (options) {\r\n    zoomLevel = new ZoomLevel(options, itemData, -1);\r\n\r\n    let viewportSize;\r\n    if (instance.pswp) {\r\n      viewportSize = instance.pswp.viewportSize;\r\n    } else {\r\n      viewportSize = getViewportSize(options, instance);\r\n    }\r\n\r\n    const panAreaSize = getPanAreaSize(options, viewportSize, itemData, index);\r\n    zoomLevel.update(content.width, content.height, panAreaSize);\r\n  }\r\n\r\n  content.lazyLoad();\r\n\r\n  if (zoomLevel) {\r\n    content.setDisplayedSize(\r\n      Math.ceil(content.width * zoomLevel.initial),\r\n      Math.ceil(content.height * zoomLevel.initial)\r\n    );\r\n  }\r\n\r\n  return content;\r\n}\r\n\r\n\r\n/**\r\n * Lazy-loads specific slide.\r\n * This function is used both by Lightbox and PhotoSwipe core,\r\n * thus it can be called before dialog is opened.\r\n *\r\n * By default, it loads image based on viewport size and initial zoom level.\r\n *\r\n * @param {number} index Slide index\r\n * @param {PhotoSwipeBase} instance PhotoSwipe or PhotoSwipeLightbox eventable instance\r\n * @returns {Content | undefined}\r\n */\r\nexport function lazyLoadSlide(index, instance) {\r\n  const itemData = instance.getItemData(index);\r\n\r\n  if (instance.dispatch('lazyLoadSlide', { index, itemData }).defaultPrevented) {\r\n    return;\r\n  }\r\n\r\n  return lazyLoadData(itemData, instance, index);\r\n}\r\n\r\nclass ContentLoader {\r\n  /**\r\n   * @param {PhotoSwipe} pswp\r\n   */\r\n  constructor(pswp) {\r\n    this.pswp = pswp;\r\n    // Total amount of cached images\r\n    this.limit = Math.max(\r\n      pswp.options.preload[0] + pswp.options.preload[1] + 1,\r\n      MIN_SLIDES_TO_CACHE\r\n    );\r\n    /** @type {Content[]} */\r\n    this._cachedItems = [];\r\n  }\r\n\r\n  /**\r\n   * Lazy load nearby slides based on `preload` option.\r\n   *\r\n   * @param {number} [diff] Difference between slide indexes that was changed recently, or 0.\r\n   */\r\n  updateLazy(diff) {\r\n    const { pswp } = this;\r\n\r\n    if (pswp.dispatch('lazyLoad').defaultPrevented) {\r\n      return;\r\n    }\r\n\r\n    const { preload } = pswp.options;\r\n    const isForward = diff === undefined ? true : (diff >= 0);\r\n    let i;\r\n\r\n    // preload[1] - num items to preload in forward direction\r\n    for (i = 0; i <= preload[1]; i++) {\r\n      this.loadSlideByIndex(pswp.currIndex + (isForward ? i : (-i)));\r\n    }\r\n\r\n    // preload[0] - num items to preload in backward direction\r\n    for (i = 1; i <= preload[0]; i++) {\r\n      this.loadSlideByIndex(pswp.currIndex + (isForward ? (-i) : i));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {number} initialIndex\r\n   */\r\n  loadSlideByIndex(initialIndex) {\r\n    const index = this.pswp.getLoopedIndex(initialIndex);\r\n    // try to get cached content\r\n    let content = this.getContentByIndex(index);\r\n    if (!content) {\r\n      // no cached content, so try to load from scratch:\r\n      content = lazyLoadSlide(index, this.pswp);\r\n      // if content can be loaded, add it to cache:\r\n      if (content) {\r\n        this.addToCache(content);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {Slide} slide\r\n   * @returns {Content}\r\n   */\r\n  getContentBySlide(slide) {\r\n    let content = this.getContentByIndex(slide.index);\r\n    if (!content) {\r\n      // create content if not found in cache\r\n      content = this.pswp.createContentFromData(slide.data, slide.index);\r\n      this.addToCache(content);\r\n    }\r\n\r\n    // assign slide to content\r\n    content.setSlide(slide);\r\n\r\n    return content;\r\n  }\r\n\r\n  /**\r\n   * @param {Content} content\r\n   */\r\n  addToCache(content) {\r\n    // move to the end of array\r\n    this.removeByIndex(content.index);\r\n    this._cachedItems.push(content);\r\n\r\n    if (this._cachedItems.length > this.limit) {\r\n      // Destroy the first content that's not attached\r\n      const indexToRemove = this._cachedItems.findIndex((item) => {\r\n        return !item.isAttached && !item.hasSlide;\r\n      });\r\n      if (indexToRemove !== -1) {\r\n        const removedItem = this._cachedItems.splice(indexToRemove, 1)[0];\r\n        removedItem.destroy();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Removes an image from cache, does not destroy() it, just removes.\r\n   *\r\n   * @param {number} index\r\n   */\r\n  removeByIndex(index) {\r\n    const indexToRemove = this._cachedItems.findIndex(item => item.index === index);\r\n    if (indexToRemove !== -1) {\r\n      this._cachedItems.splice(indexToRemove, 1);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {number} index\r\n   * @returns {Content | undefined}\r\n   */\r\n  getContentByIndex(index) {\r\n    return this._cachedItems.find(content => content.index === index);\r\n  }\r\n\r\n  destroy() {\r\n    this._cachedItems.forEach(content => content.destroy());\r\n    this._cachedItems = [];\r\n  }\r\n}\r\n\r\nexport default ContentLoader;\r\n", "import Eventable from './eventable.js';\r\nimport { getElementsFromOption } from '../util/util.js';\r\nimport Content from '../slide/content.js';\r\nimport { lazyLoadData } from '../slide/loader.js';\r\n\r\n/** @typedef {import(\"../photoswipe.js\").default} PhotoSwipe */\r\n/** @typedef {import(\"../slide/slide.js\").SlideData} SlideData */\r\n\r\n/**\r\n * PhotoSwipe base class that can retrieve data about every slide.\r\n * Shared by PhotoSwipe Core and PhotoSwipe Lightbox\r\n */\r\nclass PhotoSwipeBase extends Eventable {\r\n  /**\r\n   * Get total number of slides\r\n   *\r\n   * @returns {number}\r\n   */\r\n  getNumItems() {\r\n    let numItems = 0;\r\n    const dataSource = this.options?.dataSource;\r\n\r\n    if (dataSource && 'length' in dataSource) {\r\n      // may be an array or just object with length property\r\n      numItems = dataSource.length;\r\n    } else if (dataSource && 'gallery' in dataSource) {\r\n      // query DOM elements\r\n      if (!dataSource.items) {\r\n        dataSource.items = this._getGalleryDOMElements(dataSource.gallery);\r\n      }\r\n\r\n      if (dataSource.items) {\r\n        numItems = dataSource.items.length;\r\n      }\r\n    }\r\n\r\n    // legacy event, before filters were introduced\r\n    const event = this.dispatch('numItems', {\r\n      dataSource,\r\n      numItems\r\n    });\r\n    return this.applyFilters('numItems', event.numItems, dataSource);\r\n  }\r\n\r\n  /**\r\n   * @param {SlideData} slideData\r\n   * @param {number} index\r\n   * @returns {Content}\r\n   */\r\n  createContentFromData(slideData, index) {\r\n    return new Content(slideData, this, index);\r\n  }\r\n\r\n  /**\r\n   * Get item data by index.\r\n   *\r\n   * \"item data\" should contain normalized information that PhotoSwipe needs to generate a slide.\r\n   * For example, it may contain properties like\r\n   * `src`, `srcset`, `w`, `h`, which will be used to generate a slide with image.\r\n   *\r\n   * @param {number} index\r\n   * @returns {SlideData}\r\n   */\r\n  getItemData(index) {\r\n    const dataSource = this.options?.dataSource;\r\n    /** @type {SlideData | HTMLElement} */\r\n    let dataSourceItem = {};\r\n    if (Array.isArray(dataSource)) {\r\n      // Datasource is an array of elements\r\n      dataSourceItem = dataSource[index];\r\n    } else if (dataSource && 'gallery' in dataSource) {\r\n      // dataSource has gallery property,\r\n      // thus it was created by Lightbox, based on\r\n      // gallery and children options\r\n\r\n      // query DOM elements\r\n      if (!dataSource.items) {\r\n        dataSource.items = this._getGalleryDOMElements(dataSource.gallery);\r\n      }\r\n\r\n      dataSourceItem = dataSource.items[index];\r\n    }\r\n\r\n    let itemData = dataSourceItem;\r\n\r\n    if (itemData instanceof Element) {\r\n      itemData = this._domElementToItemData(itemData);\r\n    }\r\n\r\n    // Dispatching the itemData event,\r\n    // it's a legacy verion before filters were introduced\r\n    const event = this.dispatch('itemData', {\r\n      itemData: itemData || {},\r\n      index\r\n    });\r\n\r\n    return this.applyFilters('itemData', event.itemData, index);\r\n  }\r\n\r\n  /**\r\n   * Get array of gallery DOM elements,\r\n   * based on childSelector and gallery element.\r\n   *\r\n   * @param {HTMLElement} galleryElement\r\n   * @returns {HTMLElement[]}\r\n   */\r\n  _getGalleryDOMElements(galleryElement) {\r\n    if (this.options?.children || this.options?.childSelector) {\r\n      return getElementsFromOption(\r\n        this.options.children,\r\n        this.options.childSelector,\r\n        galleryElement\r\n      ) || [];\r\n    }\r\n\r\n    return [galleryElement];\r\n  }\r\n\r\n  /**\r\n   * Converts DOM element to item data object.\r\n   *\r\n   * @param {HTMLElement} element DOM element\r\n   * @returns {SlideData}\r\n   */\r\n  _domElementToItemData(element) {\r\n    /** @type {SlideData} */\r\n    const itemData = {\r\n      element\r\n    };\r\n\r\n    const linkEl = /** @type {HTMLAnchorElement} */ (\r\n      element.tagName === 'A'\r\n        ? element\r\n        : element.querySelector('a')\r\n    );\r\n\r\n    if (linkEl) {\r\n      // src comes from data-pswp-src attribute,\r\n      // if it's empty link href is used\r\n      itemData.src = linkEl.dataset.pswpSrc || linkEl.href;\r\n\r\n      if (linkEl.dataset.pswpSrcset) {\r\n        itemData.srcset = linkEl.dataset.pswpSrcset;\r\n      }\r\n\r\n      itemData.width = linkEl.dataset.pswpWidth ? parseInt(linkEl.dataset.pswpWidth, 10) : 0;\r\n      itemData.height = linkEl.dataset.pswpHeight ? parseInt(linkEl.dataset.pswpHeight, 10) : 0;\r\n\r\n      // support legacy w & h properties\r\n      itemData.w = itemData.width;\r\n      itemData.h = itemData.height;\r\n\r\n      if (linkEl.dataset.pswpType) {\r\n        itemData.type = linkEl.dataset.pswpType;\r\n      }\r\n\r\n      const thumbnailEl = element.querySelector('img');\r\n\r\n      if (thumbnailEl) {\r\n        // msrc is URL to placeholder image that's displayed before large image is loaded\r\n        // by default it's displayed only for the first slide\r\n        itemData.msrc = thumbnailEl.currentSrc || thumbnailEl.src;\r\n        itemData.alt = thumbnailEl.getAttribute('alt') ?? '';\r\n      }\r\n\r\n      if (linkEl.dataset.pswpCropped || linkEl.dataset.cropped) {\r\n        itemData.thumbCropped = true;\r\n      }\r\n    }\r\n\r\n    return this.applyFilters('domItemData', itemData, element, linkEl);\r\n  }\r\n\r\n  /**\r\n   * Lazy-load by slide data\r\n   *\r\n   * @param {SlideData} itemData Data about the slide\r\n   * @param {number} index\r\n   * @returns {Content} Image that is being decoded or false.\r\n   */\r\n  lazyLoadData(itemData, index) {\r\n    return lazyLoadData(itemData, this, index);\r\n  }\r\n}\r\n\r\nexport default PhotoSwipeBase;\r\n", "import {\r\n  setTransform,\r\n  equalizePoints,\r\n  decodeImage,\r\n  toTransformString\r\n} from './util/util.js';\r\n\r\n/** @typedef {import('./photoswipe.js').default} PhotoSwipe */\r\n/** @typedef {import('./slide/get-thumb-bounds.js').Bounds} Bounds */\r\n/** @typedef {import('./util/animations.js').AnimationProps} AnimationProps */\r\n\r\n// some browsers do not paint\r\n// elements which opacity is set to 0,\r\n// since we need to pre-render elements for the animation -\r\n// we set it to the minimum amount\r\nconst MIN_OPACITY = 0.003;\r\n\r\n/**\r\n * Manages opening and closing transitions of the PhotoSwipe.\r\n *\r\n * It can perform zoom, fade or no transition.\r\n */\r\nclass Opener {\r\n  /**\r\n   * @param {PhotoSwipe} pswp\r\n   */\r\n  constructor(pswp) {\r\n    this.pswp = pswp;\r\n    this.isClosed = true;\r\n    this.isOpen = false;\r\n    this.isClosing = false;\r\n    this.isOpening = false;\r\n    /**\r\n     * @private\r\n     * @type {number | false | undefined}\r\n     */\r\n    this._duration = undefined;\r\n    /** @private */\r\n    this._useAnimation = false;\r\n    /** @private */\r\n    this._croppedZoom = false;\r\n    /** @private */\r\n    this._animateRootOpacity = false;\r\n    /** @private */\r\n    this._animateBgOpacity = false;\r\n    /**\r\n     * @private\r\n     * @type { HTMLDivElement | HTMLImageElement | null | undefined }\r\n     */\r\n    this._placeholder = undefined;\r\n    /**\r\n     * @private\r\n     * @type { HTMLDivElement | undefined }\r\n     */\r\n    this._opacityElement = undefined;\r\n    /**\r\n     * @private\r\n     * @type { HTMLDivElement | undefined }\r\n     */\r\n    this._cropContainer1 = undefined;\r\n    /**\r\n     * @private\r\n     * @type { HTMLElement | null | undefined }\r\n     */\r\n    this._cropContainer2 = undefined;\r\n\r\n    /**\r\n     * @private\r\n     * @type {Bounds | undefined}\r\n     */\r\n    this._thumbBounds = undefined;\r\n\r\n\r\n    this._prepareOpen = this._prepareOpen.bind(this);\r\n\r\n    // Override initial zoom and pan position\r\n    pswp.on('firstZoomPan', this._prepareOpen);\r\n  }\r\n\r\n  open() {\r\n    this._prepareOpen();\r\n    this._start();\r\n  }\r\n\r\n  close() {\r\n    if (this.isClosed || this.isClosing || this.isOpening) {\r\n      // if we close during opening animation\r\n      // for now do nothing,\r\n      // browsers aren't good at changing the direction of the CSS transition\r\n      return;\r\n    }\r\n\r\n    const slide = this.pswp.currSlide;\r\n\r\n    this.isOpen = false;\r\n    this.isOpening = false;\r\n    this.isClosing = true;\r\n    this._duration = this.pswp.options.hideAnimationDuration;\r\n\r\n    if (slide && slide.currZoomLevel * slide.width >= this.pswp.options.maxWidthToAnimate) {\r\n      this._duration = 0;\r\n    }\r\n\r\n    this._applyStartProps();\r\n    setTimeout(() => {\r\n      this._start();\r\n    }, this._croppedZoom ? 30 : 0);\r\n  }\r\n\r\n  /** @private */\r\n  _prepareOpen() {\r\n    this.pswp.off('firstZoomPan', this._prepareOpen);\r\n    if (!this.isOpening) {\r\n      const slide = this.pswp.currSlide;\r\n      this.isOpening = true;\r\n      this.isClosing = false;\r\n      this._duration = this.pswp.options.showAnimationDuration;\r\n      if (slide && slide.zoomLevels.initial * slide.width >= this.pswp.options.maxWidthToAnimate) {\r\n        this._duration = 0;\r\n      }\r\n      this._applyStartProps();\r\n    }\r\n  }\r\n\r\n  /** @private */\r\n  _applyStartProps() {\r\n    const { pswp } = this;\r\n    const slide = this.pswp.currSlide;\r\n    const { options } = pswp;\r\n\r\n    if (options.showHideAnimationType === 'fade') {\r\n      options.showHideOpacity = true;\r\n      this._thumbBounds = undefined;\r\n    } else if (options.showHideAnimationType === 'none') {\r\n      options.showHideOpacity = false;\r\n      this._duration = 0;\r\n      this._thumbBounds = undefined;\r\n    } else if (this.isOpening && pswp._initialThumbBounds) {\r\n      // Use initial bounds if defined\r\n      this._thumbBounds = pswp._initialThumbBounds;\r\n    } else {\r\n      this._thumbBounds = this.pswp.getThumbBounds();\r\n    }\r\n\r\n    this._placeholder = slide?.getPlaceholderElement();\r\n\r\n    pswp.animations.stopAll();\r\n\r\n    // Discard animations when duration is less than 50ms\r\n    this._useAnimation = Boolean(this._duration && this._duration > 50);\r\n    this._animateZoom = Boolean(this._thumbBounds)\r\n                        && slide?.content.usePlaceholder()\r\n                        && (!this.isClosing || !pswp.mainScroll.isShifted());\r\n    if (!this._animateZoom) {\r\n      this._animateRootOpacity = true;\r\n\r\n      if (this.isOpening && slide) {\r\n        slide.zoomAndPanToInitial();\r\n        slide.applyCurrentZoomPan();\r\n      }\r\n    } else {\r\n      this._animateRootOpacity = options.showHideOpacity ?? false;\r\n    }\r\n    this._animateBgOpacity = !this._animateRootOpacity && this.pswp.options.bgOpacity > MIN_OPACITY;\r\n    this._opacityElement = this._animateRootOpacity ? pswp.element : pswp.bg;\r\n\r\n    if (!this._useAnimation) {\r\n      this._duration = 0;\r\n      this._animateZoom = false;\r\n      this._animateBgOpacity = false;\r\n      this._animateRootOpacity = true;\r\n      if (this.isOpening) {\r\n        if (pswp.element) {\r\n          pswp.element.style.opacity = String(MIN_OPACITY);\r\n        }\r\n        pswp.applyBgOpacity(1);\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (this._animateZoom && this._thumbBounds && this._thumbBounds.innerRect) {\r\n      // Properties are used when animation from cropped thumbnail\r\n      this._croppedZoom = true;\r\n      this._cropContainer1 = this.pswp.container;\r\n      this._cropContainer2 = this.pswp.currSlide?.holderElement;\r\n\r\n      if (pswp.container) {\r\n        pswp.container.style.overflow = 'hidden';\r\n        pswp.container.style.width = pswp.viewportSize.x + 'px';\r\n      }\r\n    } else {\r\n      this._croppedZoom = false;\r\n    }\r\n\r\n    if (this.isOpening) {\r\n      // Apply styles before opening transition\r\n      if (this._animateRootOpacity) {\r\n        if (pswp.element) {\r\n          pswp.element.style.opacity = String(MIN_OPACITY);\r\n        }\r\n        pswp.applyBgOpacity(1);\r\n      } else {\r\n        if (this._animateBgOpacity && pswp.bg) {\r\n          pswp.bg.style.opacity = String(MIN_OPACITY);\r\n        }\r\n        if (pswp.element) {\r\n          pswp.element.style.opacity = '1';\r\n        }\r\n      }\r\n\r\n      if (this._animateZoom) {\r\n        this._setClosedStateZoomPan();\r\n        if (this._placeholder) {\r\n          // tell browser that we plan to animate the placeholder\r\n          this._placeholder.style.willChange = 'transform';\r\n\r\n          // hide placeholder to allow hiding of\r\n          // elements that overlap it (such as icons over the thumbnail)\r\n          this._placeholder.style.opacity = String(MIN_OPACITY);\r\n        }\r\n      }\r\n    } else if (this.isClosing) {\r\n      // hide nearby slides to make sure that\r\n      // they are not painted during the transition\r\n      if (pswp.mainScroll.itemHolders[0]) {\r\n        pswp.mainScroll.itemHolders[0].el.style.display = 'none';\r\n      }\r\n      if (pswp.mainScroll.itemHolders[2]) {\r\n        pswp.mainScroll.itemHolders[2].el.style.display = 'none';\r\n      }\r\n\r\n      if (this._croppedZoom) {\r\n        if (pswp.mainScroll.x !== 0) {\r\n          // shift the main scroller to zero position\r\n          pswp.mainScroll.resetPosition();\r\n          pswp.mainScroll.resize();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /** @private */\r\n  _start() {\r\n    if (this.isOpening\r\n        && this._useAnimation\r\n        && this._placeholder\r\n        && this._placeholder.tagName === 'IMG') {\r\n      // To ensure smooth animation\r\n      // we wait till the current slide image placeholder is decoded,\r\n      // but no longer than 250ms,\r\n      // and no shorter than 50ms\r\n      // (just using requestanimationframe is not enough in Firefox,\r\n      // for some reason)\r\n      new Promise((resolve) => {\r\n        let decoded = false;\r\n        let isDelaying = true;\r\n        decodeImage(/** @type {HTMLImageElement} */ (this._placeholder)).finally(() => {\r\n          decoded = true;\r\n          if (!isDelaying) {\r\n            resolve(true);\r\n          }\r\n        });\r\n        setTimeout(() => {\r\n          isDelaying = false;\r\n          if (decoded) {\r\n            resolve(true);\r\n          }\r\n        }, 50);\r\n        setTimeout(resolve, 250);\r\n      }).finally(() => this._initiate());\r\n    } else {\r\n      this._initiate();\r\n    }\r\n  }\r\n\r\n  /** @private */\r\n  _initiate() {\r\n    this.pswp.element?.style.setProperty('--pswp-transition-duration', this._duration + 'ms');\r\n\r\n    this.pswp.dispatch(\r\n      this.isOpening ? 'openingAnimationStart' : 'closingAnimationStart'\r\n    );\r\n\r\n    // legacy event\r\n    this.pswp.dispatch(\r\n      /** @type {'initialZoomIn' | 'initialZoomOut'} */\r\n      ('initialZoom' + (this.isOpening ? 'In' : 'Out'))\r\n    );\r\n\r\n    this.pswp.element?.classList.toggle('pswp--ui-visible', this.isOpening);\r\n\r\n    if (this.isOpening) {\r\n      if (this._placeholder) {\r\n        // unhide the placeholder\r\n        this._placeholder.style.opacity = '1';\r\n      }\r\n      this._animateToOpenState();\r\n    } else if (this.isClosing) {\r\n      this._animateToClosedState();\r\n    }\r\n\r\n    if (!this._useAnimation) {\r\n      this._onAnimationComplete();\r\n    }\r\n  }\r\n\r\n  /** @private */\r\n  _onAnimationComplete() {\r\n    const { pswp } = this;\r\n    this.isOpen = this.isOpening;\r\n    this.isClosed = this.isClosing;\r\n    this.isOpening = false;\r\n    this.isClosing = false;\r\n\r\n    pswp.dispatch(\r\n      this.isOpen ? 'openingAnimationEnd' : 'closingAnimationEnd'\r\n    );\r\n\r\n    // legacy event\r\n    pswp.dispatch(\r\n      /** @type {'initialZoomInEnd' | 'initialZoomOutEnd'} */\r\n      ('initialZoom' + (this.isOpen ? 'InEnd' : 'OutEnd'))\r\n    );\r\n\r\n    if (this.isClosed) {\r\n      pswp.destroy();\r\n    } else if (this.isOpen) {\r\n      if (this._animateZoom && pswp.container) {\r\n        pswp.container.style.overflow = 'visible';\r\n        pswp.container.style.width = '100%';\r\n      }\r\n      pswp.currSlide?.applyCurrentZoomPan();\r\n    }\r\n  }\r\n\r\n  /** @private */\r\n  _animateToOpenState() {\r\n    const { pswp } = this;\r\n    if (this._animateZoom) {\r\n      if (this._croppedZoom && this._cropContainer1 && this._cropContainer2) {\r\n        this._animateTo(this._cropContainer1, 'transform', 'translate3d(0,0,0)');\r\n        this._animateTo(this._cropContainer2, 'transform', 'none');\r\n      }\r\n\r\n      if (pswp.currSlide) {\r\n        pswp.currSlide.zoomAndPanToInitial();\r\n        this._animateTo(\r\n          pswp.currSlide.container,\r\n          'transform',\r\n          pswp.currSlide.getCurrentTransform()\r\n        );\r\n      }\r\n    }\r\n\r\n    if (this._animateBgOpacity && pswp.bg) {\r\n      this._animateTo(pswp.bg, 'opacity', String(pswp.options.bgOpacity));\r\n    }\r\n\r\n    if (this._animateRootOpacity && pswp.element) {\r\n      this._animateTo(pswp.element, 'opacity', '1');\r\n    }\r\n  }\r\n\r\n  /** @private */\r\n  _animateToClosedState() {\r\n    const { pswp } = this;\r\n\r\n    if (this._animateZoom) {\r\n      this._setClosedStateZoomPan(true);\r\n    }\r\n\r\n    // do not animate opacity if it's already at 0\r\n    if (this._animateBgOpacity && pswp.bgOpacity > 0.01 && pswp.bg) {\r\n      this._animateTo(pswp.bg, 'opacity', '0');\r\n    }\r\n\r\n    if (this._animateRootOpacity && pswp.element) {\r\n      this._animateTo(pswp.element, 'opacity', '0');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * @param {boolean} [animate]\r\n   */\r\n  _setClosedStateZoomPan(animate) {\r\n    if (!this._thumbBounds) return;\r\n\r\n    const { pswp } = this;\r\n    const { innerRect } = this._thumbBounds;\r\n    const { currSlide, viewportSize } = pswp;\r\n\r\n    if (this._croppedZoom && innerRect && this._cropContainer1 && this._cropContainer2) {\r\n      const containerOnePanX = -viewportSize.x + (this._thumbBounds.x - innerRect.x) + innerRect.w;\r\n      const containerOnePanY = -viewportSize.y + (this._thumbBounds.y - innerRect.y) + innerRect.h;\r\n      const containerTwoPanX = viewportSize.x - innerRect.w;\r\n      const containerTwoPanY = viewportSize.y - innerRect.h;\r\n\r\n\r\n      if (animate) {\r\n        this._animateTo(\r\n          this._cropContainer1,\r\n          'transform',\r\n          toTransformString(containerOnePanX, containerOnePanY)\r\n        );\r\n\r\n        this._animateTo(\r\n          this._cropContainer2,\r\n          'transform',\r\n          toTransformString(containerTwoPanX, containerTwoPanY)\r\n        );\r\n      } else {\r\n        setTransform(this._cropContainer1, containerOnePanX, containerOnePanY);\r\n        setTransform(this._cropContainer2, containerTwoPanX, containerTwoPanY);\r\n      }\r\n    }\r\n\r\n    if (currSlide) {\r\n      equalizePoints(currSlide.pan, innerRect || this._thumbBounds);\r\n      currSlide.currZoomLevel = this._thumbBounds.w / currSlide.width;\r\n      if (animate) {\r\n        this._animateTo(currSlide.container, 'transform', currSlide.getCurrentTransform());\r\n      } else {\r\n        currSlide.applyCurrentZoomPan();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * @param {HTMLElement} target\r\n   * @param {'transform' | 'opacity'} prop\r\n   * @param {string} propValue\r\n   */\r\n  _animateTo(target, prop, propValue) {\r\n    if (!this._duration) {\r\n      target.style[prop] = propValue;\r\n      return;\r\n    }\r\n\r\n    const { animations } = this.pswp;\r\n    /** @type {AnimationProps} */\r\n    const animProps = {\r\n      duration: this._duration,\r\n      easing: this.pswp.options.easing,\r\n      onComplete: () => {\r\n        if (!animations.activeAnimations.length) {\r\n          this._onAnimationComplete();\r\n        }\r\n      },\r\n      target,\r\n    };\r\n    animProps[prop] = propValue;\r\n    animations.startTransition(animProps);\r\n  }\r\n}\r\n\r\nexport default Opener;\r\n", "import {\r\n  createElement,\r\n  equalizePoints,\r\n  pointsEqual,\r\n  clamp,\r\n} from './util/util.js';\r\n\r\nimport DOMEvents from './util/dom-events.js';\r\nimport Slide from './slide/slide.js';\r\nimport Gestures from './gestures/gestures.js';\r\nimport MainScroll from './main-scroll.js';\r\n\r\nimport Keyboard from './keyboard.js';\r\nimport Animations from './util/animations.js';\r\nimport ScrollWheel from './scroll-wheel.js';\r\nimport UI from './ui/ui.js';\r\nimport { getViewportSize } from './util/viewport-size.js';\r\nimport { getThumbBounds } from './slide/get-thumb-bounds.js';\r\nimport PhotoSwipeBase from './core/base.js';\r\nimport Opener from './opener.js';\r\nimport ContentLoader from './slide/loader.js';\r\n\r\n/**\r\n * @template T\r\n * @typedef {import('./types.js').Type<T>} Type<T>\r\n */\r\n\r\n/** @typedef {import('./slide/slide.js').SlideData} SlideData */\r\n/** @typedef {import('./slide/zoom-level.js').ZoomLevelOption} ZoomLevelOption */\r\n/** @typedef {import('./ui/ui-element.js').UIElementData} UIElementData */\r\n/** @typedef {import('./main-scroll.js').ItemHolder} ItemHolder */\r\n/** @typedef {import('./core/eventable.js').PhotoSwipeEventsMap} PhotoSwipeEventsMap */\r\n/** @typedef {import('./core/eventable.js').PhotoSwipeFiltersMap} PhotoSwipeFiltersMap */\r\n/** @typedef {import('./slide/get-thumb-bounds').Bounds} Bounds */\r\n/**\r\n * @template {keyof PhotoSwipeEventsMap} T\r\n * @typedef {import('./core/eventable.js').EventCallback<T>} EventCallback<T>\r\n */\r\n/**\r\n * @template {keyof PhotoSwipeEventsMap} T\r\n * @typedef {import('./core/eventable.js').AugmentedEvent<T>} AugmentedEvent<T>\r\n */\r\n\r\n/** @typedef {{ x: number; y: number; id?: string | number }} Point */\r\n/** @typedef {{ top: number; bottom: number; left: number; right: number }} Padding */\r\n/** @typedef {SlideData[]} DataSourceArray */\r\n/** @typedef {{ gallery: HTMLElement; items?: HTMLElement[] }} DataSourceObject */\r\n/** @typedef {DataSourceArray | DataSourceObject} DataSource */\r\n/** @typedef {(point: Point, originalEvent: PointerEvent) => void} ActionFn */\r\n/** @typedef {'close' | 'next' | 'zoom' | 'zoom-or-close' | 'toggle-controls'} ActionType */\r\n/** @typedef {Type<PhotoSwipe> | { default: Type<PhotoSwipe> }} PhotoSwipeModule */\r\n/** @typedef {PhotoSwipeModule | Promise<PhotoSwipeModule> | (() => Promise<PhotoSwipeModule>)} PhotoSwipeModuleOption */\r\n\r\n/**\r\n * @typedef {string | NodeListOf<HTMLElement> | HTMLElement[] | HTMLElement} ElementProvider\r\n */\r\n\r\n/** @typedef {Partial<PreparedPhotoSwipeOptions>} PhotoSwipeOptions https://photoswipe.com/options/ */\r\n/**\r\n * @typedef {Object} PreparedPhotoSwipeOptions\r\n *\r\n * @prop {DataSource} [dataSource]\r\n * Pass an array of any items via dataSource option. Its length will determine amount of slides\r\n * (which may be modified further from numItems event).\r\n *\r\n * Each item should contain data that you need to generate slide\r\n * (for image slide it would be src (image URL), width (image width), height, srcset, alt).\r\n *\r\n * If these properties are not present in your initial array, you may \"pre-parse\" each item from itemData filter.\r\n *\r\n * @prop {number} bgOpacity\r\n * Background backdrop opacity, always define it via this option and not via CSS rgba color.\r\n *\r\n * @prop {number} spacing\r\n * Spacing between slides. Defined as ratio relative to the viewport width (0.1 = 10% of viewport).\r\n *\r\n * @prop {boolean} allowPanToNext\r\n * Allow swipe navigation to the next slide when the current slide is zoomed. Does not apply to mouse events.\r\n *\r\n * @prop {boolean} loop\r\n * If set to true you'll be able to swipe from the last to the first image.\r\n * Option is always false when there are less than 3 slides.\r\n *\r\n * @prop {boolean} [wheelToZoom]\r\n * By default PhotoSwipe zooms image with ctrl-wheel, if you enable this option - image will zoom just via wheel.\r\n *\r\n * @prop {boolean} pinchToClose\r\n * Pinch touch gesture to close the gallery.\r\n *\r\n * @prop {boolean} closeOnVerticalDrag\r\n * Vertical drag gesture to close the PhotoSwipe.\r\n *\r\n * @prop {Padding} [padding]\r\n * Slide area padding (in pixels).\r\n *\r\n * @prop {(viewportSize: Point, itemData: SlideData, index: number) => Padding} [paddingFn]\r\n * The option is checked frequently, so make sure it's performant. Overrides padding option if defined. For example:\r\n *\r\n * @prop {number | false} hideAnimationDuration\r\n * Transition duration in milliseconds, can be 0.\r\n *\r\n * @prop {number | false} showAnimationDuration\r\n * Transition duration in milliseconds, can be 0.\r\n *\r\n * @prop {number | false} zoomAnimationDuration\r\n * Transition duration in milliseconds, can be 0.\r\n *\r\n * @prop {string} easing\r\n * String, 'cubic-bezier(.4,0,.22,1)'. CSS easing function for open/close/zoom transitions.\r\n *\r\n * @prop {boolean} escKey\r\n * Esc key to close.\r\n *\r\n * @prop {boolean} arrowKeys\r\n * Left/right arrow keys for navigation.\r\n *\r\n * @prop {boolean} trapFocus\r\n * Trap focus within PhotoSwipe element while it's open.\r\n *\r\n * @prop {boolean} returnFocus\r\n * Restore focus the last active element after PhotoSwipe is closed.\r\n *\r\n * @prop {boolean} clickToCloseNonZoomable\r\n * If image is not zoomable (for example, smaller than viewport) it can be closed by clicking on it.\r\n *\r\n * @prop {ActionType | ActionFn | false} imageClickAction\r\n * Refer to click and tap actions page.\r\n *\r\n * @prop {ActionType | ActionFn | false} bgClickAction\r\n * Refer to click and tap actions page.\r\n *\r\n * @prop {ActionType | ActionFn | false} tapAction\r\n * Refer to click and tap actions page.\r\n *\r\n * @prop {ActionType | ActionFn | false} doubleTapAction\r\n * Refer to click and tap actions page.\r\n *\r\n * @prop {number} preloaderDelay\r\n * Delay before the loading indicator will be displayed,\r\n * if image is loaded during it - the indicator will not be displayed at all. Can be zero.\r\n *\r\n * @prop {string} indexIndicatorSep\r\n * Used for slide count indicator (\"1 of 10 \").\r\n *\r\n * @prop {(options: PhotoSwipeOptions, pswp: PhotoSwipeBase) => Point} [getViewportSizeFn]\r\n * A function that should return slide viewport width and height, in format {x: 100, y: 100}.\r\n *\r\n * @prop {string} errorMsg\r\n * Message to display when the image wasn't able to load. If you need to display HTML - use contentErrorElement filter.\r\n *\r\n * @prop {[number, number]} preload\r\n * Lazy loading of nearby slides based on direction of movement. Should be an array with two integers,\r\n * first one - number of items to preload before the current image, second one - after the current image.\r\n * Two nearby images are always loaded.\r\n *\r\n * @prop {string} [mainClass]\r\n * Class that will be added to the root element of PhotoSwipe, may contain multiple separated by space.\r\n * Example on Styling page.\r\n *\r\n * @prop {HTMLElement} [appendToEl]\r\n * Element to which PhotoSwipe dialog will be appended when it opens.\r\n *\r\n * @prop {number} maxWidthToAnimate\r\n * Maximum width of image to animate, if initial rendered image width\r\n * is larger than this value - the opening/closing transition will be automatically disabled.\r\n *\r\n * @prop {string} [closeTitle]\r\n * Translating\r\n *\r\n * @prop {string} [zoomTitle]\r\n * Translating\r\n *\r\n * @prop {string} [arrowPrevTitle]\r\n * Translating\r\n *\r\n * @prop {string} [arrowNextTitle]\r\n * Translating\r\n *\r\n * @prop {'zoom' | 'fade' | 'none'} [showHideAnimationType]\r\n * To adjust opening or closing transition type use lightbox option `showHideAnimationType` (`String`).\r\n * It supports three values - `zoom` (default), `fade` (default if there is no thumbnail) and `none`.\r\n *\r\n * Animations are automatically disabled if user `(prefers-reduced-motion: reduce)`.\r\n *\r\n * @prop {number} index\r\n * Defines start slide index.\r\n *\r\n * @prop {(e: MouseEvent) => number} [getClickedIndexFn]\r\n *\r\n * @prop {boolean} [arrowPrev]\r\n * @prop {boolean} [arrowNext]\r\n * @prop {boolean} [zoom]\r\n * @prop {boolean} [close]\r\n * @prop {boolean} [counter]\r\n *\r\n * @prop {string} [arrowPrevSVG]\r\n * @prop {string} [arrowNextSVG]\r\n * @prop {string} [zoomSVG]\r\n * @prop {string} [closeSVG]\r\n * @prop {string} [counterSVG]\r\n *\r\n * @prop {string} [arrowPrevTitle]\r\n * @prop {string} [arrowNextTitle]\r\n * @prop {string} [zoomTitle]\r\n * @prop {string} [closeTitle]\r\n * @prop {string} [counterTitle]\r\n *\r\n * @prop {ZoomLevelOption} [initialZoomLevel]\r\n * @prop {ZoomLevelOption} [secondaryZoomLevel]\r\n * @prop {ZoomLevelOption} [maxZoomLevel]\r\n *\r\n * @prop {boolean} [mouseMovePan]\r\n * @prop {Point | null} [initialPointerPos]\r\n * @prop {boolean} [showHideOpacity]\r\n *\r\n * @prop {PhotoSwipeModuleOption} [pswpModule]\r\n * @prop {() => Promise<any>} [openPromise]\r\n * @prop {boolean} [preloadFirstSlide]\r\n * @prop {ElementProvider} [gallery]\r\n * @prop {string} [gallerySelector]\r\n * @prop {ElementProvider} [children]\r\n * @prop {string} [childSelector]\r\n * @prop {string | false} [thumbSelector]\r\n */\r\n\r\n/** @type {PreparedPhotoSwipeOptions} */\r\nconst defaultOptions = {\r\n  allowPanToNext: true,\r\n  spacing: 0.1,\r\n  loop: true,\r\n  pinchToClose: true,\r\n  closeOnVerticalDrag: true,\r\n  hideAnimationDuration: 333,\r\n  showAnimationDuration: 333,\r\n  zoomAnimationDuration: 333,\r\n  escKey: true,\r\n  arrowKeys: true,\r\n  trapFocus: true,\r\n  returnFocus: true,\r\n  maxWidthToAnimate: 4000,\r\n  clickToCloseNonZoomable: true,\r\n  imageClickAction: 'zoom-or-close',\r\n  bgClickAction: 'close',\r\n  tapAction: 'toggle-controls',\r\n  doubleTapAction: 'zoom',\r\n  indexIndicatorSep: ' / ',\r\n  preloaderDelay: 2000,\r\n  bgOpacity: 0.8,\r\n\r\n  index: 0,\r\n  errorMsg: 'The image cannot be loaded',\r\n  preload: [1, 2],\r\n  easing: 'cubic-bezier(.4,0,.22,1)'\r\n};\r\n\r\n/**\r\n * PhotoSwipe Core\r\n */\r\nclass PhotoSwipe extends PhotoSwipeBase {\r\n  /**\r\n   * @param {PhotoSwipeOptions} [options]\r\n   */\r\n  constructor(options) {\r\n    super();\r\n\r\n    this.options = this._prepareOptions(options || {});\r\n\r\n    /**\r\n     * offset of viewport relative to document\r\n     *\r\n     * @type {Point}\r\n     */\r\n    this.offset = { x: 0, y: 0 };\r\n\r\n    /**\r\n     * @type {Point}\r\n     * @private\r\n     */\r\n    this._prevViewportSize = { x: 0, y: 0 };\r\n\r\n    /**\r\n     * Size of scrollable PhotoSwipe viewport\r\n     *\r\n     * @type {Point}\r\n     */\r\n    this.viewportSize = { x: 0, y: 0 };\r\n\r\n    /**\r\n     * background (backdrop) opacity\r\n     */\r\n    this.bgOpacity = 1;\r\n    this.currIndex = 0;\r\n    this.potentialIndex = 0;\r\n    this.isOpen = false;\r\n    this.isDestroying = false;\r\n    this.hasMouse = false;\r\n\r\n    /**\r\n     * @private\r\n     * @type {SlideData}\r\n     */\r\n    this._initialItemData = {};\r\n    /** @type {Bounds | undefined} */\r\n    this._initialThumbBounds = undefined;\r\n\r\n    /** @type {HTMLDivElement | undefined} */\r\n    this.topBar = undefined;\r\n    /** @type {HTMLDivElement | undefined} */\r\n    this.element = undefined;\r\n    /** @type {HTMLDivElement | undefined} */\r\n    this.template = undefined;\r\n    /** @type {HTMLDivElement | undefined} */\r\n    this.container = undefined;\r\n    /** @type {HTMLElement | undefined} */\r\n    this.scrollWrap = undefined;\r\n    /** @type {Slide | undefined} */\r\n    this.currSlide = undefined;\r\n\r\n    this.events = new DOMEvents();\r\n    this.animations = new Animations();\r\n    this.mainScroll = new MainScroll(this);\r\n    this.gestures = new Gestures(this);\r\n    this.opener = new Opener(this);\r\n    this.keyboard = new Keyboard(this);\r\n    this.contentLoader = new ContentLoader(this);\r\n  }\r\n\r\n  /** @returns {boolean} */\r\n  init() {\r\n    if (this.isOpen || this.isDestroying) {\r\n      return false;\r\n    }\r\n\r\n    this.isOpen = true;\r\n    this.dispatch('init'); // legacy\r\n    this.dispatch('beforeOpen');\r\n\r\n    this._createMainStructure();\r\n\r\n    // add classes to the root element of PhotoSwipe\r\n    let rootClasses = 'pswp--open';\r\n    if (this.gestures.supportsTouch) {\r\n      rootClasses += ' pswp--touch';\r\n    }\r\n    if (this.options.mainClass) {\r\n      rootClasses += ' ' + this.options.mainClass;\r\n    }\r\n    if (this.element) {\r\n      this.element.className += ' ' + rootClasses;\r\n    }\r\n\r\n    this.currIndex = this.options.index || 0;\r\n    this.potentialIndex = this.currIndex;\r\n    this.dispatch('firstUpdate'); // starting index can be modified here\r\n\r\n    // initialize scroll wheel handler to block the scroll\r\n    this.scrollWheel = new ScrollWheel(this);\r\n\r\n    // sanitize index\r\n    if (Number.isNaN(this.currIndex)\r\n        || this.currIndex < 0\r\n        || this.currIndex >= this.getNumItems()) {\r\n      this.currIndex = 0;\r\n    }\r\n\r\n    if (!this.gestures.supportsTouch) {\r\n      // enable mouse features if no touch support detected\r\n      this.mouseDetected();\r\n    }\r\n\r\n    // causes forced synchronous layout\r\n    this.updateSize();\r\n\r\n    this.offset.y = window.pageYOffset;\r\n\r\n    this._initialItemData = this.getItemData(this.currIndex);\r\n    this.dispatch('gettingData', {\r\n      index: this.currIndex,\r\n      data: this._initialItemData,\r\n      slide: undefined\r\n    });\r\n\r\n    // *Layout* - calculate size and position of elements here\r\n    this._initialThumbBounds = this.getThumbBounds();\r\n    this.dispatch('initialLayout');\r\n\r\n    this.on('openingAnimationEnd', () => {\r\n      const { itemHolders } = this.mainScroll;\r\n\r\n      // Add content to the previous and next slide\r\n      if (itemHolders[0]) {\r\n        itemHolders[0].el.style.display = 'block';\r\n        this.setContent(itemHolders[0], this.currIndex - 1);\r\n      }\r\n      if (itemHolders[2]) {\r\n        itemHolders[2].el.style.display = 'block';\r\n        this.setContent(itemHolders[2], this.currIndex + 1);\r\n      }\r\n\r\n      this.appendHeavy();\r\n\r\n      this.contentLoader.updateLazy();\r\n\r\n      this.events.add(window, 'resize', this._handlePageResize.bind(this));\r\n      this.events.add(window, 'scroll', this._updatePageScrollOffset.bind(this));\r\n      this.dispatch('bindEvents');\r\n    });\r\n\r\n    // set content for center slide (first time)\r\n    if (this.mainScroll.itemHolders[1]) {\r\n      this.setContent(this.mainScroll.itemHolders[1], this.currIndex);\r\n    }\r\n    this.dispatch('change');\r\n\r\n    this.opener.open();\r\n\r\n    this.dispatch('afterInit');\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Get looped slide index\r\n   * (for example, -1 will return the last slide)\r\n   *\r\n   * @param {number} index\r\n   * @returns {number}\r\n   */\r\n  getLoopedIndex(index) {\r\n    const numSlides = this.getNumItems();\r\n\r\n    if (this.options.loop) {\r\n      if (index > numSlides - 1) {\r\n        index -= numSlides;\r\n      }\r\n\r\n      if (index < 0) {\r\n        index += numSlides;\r\n      }\r\n    }\r\n\r\n    return clamp(index, 0, numSlides - 1);\r\n  }\r\n\r\n  appendHeavy() {\r\n    this.mainScroll.itemHolders.forEach((itemHolder) => {\r\n      itemHolder.slide?.appendHeavy();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Change the slide\r\n   * @param {number} index New index\r\n   */\r\n  goTo(index) {\r\n    this.mainScroll.moveIndexBy(\r\n      this.getLoopedIndex(index) - this.potentialIndex\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Go to the next slide.\r\n   */\r\n  next() {\r\n    this.goTo(this.potentialIndex + 1);\r\n  }\r\n\r\n  /**\r\n   * Go to the previous slide.\r\n   */\r\n  prev() {\r\n    this.goTo(this.potentialIndex - 1);\r\n  }\r\n\r\n  /**\r\n   * @see slide/slide.js zoomTo\r\n   *\r\n   * @param {Parameters<Slide['zoomTo']>} args\r\n   */\r\n  zoomTo(...args) {\r\n    this.currSlide?.zoomTo(...args);\r\n  }\r\n\r\n  /**\r\n   * @see slide/slide.js toggleZoom\r\n   */\r\n  toggleZoom() {\r\n    this.currSlide?.toggleZoom();\r\n  }\r\n\r\n  /**\r\n   * Close the gallery.\r\n   * After closing transition ends - destroy it\r\n   */\r\n  close() {\r\n    if (!this.opener.isOpen || this.isDestroying) {\r\n      return;\r\n    }\r\n\r\n    this.isDestroying = true;\r\n\r\n    this.dispatch('close');\r\n\r\n    this.events.removeAll();\r\n    this.opener.close();\r\n  }\r\n\r\n  /**\r\n   * Destroys the gallery:\r\n   * - instantly closes the gallery\r\n   * - unbinds events,\r\n   * - cleans intervals and timeouts\r\n   * - removes elements from DOM\r\n   */\r\n  destroy() {\r\n    if (!this.isDestroying) {\r\n      this.options.showHideAnimationType = 'none';\r\n      this.close();\r\n      return;\r\n    }\r\n\r\n    this.dispatch('destroy');\r\n\r\n    this._listeners = {};\r\n\r\n    if (this.scrollWrap) {\r\n      this.scrollWrap.ontouchmove = null;\r\n      this.scrollWrap.ontouchend = null;\r\n    }\r\n\r\n    this.element?.remove();\r\n\r\n    this.mainScroll.itemHolders.forEach((itemHolder) => {\r\n      itemHolder.slide?.destroy();\r\n    });\r\n\r\n    this.contentLoader.destroy();\r\n    this.events.removeAll();\r\n  }\r\n\r\n  /**\r\n   * Refresh/reload content of a slide by its index\r\n   *\r\n   * @param {number} slideIndex\r\n   */\r\n  refreshSlideContent(slideIndex) {\r\n    this.contentLoader.removeByIndex(slideIndex);\r\n    this.mainScroll.itemHolders.forEach((itemHolder, i) => {\r\n      let potentialHolderIndex = (this.currSlide?.index ?? 0) - 1 + i;\r\n      if (this.canLoop()) {\r\n        potentialHolderIndex = this.getLoopedIndex(potentialHolderIndex);\r\n      }\r\n      if (potentialHolderIndex === slideIndex) {\r\n        // set the new slide content\r\n        this.setContent(itemHolder, slideIndex, true);\r\n\r\n        // activate the new slide if it's current\r\n        if (i === 1) {\r\n          this.currSlide = itemHolder.slide;\r\n          itemHolder.slide?.setIsActive(true);\r\n        }\r\n      }\r\n    });\r\n\r\n    this.dispatch('change');\r\n  }\r\n\r\n\r\n  /**\r\n   * Set slide content\r\n   *\r\n   * @param {ItemHolder} holder mainScroll.itemHolders array item\r\n   * @param {number} index Slide index\r\n   * @param {boolean} [force] If content should be set even if index wasn't changed\r\n   */\r\n  setContent(holder, index, force) {\r\n    if (this.canLoop()) {\r\n      index = this.getLoopedIndex(index);\r\n    }\r\n\r\n    if (holder.slide) {\r\n      if (holder.slide.index === index && !force) {\r\n        // exit if holder already contains this slide\r\n        // this could be common when just three slides are used\r\n        return;\r\n      }\r\n\r\n      // destroy previous slide\r\n      holder.slide.destroy();\r\n      holder.slide = undefined;\r\n    }\r\n\r\n    // exit if no loop and index is out of bounds\r\n    if (!this.canLoop() && (index < 0 || index >= this.getNumItems())) {\r\n      return;\r\n    }\r\n\r\n    const itemData = this.getItemData(index);\r\n    holder.slide = new Slide(itemData, index, this);\r\n\r\n    // set current slide\r\n    if (index === this.currIndex) {\r\n      this.currSlide = holder.slide;\r\n    }\r\n\r\n    holder.slide.append(holder.el);\r\n  }\r\n\r\n  /** @returns {Point} */\r\n  getViewportCenterPoint() {\r\n    return {\r\n      x: this.viewportSize.x / 2,\r\n      y: this.viewportSize.y / 2\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Update size of all elements.\r\n   * Executed on init and on page resize.\r\n   *\r\n   * @param {boolean} [force] Update size even if size of viewport was not changed.\r\n   */\r\n  updateSize(force) {\r\n    // let item;\r\n    // let itemIndex;\r\n\r\n    if (this.isDestroying) {\r\n      // exit if PhotoSwipe is closed or closing\r\n      // (to avoid errors, as resize event might be delayed)\r\n      return;\r\n    }\r\n\r\n    //const newWidth = this.scrollWrap.clientWidth;\r\n    //const newHeight = this.scrollWrap.clientHeight;\r\n\r\n    const newViewportSize = getViewportSize(this.options, this);\r\n\r\n    if (!force && pointsEqual(newViewportSize, this._prevViewportSize)) {\r\n      // Exit if dimensions were not changed\r\n      return;\r\n    }\r\n\r\n    //this._prevViewportSize.x = newWidth;\r\n    //this._prevViewportSize.y = newHeight;\r\n    equalizePoints(this._prevViewportSize, newViewportSize);\r\n\r\n    this.dispatch('beforeResize');\r\n\r\n    equalizePoints(this.viewportSize, this._prevViewportSize);\r\n\r\n    this._updatePageScrollOffset();\r\n\r\n    this.dispatch('viewportSize');\r\n\r\n    // Resize slides only after opener animation is finished\r\n    // and don't re-calculate size on inital size update\r\n    this.mainScroll.resize(this.opener.isOpen);\r\n\r\n    if (!this.hasMouse && window.matchMedia('(any-hover: hover)').matches) {\r\n      this.mouseDetected();\r\n    }\r\n\r\n    this.dispatch('resize');\r\n  }\r\n\r\n  /**\r\n   * @param {number} opacity\r\n   */\r\n  applyBgOpacity(opacity) {\r\n    this.bgOpacity = Math.max(opacity, 0);\r\n    if (this.bg) {\r\n      this.bg.style.opacity = String(this.bgOpacity * this.options.bgOpacity);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Whether mouse is detected\r\n   */\r\n  mouseDetected() {\r\n    if (!this.hasMouse) {\r\n      this.hasMouse = true;\r\n      this.element?.classList.add('pswp--has_mouse');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Page resize event handler\r\n   *\r\n   * @private\r\n   */\r\n  _handlePageResize() {\r\n    this.updateSize();\r\n\r\n    // In iOS webview, if element size depends on document size,\r\n    // it'll be measured incorrectly in resize event\r\n    //\r\n    // https://bugs.webkit.org/show_bug.cgi?id=170595\r\n    // https://hackernoon.com/onresize-event-broken-in-mobile-safari-d8469027bf4d\r\n    if (/iPhone|iPad|iPod/i.test(window.navigator.userAgent)) {\r\n      setTimeout(() => {\r\n        this.updateSize();\r\n      }, 500);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Page scroll offset is used\r\n   * to get correct coordinates\r\n   * relative to PhotoSwipe viewport.\r\n   *\r\n   * @private\r\n   */\r\n  _updatePageScrollOffset() {\r\n    this.setScrollOffset(0, window.pageYOffset);\r\n  }\r\n\r\n  /**\r\n   * @param {number} x\r\n   * @param {number} y\r\n   */\r\n  setScrollOffset(x, y) {\r\n    this.offset.x = x;\r\n    this.offset.y = y;\r\n    this.dispatch('updateScrollOffset');\r\n  }\r\n\r\n  /**\r\n   * Create main HTML structure of PhotoSwipe,\r\n   * and add it to DOM\r\n   *\r\n   * @private\r\n   */\r\n  _createMainStructure() {\r\n    // root DOM element of PhotoSwipe (.pswp)\r\n    this.element = createElement('pswp', 'div');\r\n    this.element.setAttribute('tabindex', '-1');\r\n    this.element.setAttribute('role', 'dialog');\r\n\r\n    // template is legacy prop\r\n    this.template = this.element;\r\n\r\n    // Background is added as a separate element,\r\n    // as animating opacity is faster than animating rgba()\r\n    this.bg = createElement('pswp__bg', 'div', this.element);\r\n    this.scrollWrap = createElement('pswp__scroll-wrap', 'section', this.element);\r\n    this.container = createElement('pswp__container', 'div', this.scrollWrap);\r\n\r\n    // aria pattern: carousel\r\n    this.scrollWrap.setAttribute('aria-roledescription', 'carousel');\r\n    this.container.setAttribute('aria-live', 'off');\r\n    this.container.setAttribute('id', 'pswp__items');\r\n\r\n    this.mainScroll.appendHolders();\r\n\r\n    this.ui = new UI(this);\r\n    this.ui.init();\r\n\r\n    // append to DOM\r\n    (this.options.appendToEl || document.body).appendChild(this.element);\r\n  }\r\n\r\n\r\n  /**\r\n   * Get position and dimensions of small thumbnail\r\n   *   {x:,y:,w:}\r\n   *\r\n   * Height is optional (calculated based on the large image)\r\n   *\r\n   * @returns {Bounds | undefined}\r\n   */\r\n  getThumbBounds() {\r\n    return getThumbBounds(\r\n      this.currIndex,\r\n      this.currSlide ? this.currSlide.data : this._initialItemData,\r\n      this\r\n    );\r\n  }\r\n\r\n  /**\r\n   * If the PhotoSwipe can have continuous loop\r\n   * @returns Boolean\r\n   */\r\n  canLoop() {\r\n    return (this.options.loop && this.getNumItems() > 2);\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * @param {PhotoSwipeOptions} options\r\n   * @returns {PreparedPhotoSwipeOptions}\r\n   */\r\n  _prepareOptions(options) {\r\n    if (window.matchMedia('(prefers-reduced-motion), (update: slow)').matches) {\r\n      options.showHideAnimationType = 'none';\r\n      options.zoomAnimationDuration = 0;\r\n    }\r\n\r\n    /** @type {PreparedPhotoSwipeOptions} */\r\n    return {\r\n      ...defaultOptions,\r\n      ...options\r\n    };\r\n  }\r\n}\r\n\r\nexport default PhotoSwipe;\r\n", "\n/* **********************************************\n     Begin prism-core.js\n********************************************** */\n\n/// <reference lib=\"WebWorker\"/>\n\nvar _self = (typeof window !== 'undefined')\n\t? window   // if in browser\n\t: (\n\t\t(typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope)\n\t\t\t? self // if in worker\n\t\t\t: {}   // if in node js\n\t);\n\n/**\n * Prism: Lightweight, robust, elegant syntax highlighting\n *\n * @license MIT <https://opensource.org/licenses/MIT>\n * @author Lea Verou <https://lea.verou.me>\n * @namespace\n * @public\n */\nvar Prism = (function (_self) {\n\n\t// Private helper vars\n\tvar lang = /(?:^|\\s)lang(?:uage)?-([\\w-]+)(?=\\s|$)/i;\n\tvar uniqueId = 0;\n\n\t// The grammar object for plaintext\n\tvar plainTextGrammar = {};\n\n\n\tvar _ = {\n\t\t/**\n\t\t * By default, Prism will attempt to highlight all code elements (by calling {@link Prism.highlightAll}) on the\n\t\t * current page after the page finished loading. This might be a problem if e.g. you wanted to asynchronously load\n\t\t * additional languages or plugins yourself.\n\t\t *\n\t\t * By setting this value to `true`, Prism will not automatically highlight all code elements on the page.\n\t\t *\n\t\t * You obviously have to change this value before the automatic highlighting started. To do this, you can add an\n\t\t * empty Prism object into the global scope before loading the Prism script like this:\n\t\t *\n\t\t * ```js\n\t\t * window.Prism = window.Prism || {};\n\t\t * Prism.manual = true;\n\t\t * // add a new <script> to load Prism's script\n\t\t * ```\n\t\t *\n\t\t * @default false\n\t\t * @type {boolean}\n\t\t * @memberof Prism\n\t\t * @public\n\t\t */\n\t\tmanual: _self.Prism && _self.Prism.manual,\n\t\t/**\n\t\t * By default, if Prism is in a web worker, it assumes that it is in a worker it created itself, so it uses\n\t\t * `addEventListener` to communicate with its parent instance. However, if you're using Prism manually in your\n\t\t * own worker, you don't want it to do this.\n\t\t *\n\t\t * By setting this value to `true`, Prism will not add its own listeners to the worker.\n\t\t *\n\t\t * You obviously have to change this value before Prism executes. To do this, you can add an\n\t\t * empty Prism object into the global scope before loading the Prism script like this:\n\t\t *\n\t\t * ```js\n\t\t * window.Prism = window.Prism || {};\n\t\t * Prism.disableWorkerMessageHandler = true;\n\t\t * // Load Prism's script\n\t\t * ```\n\t\t *\n\t\t * @default false\n\t\t * @type {boolean}\n\t\t * @memberof Prism\n\t\t * @public\n\t\t */\n\t\tdisableWorkerMessageHandler: _self.Prism && _self.Prism.disableWorkerMessageHandler,\n\n\t\t/**\n\t\t * A namespace for utility methods.\n\t\t *\n\t\t * All function in this namespace that are not explicitly marked as _public_ are for __internal use only__ and may\n\t\t * change or disappear at any time.\n\t\t *\n\t\t * @namespace\n\t\t * @memberof Prism\n\t\t */\n\t\tutil: {\n\t\t\tencode: function encode(tokens) {\n\t\t\t\tif (tokens instanceof Token) {\n\t\t\t\t\treturn new Token(tokens.type, encode(tokens.content), tokens.alias);\n\t\t\t\t} else if (Array.isArray(tokens)) {\n\t\t\t\t\treturn tokens.map(encode);\n\t\t\t\t} else {\n\t\t\t\t\treturn tokens.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/\\u00a0/g, ' ');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns the name of the type of the given value.\n\t\t\t *\n\t\t\t * @param {any} o\n\t\t\t * @returns {string}\n\t\t\t * @example\n\t\t\t * type(null)      === 'Null'\n\t\t\t * type(undefined) === 'Undefined'\n\t\t\t * type(123)       === 'Number'\n\t\t\t * type('foo')     === 'String'\n\t\t\t * type(true)      === 'Boolean'\n\t\t\t * type([1, 2])    === 'Array'\n\t\t\t * type({})        === 'Object'\n\t\t\t * type(String)    === 'Function'\n\t\t\t * type(/abc+/)    === 'RegExp'\n\t\t\t */\n\t\t\ttype: function (o) {\n\t\t\t\treturn Object.prototype.toString.call(o).slice(8, -1);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns a unique number for the given object. Later calls will still return the same number.\n\t\t\t *\n\t\t\t * @param {Object} obj\n\t\t\t * @returns {number}\n\t\t\t */\n\t\t\tobjId: function (obj) {\n\t\t\t\tif (!obj['__id']) {\n\t\t\t\t\tObject.defineProperty(obj, '__id', { value: ++uniqueId });\n\t\t\t\t}\n\t\t\t\treturn obj['__id'];\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Creates a deep clone of the given object.\n\t\t\t *\n\t\t\t * The main intended use of this function is to clone language definitions.\n\t\t\t *\n\t\t\t * @param {T} o\n\t\t\t * @param {Record<number, any>} [visited]\n\t\t\t * @returns {T}\n\t\t\t * @template T\n\t\t\t */\n\t\t\tclone: function deepClone(o, visited) {\n\t\t\t\tvisited = visited || {};\n\n\t\t\t\tvar clone; var id;\n\t\t\t\tswitch (_.util.type(o)) {\n\t\t\t\t\tcase 'Object':\n\t\t\t\t\t\tid = _.util.objId(o);\n\t\t\t\t\t\tif (visited[id]) {\n\t\t\t\t\t\t\treturn visited[id];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tclone = /** @type {Record<string, any>} */ ({});\n\t\t\t\t\t\tvisited[id] = clone;\n\n\t\t\t\t\t\tfor (var key in o) {\n\t\t\t\t\t\t\tif (o.hasOwnProperty(key)) {\n\t\t\t\t\t\t\t\tclone[key] = deepClone(o[key], visited);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn /** @type {any} */ (clone);\n\n\t\t\t\t\tcase 'Array':\n\t\t\t\t\t\tid = _.util.objId(o);\n\t\t\t\t\t\tif (visited[id]) {\n\t\t\t\t\t\t\treturn visited[id];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tclone = [];\n\t\t\t\t\t\tvisited[id] = clone;\n\n\t\t\t\t\t\t(/** @type {Array} */(/** @type {any} */(o))).forEach(function (v, i) {\n\t\t\t\t\t\t\tclone[i] = deepClone(v, visited);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn /** @type {any} */ (clone);\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns the Prism language of the given element set by a `language-xxxx` or `lang-xxxx` class.\n\t\t\t *\n\t\t\t * If no language is set for the element or the element is `null` or `undefined`, `none` will be returned.\n\t\t\t *\n\t\t\t * @param {Element} element\n\t\t\t * @returns {string}\n\t\t\t */\n\t\t\tgetLanguage: function (element) {\n\t\t\t\twhile (element) {\n\t\t\t\t\tvar m = lang.exec(element.className);\n\t\t\t\t\tif (m) {\n\t\t\t\t\t\treturn m[1].toLowerCase();\n\t\t\t\t\t}\n\t\t\t\t\telement = element.parentElement;\n\t\t\t\t}\n\t\t\t\treturn 'none';\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Sets the Prism `language-xxxx` class of the given element.\n\t\t\t *\n\t\t\t * @param {Element} element\n\t\t\t * @param {string} language\n\t\t\t * @returns {void}\n\t\t\t */\n\t\t\tsetLanguage: function (element, language) {\n\t\t\t\t// remove all `language-xxxx` classes\n\t\t\t\t// (this might leave behind a leading space)\n\t\t\t\telement.className = element.className.replace(RegExp(lang, 'gi'), '');\n\n\t\t\t\t// add the new `language-xxxx` class\n\t\t\t\t// (using `classList` will automatically clean up spaces for us)\n\t\t\t\telement.classList.add('language-' + language);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns the script element that is currently executing.\n\t\t\t *\n\t\t\t * This does __not__ work for line script element.\n\t\t\t *\n\t\t\t * @returns {HTMLScriptElement | null}\n\t\t\t */\n\t\t\tcurrentScript: function () {\n\t\t\t\tif (typeof document === 'undefined') {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif ('currentScript' in document && 1 < 2 /* hack to trip TS' flow analysis */) {\n\t\t\t\t\treturn /** @type {any} */ (document.currentScript);\n\t\t\t\t}\n\n\t\t\t\t// IE11 workaround\n\t\t\t\t// we'll get the src of the current script by parsing IE11's error stack trace\n\t\t\t\t// this will not work for inline scripts\n\n\t\t\t\ttry {\n\t\t\t\t\tthrow new Error();\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Get file src url from stack. Specifically works with the format of stack traces in IE.\n\t\t\t\t\t// A stack will look like this:\n\t\t\t\t\t//\n\t\t\t\t\t// Error\n\t\t\t\t\t//    at _.util.currentScript (http://localhost/components/prism-core.js:119:5)\n\t\t\t\t\t//    at Global code (http://localhost/components/prism-core.js:606:1)\n\n\t\t\t\t\tvar src = (/at [^(\\r\\n]*\\((.*):[^:]+:[^:]+\\)$/i.exec(err.stack) || [])[1];\n\t\t\t\t\tif (src) {\n\t\t\t\t\t\tvar scripts = document.getElementsByTagName('script');\n\t\t\t\t\t\tfor (var i in scripts) {\n\t\t\t\t\t\t\tif (scripts[i].src == src) {\n\t\t\t\t\t\t\t\treturn scripts[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns whether a given class is active for `element`.\n\t\t\t *\n\t\t\t * The class can be activated if `element` or one of its ancestors has the given class and it can be deactivated\n\t\t\t * if `element` or one of its ancestors has the negated version of the given class. The _negated version_ of the\n\t\t\t * given class is just the given class with a `no-` prefix.\n\t\t\t *\n\t\t\t * Whether the class is active is determined by the closest ancestor of `element` (where `element` itself is\n\t\t\t * closest ancestor) that has the given class or the negated version of it. If neither `element` nor any of its\n\t\t\t * ancestors have the given class or the negated version of it, then the default activation will be returned.\n\t\t\t *\n\t\t\t * In the paradoxical situation where the closest ancestor contains __both__ the given class and the negated\n\t\t\t * version of it, the class is considered active.\n\t\t\t *\n\t\t\t * @param {Element} element\n\t\t\t * @param {string} className\n\t\t\t * @param {boolean} [defaultActivation=false]\n\t\t\t * @returns {boolean}\n\t\t\t */\n\t\t\tisActive: function (element, className, defaultActivation) {\n\t\t\t\tvar no = 'no-' + className;\n\n\t\t\t\twhile (element) {\n\t\t\t\t\tvar classList = element.classList;\n\t\t\t\t\tif (classList.contains(className)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tif (classList.contains(no)) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\telement = element.parentElement;\n\t\t\t\t}\n\t\t\t\treturn !!defaultActivation;\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * This namespace contains all currently loaded languages and the some helper functions to create and modify languages.\n\t\t *\n\t\t * @namespace\n\t\t * @memberof Prism\n\t\t * @public\n\t\t */\n\t\tlanguages: {\n\t\t\t/**\n\t\t\t * The grammar for plain, unformatted text.\n\t\t\t */\n\t\t\tplain: plainTextGrammar,\n\t\t\tplaintext: plainTextGrammar,\n\t\t\ttext: plainTextGrammar,\n\t\t\ttxt: plainTextGrammar,\n\n\t\t\t/**\n\t\t\t * Creates a deep copy of the language with the given id and appends the given tokens.\n\t\t\t *\n\t\t\t * If a token in `redef` also appears in the copied language, then the existing token in the copied language\n\t\t\t * will be overwritten at its original position.\n\t\t\t *\n\t\t\t * ## Best practices\n\t\t\t *\n\t\t\t * Since the position of overwriting tokens (token in `redef` that overwrite tokens in the copied language)\n\t\t\t * doesn't matter, they can technically be in any order. However, this can be confusing to others that trying to\n\t\t\t * understand the language definition because, normally, the order of tokens matters in Prism grammars.\n\t\t\t *\n\t\t\t * Therefore, it is encouraged to order overwriting tokens according to the positions of the overwritten tokens.\n\t\t\t * Furthermore, all non-overwriting tokens should be placed after the overwriting ones.\n\t\t\t *\n\t\t\t * @param {string} id The id of the language to extend. This has to be a key in `Prism.languages`.\n\t\t\t * @param {Grammar} redef The new tokens to append.\n\t\t\t * @returns {Grammar} The new language created.\n\t\t\t * @public\n\t\t\t * @example\n\t\t\t * Prism.languages['css-with-colors'] = Prism.languages.extend('css', {\n\t\t\t *     // Prism.languages.css already has a 'comment' token, so this token will overwrite CSS' 'comment' token\n\t\t\t *     // at its original position\n\t\t\t *     'comment': { ... },\n\t\t\t *     // CSS doesn't have a 'color' token, so this token will be appended\n\t\t\t *     'color': /\\b(?:red|green|blue)\\b/\n\t\t\t * });\n\t\t\t */\n\t\t\textend: function (id, redef) {\n\t\t\t\tvar lang = _.util.clone(_.languages[id]);\n\n\t\t\t\tfor (var key in redef) {\n\t\t\t\t\tlang[key] = redef[key];\n\t\t\t\t}\n\n\t\t\t\treturn lang;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Inserts tokens _before_ another token in a language definition or any other grammar.\n\t\t\t *\n\t\t\t * ## Usage\n\t\t\t *\n\t\t\t * This helper method makes it easy to modify existing languages. For example, the CSS language definition\n\t\t\t * not only defines CSS highlighting for CSS documents, but also needs to define highlighting for CSS embedded\n\t\t\t * in HTML through `<style>` elements. To do this, it needs to modify `Prism.languages.markup` and add the\n\t\t\t * appropriate tokens. However, `Prism.languages.markup` is a regular JavaScript object literal, so if you do\n\t\t\t * this:\n\t\t\t *\n\t\t\t * ```js\n\t\t\t * Prism.languages.markup.style = {\n\t\t\t *     // token\n\t\t\t * };\n\t\t\t * ```\n\t\t\t *\n\t\t\t * then the `style` token will be added (and processed) at the end. `insertBefore` allows you to insert tokens\n\t\t\t * before existing tokens. For the CSS example above, you would use it like this:\n\t\t\t *\n\t\t\t * ```js\n\t\t\t * Prism.languages.insertBefore('markup', 'cdata', {\n\t\t\t *     'style': {\n\t\t\t *         // token\n\t\t\t *     }\n\t\t\t * });\n\t\t\t * ```\n\t\t\t *\n\t\t\t * ## Special cases\n\t\t\t *\n\t\t\t * If the grammars of `inside` and `insert` have tokens with the same name, the tokens in `inside`'s grammar\n\t\t\t * will be ignored.\n\t\t\t *\n\t\t\t * This behavior can be used to insert tokens after `before`:\n\t\t\t *\n\t\t\t * ```js\n\t\t\t * Prism.languages.insertBefore('markup', 'comment', {\n\t\t\t *     'comment': Prism.languages.markup.comment,\n\t\t\t *     // tokens after 'comment'\n\t\t\t * });\n\t\t\t * ```\n\t\t\t *\n\t\t\t * ## Limitations\n\t\t\t *\n\t\t\t * The main problem `insertBefore` has to solve is iteration order. Since ES2015, the iteration order for object\n\t\t\t * properties is guaranteed to be the insertion order (except for integer keys) but some browsers behave\n\t\t\t * differently when keys are deleted and re-inserted. So `insertBefore` can't be implemented by temporarily\n\t\t\t * deleting properties which is necessary to insert at arbitrary positions.\n\t\t\t *\n\t\t\t * To solve this problem, `insertBefore` doesn't actually insert the given tokens into the target object.\n\t\t\t * Instead, it will create a new object and replace all references to the target object with the new one. This\n\t\t\t * can be done without temporarily deleting properties, so the iteration order is well-defined.\n\t\t\t *\n\t\t\t * However, only references that can be reached from `Prism.languages` or `insert` will be replaced. I.e. if\n\t\t\t * you hold the target object in a variable, then the value of the variable will not change.\n\t\t\t *\n\t\t\t * ```js\n\t\t\t * var oldMarkup = Prism.languages.markup;\n\t\t\t * var newMarkup = Prism.languages.insertBefore('markup', 'comment', { ... });\n\t\t\t *\n\t\t\t * assert(oldMarkup !== Prism.languages.markup);\n\t\t\t * assert(newMarkup === Prism.languages.markup);\n\t\t\t * ```\n\t\t\t *\n\t\t\t * @param {string} inside The property of `root` (e.g. a language id in `Prism.languages`) that contains the\n\t\t\t * object to be modified.\n\t\t\t * @param {string} before The key to insert before.\n\t\t\t * @param {Grammar} insert An object containing the key-value pairs to be inserted.\n\t\t\t * @param {Object<string, any>} [root] The object containing `inside`, i.e. the object that contains the\n\t\t\t * object to be modified.\n\t\t\t *\n\t\t\t * Defaults to `Prism.languages`.\n\t\t\t * @returns {Grammar} The new grammar object.\n\t\t\t * @public\n\t\t\t */\n\t\t\tinsertBefore: function (inside, before, insert, root) {\n\t\t\t\troot = root || /** @type {any} */ (_.languages);\n\t\t\t\tvar grammar = root[inside];\n\t\t\t\t/** @type {Grammar} */\n\t\t\t\tvar ret = {};\n\n\t\t\t\tfor (var token in grammar) {\n\t\t\t\t\tif (grammar.hasOwnProperty(token)) {\n\n\t\t\t\t\t\tif (token == before) {\n\t\t\t\t\t\t\tfor (var newToken in insert) {\n\t\t\t\t\t\t\t\tif (insert.hasOwnProperty(newToken)) {\n\t\t\t\t\t\t\t\t\tret[newToken] = insert[newToken];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Do not insert token which also occur in insert. See #1525\n\t\t\t\t\t\tif (!insert.hasOwnProperty(token)) {\n\t\t\t\t\t\t\tret[token] = grammar[token];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar old = root[inside];\n\t\t\t\troot[inside] = ret;\n\n\t\t\t\t// Update references in other language definitions\n\t\t\t\t_.languages.DFS(_.languages, function (key, value) {\n\t\t\t\t\tif (value === old && key != inside) {\n\t\t\t\t\t\tthis[key] = ret;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn ret;\n\t\t\t},\n\n\t\t\t// Traverse a language definition with Depth First Search\n\t\t\tDFS: function DFS(o, callback, type, visited) {\n\t\t\t\tvisited = visited || {};\n\n\t\t\t\tvar objId = _.util.objId;\n\n\t\t\t\tfor (var i in o) {\n\t\t\t\t\tif (o.hasOwnProperty(i)) {\n\t\t\t\t\t\tcallback.call(o, i, o[i], type || i);\n\n\t\t\t\t\t\tvar property = o[i];\n\t\t\t\t\t\tvar propertyType = _.util.type(property);\n\n\t\t\t\t\t\tif (propertyType === 'Object' && !visited[objId(property)]) {\n\t\t\t\t\t\t\tvisited[objId(property)] = true;\n\t\t\t\t\t\t\tDFS(property, callback, null, visited);\n\t\t\t\t\t\t} else if (propertyType === 'Array' && !visited[objId(property)]) {\n\t\t\t\t\t\t\tvisited[objId(property)] = true;\n\t\t\t\t\t\t\tDFS(property, callback, i, visited);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tplugins: {},\n\n\t\t/**\n\t\t * This is the most high-level function in Prism\u2019s API.\n\t\t * It fetches all the elements that have a `.language-xxxx` class and then calls {@link Prism.highlightElement} on\n\t\t * each one of them.\n\t\t *\n\t\t * This is equivalent to `Prism.highlightAllUnder(document, async, callback)`.\n\t\t *\n\t\t * @param {boolean} [async=false] Same as in {@link Prism.highlightAllUnder}.\n\t\t * @param {HighlightCallback} [callback] Same as in {@link Prism.highlightAllUnder}.\n\t\t * @memberof Prism\n\t\t * @public\n\t\t */\n\t\thighlightAll: function (async, callback) {\n\t\t\t_.highlightAllUnder(document, async, callback);\n\t\t},\n\n\t\t/**\n\t\t * Fetches all the descendants of `container` that have a `.language-xxxx` class and then calls\n\t\t * {@link Prism.highlightElement} on each one of them.\n\t\t *\n\t\t * The following hooks will be run:\n\t\t * 1. `before-highlightall`\n\t\t * 2. `before-all-elements-highlight`\n\t\t * 3. All hooks of {@link Prism.highlightElement} for each element.\n\t\t *\n\t\t * @param {ParentNode} container The root element, whose descendants that have a `.language-xxxx` class will be highlighted.\n\t\t * @param {boolean} [async=false] Whether each element is to be highlighted asynchronously using Web Workers.\n\t\t * @param {HighlightCallback} [callback] An optional callback to be invoked on each element after its highlighting is done.\n\t\t * @memberof Prism\n\t\t * @public\n\t\t */\n\t\thighlightAllUnder: function (container, async, callback) {\n\t\t\tvar env = {\n\t\t\t\tcallback: callback,\n\t\t\t\tcontainer: container,\n\t\t\t\tselector: 'code[class*=\"language-\"], [class*=\"language-\"] code, code[class*=\"lang-\"], [class*=\"lang-\"] code'\n\t\t\t};\n\n\t\t\t_.hooks.run('before-highlightall', env);\n\n\t\t\tenv.elements = Array.prototype.slice.apply(env.container.querySelectorAll(env.selector));\n\n\t\t\t_.hooks.run('before-all-elements-highlight', env);\n\n\t\t\tfor (var i = 0, element; (element = env.elements[i++]);) {\n\t\t\t\t_.highlightElement(element, async === true, env.callback);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Highlights the code inside a single element.\n\t\t *\n\t\t * The following hooks will be run:\n\t\t * 1. `before-sanity-check`\n\t\t * 2. `before-highlight`\n\t\t * 3. All hooks of {@link Prism.highlight}. These hooks will be run by an asynchronous worker if `async` is `true`.\n\t\t * 4. `before-insert`\n\t\t * 5. `after-highlight`\n\t\t * 6. `complete`\n\t\t *\n\t\t * Some the above hooks will be skipped if the element doesn't contain any text or there is no grammar loaded for\n\t\t * the element's language.\n\t\t *\n\t\t * @param {Element} element The element containing the code.\n\t\t * It must have a class of `language-xxxx` to be processed, where `xxxx` is a valid language identifier.\n\t\t * @param {boolean} [async=false] Whether the element is to be highlighted asynchronously using Web Workers\n\t\t * to improve performance and avoid blocking the UI when highlighting very large chunks of code. This option is\n\t\t * [disabled by default](https://prismjs.com/faq.html#why-is-asynchronous-highlighting-disabled-by-default).\n\t\t *\n\t\t * Note: All language definitions required to highlight the code must be included in the main `prism.js` file for\n\t\t * asynchronous highlighting to work. You can build your own bundle on the\n\t\t * [Download page](https://prismjs.com/download.html).\n\t\t * @param {HighlightCallback} [callback] An optional callback to be invoked after the highlighting is done.\n\t\t * Mostly useful when `async` is `true`, since in that case, the highlighting is done asynchronously.\n\t\t * @memberof Prism\n\t\t * @public\n\t\t */\n\t\thighlightElement: function (element, async, callback) {\n\t\t\t// Find language\n\t\t\tvar language = _.util.getLanguage(element);\n\t\t\tvar grammar = _.languages[language];\n\n\t\t\t// Set language on the element, if not present\n\t\t\t_.util.setLanguage(element, language);\n\n\t\t\t// Set language on the parent, for styling\n\t\t\tvar parent = element.parentElement;\n\t\t\tif (parent && parent.nodeName.toLowerCase() === 'pre') {\n\t\t\t\t_.util.setLanguage(parent, language);\n\t\t\t}\n\n\t\t\tvar code = element.textContent;\n\n\t\t\tvar env = {\n\t\t\t\telement: element,\n\t\t\t\tlanguage: language,\n\t\t\t\tgrammar: grammar,\n\t\t\t\tcode: code\n\t\t\t};\n\n\t\t\tfunction insertHighlightedCode(highlightedCode) {\n\t\t\t\tenv.highlightedCode = highlightedCode;\n\n\t\t\t\t_.hooks.run('before-insert', env);\n\n\t\t\t\tenv.element.innerHTML = env.highlightedCode;\n\n\t\t\t\t_.hooks.run('after-highlight', env);\n\t\t\t\t_.hooks.run('complete', env);\n\t\t\t\tcallback && callback.call(env.element);\n\t\t\t}\n\n\t\t\t_.hooks.run('before-sanity-check', env);\n\n\t\t\t// plugins may change/add the parent/element\n\t\t\tparent = env.element.parentElement;\n\t\t\tif (parent && parent.nodeName.toLowerCase() === 'pre' && !parent.hasAttribute('tabindex')) {\n\t\t\t\tparent.setAttribute('tabindex', '0');\n\t\t\t}\n\n\t\t\tif (!env.code) {\n\t\t\t\t_.hooks.run('complete', env);\n\t\t\t\tcallback && callback.call(env.element);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t_.hooks.run('before-highlight', env);\n\n\t\t\tif (!env.grammar) {\n\t\t\t\tinsertHighlightedCode(_.util.encode(env.code));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (async && _self.Worker) {\n\t\t\t\tvar worker = new Worker(_.filename);\n\n\t\t\t\tworker.onmessage = function (evt) {\n\t\t\t\t\tinsertHighlightedCode(evt.data);\n\t\t\t\t};\n\n\t\t\t\tworker.postMessage(JSON.stringify({\n\t\t\t\t\tlanguage: env.language,\n\t\t\t\t\tcode: env.code,\n\t\t\t\t\timmediateClose: true\n\t\t\t\t}));\n\t\t\t} else {\n\t\t\t\tinsertHighlightedCode(_.highlight(env.code, env.grammar, env.language));\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Low-level function, only use if you know what you\u2019re doing. It accepts a string of text as input\n\t\t * and the language definitions to use, and returns a string with the HTML produced.\n\t\t *\n\t\t * The following hooks will be run:\n\t\t * 1. `before-tokenize`\n\t\t * 2. `after-tokenize`\n\t\t * 3. `wrap`: On each {@link Token}.\n\t\t *\n\t\t * @param {string} text A string with the code to be highlighted.\n\t\t * @param {Grammar} grammar An object containing the tokens to use.\n\t\t *\n\t\t * Usually a language definition like `Prism.languages.markup`.\n\t\t * @param {string} language The name of the language definition passed to `grammar`.\n\t\t * @returns {string} The highlighted HTML.\n\t\t * @memberof Prism\n\t\t * @public\n\t\t * @example\n\t\t * Prism.highlight('var foo = true;', Prism.languages.javascript, 'javascript');\n\t\t */\n\t\thighlight: function (text, grammar, language) {\n\t\t\tvar env = {\n\t\t\t\tcode: text,\n\t\t\t\tgrammar: grammar,\n\t\t\t\tlanguage: language\n\t\t\t};\n\t\t\t_.hooks.run('before-tokenize', env);\n\t\t\tif (!env.grammar) {\n\t\t\t\tthrow new Error('The language \"' + env.language + '\" has no grammar.');\n\t\t\t}\n\t\t\tenv.tokens = _.tokenize(env.code, env.grammar);\n\t\t\t_.hooks.run('after-tokenize', env);\n\t\t\treturn Token.stringify(_.util.encode(env.tokens), env.language);\n\t\t},\n\n\t\t/**\n\t\t * This is the heart of Prism, and the most low-level function you can use. It accepts a string of text as input\n\t\t * and the language definitions to use, and returns an array with the tokenized code.\n\t\t *\n\t\t * When the language definition includes nested tokens, the function is called recursively on each of these tokens.\n\t\t *\n\t\t * This method could be useful in other contexts as well, as a very crude parser.\n\t\t *\n\t\t * @param {string} text A string with the code to be highlighted.\n\t\t * @param {Grammar} grammar An object containing the tokens to use.\n\t\t *\n\t\t * Usually a language definition like `Prism.languages.markup`.\n\t\t * @returns {TokenStream} An array of strings and tokens, a token stream.\n\t\t * @memberof Prism\n\t\t * @public\n\t\t * @example\n\t\t * let code = `var foo = 0;`;\n\t\t * let tokens = Prism.tokenize(code, Prism.languages.javascript);\n\t\t * tokens.forEach(token => {\n\t\t *     if (token instanceof Prism.Token && token.type === 'number') {\n\t\t *         console.log(`Found numeric literal: ${token.content}`);\n\t\t *     }\n\t\t * });\n\t\t */\n\t\ttokenize: function (text, grammar) {\n\t\t\tvar rest = grammar.rest;\n\t\t\tif (rest) {\n\t\t\t\tfor (var token in rest) {\n\t\t\t\t\tgrammar[token] = rest[token];\n\t\t\t\t}\n\n\t\t\t\tdelete grammar.rest;\n\t\t\t}\n\n\t\t\tvar tokenList = new LinkedList();\n\t\t\taddAfter(tokenList, tokenList.head, text);\n\n\t\t\tmatchGrammar(text, tokenList, grammar, tokenList.head, 0);\n\n\t\t\treturn toArray(tokenList);\n\t\t},\n\n\t\t/**\n\t\t * @namespace\n\t\t * @memberof Prism\n\t\t * @public\n\t\t */\n\t\thooks: {\n\t\t\tall: {},\n\n\t\t\t/**\n\t\t\t * Adds the given callback to the list of callbacks for the given hook.\n\t\t\t *\n\t\t\t * The callback will be invoked when the hook it is registered for is run.\n\t\t\t * Hooks are usually directly run by a highlight function but you can also run hooks yourself.\n\t\t\t *\n\t\t\t * One callback function can be registered to multiple hooks and the same hook multiple times.\n\t\t\t *\n\t\t\t * @param {string} name The name of the hook.\n\t\t\t * @param {HookCallback} callback The callback function which is given environment variables.\n\t\t\t * @public\n\t\t\t */\n\t\t\tadd: function (name, callback) {\n\t\t\t\tvar hooks = _.hooks.all;\n\n\t\t\t\thooks[name] = hooks[name] || [];\n\n\t\t\t\thooks[name].push(callback);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Runs a hook invoking all registered callbacks with the given environment variables.\n\t\t\t *\n\t\t\t * Callbacks will be invoked synchronously and in the order in which they were registered.\n\t\t\t *\n\t\t\t * @param {string} name The name of the hook.\n\t\t\t * @param {Object<string, any>} env The environment variables of the hook passed to all callbacks registered.\n\t\t\t * @public\n\t\t\t */\n\t\t\trun: function (name, env) {\n\t\t\t\tvar callbacks = _.hooks.all[name];\n\n\t\t\t\tif (!callbacks || !callbacks.length) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0, callback; (callback = callbacks[i++]);) {\n\t\t\t\t\tcallback(env);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tToken: Token\n\t};\n\t_self.Prism = _;\n\n\n\t// Typescript note:\n\t// The following can be used to import the Token type in JSDoc:\n\t//\n\t//   @typedef {InstanceType<import(\"./prism-core\")[\"Token\"]>} Token\n\n\t/**\n\t * Creates a new token.\n\t *\n\t * @param {string} type See {@link Token#type type}\n\t * @param {string | TokenStream} content See {@link Token#content content}\n\t * @param {string|string[]} [alias] The alias(es) of the token.\n\t * @param {string} [matchedStr=\"\"] A copy of the full string this token was created from.\n\t * @class\n\t * @global\n\t * @public\n\t */\n\tfunction Token(type, content, alias, matchedStr) {\n\t\t/**\n\t\t * The type of the token.\n\t\t *\n\t\t * This is usually the key of a pattern in a {@link Grammar}.\n\t\t *\n\t\t * @type {string}\n\t\t * @see GrammarToken\n\t\t * @public\n\t\t */\n\t\tthis.type = type;\n\t\t/**\n\t\t * The strings or tokens contained by this token.\n\t\t *\n\t\t * This will be a token stream if the pattern matched also defined an `inside` grammar.\n\t\t *\n\t\t * @type {string | TokenStream}\n\t\t * @public\n\t\t */\n\t\tthis.content = content;\n\t\t/**\n\t\t * The alias(es) of the token.\n\t\t *\n\t\t * @type {string|string[]}\n\t\t * @see GrammarToken\n\t\t * @public\n\t\t */\n\t\tthis.alias = alias;\n\t\t// Copy of the full string this token was created from\n\t\tthis.length = (matchedStr || '').length | 0;\n\t}\n\n\t/**\n\t * A token stream is an array of strings and {@link Token Token} objects.\n\t *\n\t * Token streams have to fulfill a few properties that are assumed by most functions (mostly internal ones) that process\n\t * them.\n\t *\n\t * 1. No adjacent strings.\n\t * 2. No empty strings.\n\t *\n\t *    The only exception here is the token stream that only contains the empty string and nothing else.\n\t *\n\t * @typedef {Array<string | Token>} TokenStream\n\t * @global\n\t * @public\n\t */\n\n\t/**\n\t * Converts the given token or token stream to an HTML representation.\n\t *\n\t * The following hooks will be run:\n\t * 1. `wrap`: On each {@link Token}.\n\t *\n\t * @param {string | Token | TokenStream} o The token or token stream to be converted.\n\t * @param {string} language The name of current language.\n\t * @returns {string} The HTML representation of the token or token stream.\n\t * @memberof Token\n\t * @static\n\t */\n\tToken.stringify = function stringify(o, language) {\n\t\tif (typeof o == 'string') {\n\t\t\treturn o;\n\t\t}\n\t\tif (Array.isArray(o)) {\n\t\t\tvar s = '';\n\t\t\to.forEach(function (e) {\n\t\t\t\ts += stringify(e, language);\n\t\t\t});\n\t\t\treturn s;\n\t\t}\n\n\t\tvar env = {\n\t\t\ttype: o.type,\n\t\t\tcontent: stringify(o.content, language),\n\t\t\ttag: 'span',\n\t\t\tclasses: ['token', o.type],\n\t\t\tattributes: {},\n\t\t\tlanguage: language\n\t\t};\n\n\t\tvar aliases = o.alias;\n\t\tif (aliases) {\n\t\t\tif (Array.isArray(aliases)) {\n\t\t\t\tArray.prototype.push.apply(env.classes, aliases);\n\t\t\t} else {\n\t\t\t\tenv.classes.push(aliases);\n\t\t\t}\n\t\t}\n\n\t\t_.hooks.run('wrap', env);\n\n\t\tvar attributes = '';\n\t\tfor (var name in env.attributes) {\n\t\t\tattributes += ' ' + name + '=\"' + (env.attributes[name] || '').replace(/\"/g, '&quot;') + '\"';\n\t\t}\n\n\t\treturn '<' + env.tag + ' class=\"' + env.classes.join(' ') + '\"' + attributes + '>' + env.content + '</' + env.tag + '>';\n\t};\n\n\t/**\n\t * @param {RegExp} pattern\n\t * @param {number} pos\n\t * @param {string} text\n\t * @param {boolean} lookbehind\n\t * @returns {RegExpExecArray | null}\n\t */\n\tfunction matchPattern(pattern, pos, text, lookbehind) {\n\t\tpattern.lastIndex = pos;\n\t\tvar match = pattern.exec(text);\n\t\tif (match && lookbehind && match[1]) {\n\t\t\t// change the match to remove the text matched by the Prism lookbehind group\n\t\t\tvar lookbehindLength = match[1].length;\n\t\t\tmatch.index += lookbehindLength;\n\t\t\tmatch[0] = match[0].slice(lookbehindLength);\n\t\t}\n\t\treturn match;\n\t}\n\n\t/**\n\t * @param {string} text\n\t * @param {LinkedList<string | Token>} tokenList\n\t * @param {any} grammar\n\t * @param {LinkedListNode<string | Token>} startNode\n\t * @param {number} startPos\n\t * @param {RematchOptions} [rematch]\n\t * @returns {void}\n\t * @private\n\t *\n\t * @typedef RematchOptions\n\t * @property {string} cause\n\t * @property {number} reach\n\t */\n\tfunction matchGrammar(text, tokenList, grammar, startNode, startPos, rematch) {\n\t\tfor (var token in grammar) {\n\t\t\tif (!grammar.hasOwnProperty(token) || !grammar[token]) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar patterns = grammar[token];\n\t\t\tpatterns = Array.isArray(patterns) ? patterns : [patterns];\n\n\t\t\tfor (var j = 0; j < patterns.length; ++j) {\n\t\t\t\tif (rematch && rematch.cause == token + ',' + j) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar patternObj = patterns[j];\n\t\t\t\tvar inside = patternObj.inside;\n\t\t\t\tvar lookbehind = !!patternObj.lookbehind;\n\t\t\t\tvar greedy = !!patternObj.greedy;\n\t\t\t\tvar alias = patternObj.alias;\n\n\t\t\t\tif (greedy && !patternObj.pattern.global) {\n\t\t\t\t\t// Without the global flag, lastIndex won't work\n\t\t\t\t\tvar flags = patternObj.pattern.toString().match(/[imsuy]*$/)[0];\n\t\t\t\t\tpatternObj.pattern = RegExp(patternObj.pattern.source, flags + 'g');\n\t\t\t\t}\n\n\t\t\t\t/** @type {RegExp} */\n\t\t\t\tvar pattern = patternObj.pattern || patternObj;\n\n\t\t\t\tfor ( // iterate the token list and keep track of the current token/string position\n\t\t\t\t\tvar currentNode = startNode.next, pos = startPos;\n\t\t\t\t\tcurrentNode !== tokenList.tail;\n\t\t\t\t\tpos += currentNode.value.length, currentNode = currentNode.next\n\t\t\t\t) {\n\n\t\t\t\t\tif (rematch && pos >= rematch.reach) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar str = currentNode.value;\n\n\t\t\t\t\tif (tokenList.length > text.length) {\n\t\t\t\t\t\t// Something went terribly wrong, ABORT, ABORT!\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (str instanceof Token) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar removeCount = 1; // this is the to parameter of removeBetween\n\t\t\t\t\tvar match;\n\n\t\t\t\t\tif (greedy) {\n\t\t\t\t\t\tmatch = matchPattern(pattern, pos, text, lookbehind);\n\t\t\t\t\t\tif (!match || match.index >= text.length) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar from = match.index;\n\t\t\t\t\t\tvar to = match.index + match[0].length;\n\t\t\t\t\t\tvar p = pos;\n\n\t\t\t\t\t\t// find the node that contains the match\n\t\t\t\t\t\tp += currentNode.value.length;\n\t\t\t\t\t\twhile (from >= p) {\n\t\t\t\t\t\t\tcurrentNode = currentNode.next;\n\t\t\t\t\t\t\tp += currentNode.value.length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// adjust pos (and p)\n\t\t\t\t\t\tp -= currentNode.value.length;\n\t\t\t\t\t\tpos = p;\n\n\t\t\t\t\t\t// the current node is a Token, then the match starts inside another Token, which is invalid\n\t\t\t\t\t\tif (currentNode.value instanceof Token) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// find the last node which is affected by this match\n\t\t\t\t\t\tfor (\n\t\t\t\t\t\t\tvar k = currentNode;\n\t\t\t\t\t\t\tk !== tokenList.tail && (p < to || typeof k.value === 'string');\n\t\t\t\t\t\t\tk = k.next\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tremoveCount++;\n\t\t\t\t\t\t\tp += k.value.length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tremoveCount--;\n\n\t\t\t\t\t\t// replace with the new match\n\t\t\t\t\t\tstr = text.slice(pos, p);\n\t\t\t\t\t\tmatch.index -= pos;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmatch = matchPattern(pattern, 0, str, lookbehind);\n\t\t\t\t\t\tif (!match) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// eslint-disable-next-line no-redeclare\n\t\t\t\t\tvar from = match.index;\n\t\t\t\t\tvar matchStr = match[0];\n\t\t\t\t\tvar before = str.slice(0, from);\n\t\t\t\t\tvar after = str.slice(from + matchStr.length);\n\n\t\t\t\t\tvar reach = pos + str.length;\n\t\t\t\t\tif (rematch && reach > rematch.reach) {\n\t\t\t\t\t\trematch.reach = reach;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar removeFrom = currentNode.prev;\n\n\t\t\t\t\tif (before) {\n\t\t\t\t\t\tremoveFrom = addAfter(tokenList, removeFrom, before);\n\t\t\t\t\t\tpos += before.length;\n\t\t\t\t\t}\n\n\t\t\t\t\tremoveRange(tokenList, removeFrom, removeCount);\n\n\t\t\t\t\tvar wrapped = new Token(token, inside ? _.tokenize(matchStr, inside) : matchStr, alias, matchStr);\n\t\t\t\t\tcurrentNode = addAfter(tokenList, removeFrom, wrapped);\n\n\t\t\t\t\tif (after) {\n\t\t\t\t\t\taddAfter(tokenList, currentNode, after);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (removeCount > 1) {\n\t\t\t\t\t\t// at least one Token object was removed, so we have to do some rematching\n\t\t\t\t\t\t// this can only happen if the current pattern is greedy\n\n\t\t\t\t\t\t/** @type {RematchOptions} */\n\t\t\t\t\t\tvar nestedRematch = {\n\t\t\t\t\t\t\tcause: token + ',' + j,\n\t\t\t\t\t\t\treach: reach\n\t\t\t\t\t\t};\n\t\t\t\t\t\tmatchGrammar(text, tokenList, grammar, currentNode.prev, pos, nestedRematch);\n\n\t\t\t\t\t\t// the reach might have been extended because of the rematching\n\t\t\t\t\t\tif (rematch && nestedRematch.reach > rematch.reach) {\n\t\t\t\t\t\t\trematch.reach = nestedRematch.reach;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @typedef LinkedListNode\n\t * @property {T} value\n\t * @property {LinkedListNode<T> | null} prev The previous node.\n\t * @property {LinkedListNode<T> | null} next The next node.\n\t * @template T\n\t * @private\n\t */\n\n\t/**\n\t * @template T\n\t * @private\n\t */\n\tfunction LinkedList() {\n\t\t/** @type {LinkedListNode<T>} */\n\t\tvar head = { value: null, prev: null, next: null };\n\t\t/** @type {LinkedListNode<T>} */\n\t\tvar tail = { value: null, prev: head, next: null };\n\t\thead.next = tail;\n\n\t\t/** @type {LinkedListNode<T>} */\n\t\tthis.head = head;\n\t\t/** @type {LinkedListNode<T>} */\n\t\tthis.tail = tail;\n\t\tthis.length = 0;\n\t}\n\n\t/**\n\t * Adds a new node with the given value to the list.\n\t *\n\t * @param {LinkedList<T>} list\n\t * @param {LinkedListNode<T>} node\n\t * @param {T} value\n\t * @returns {LinkedListNode<T>} The added node.\n\t * @template T\n\t */\n\tfunction addAfter(list, node, value) {\n\t\t// assumes that node != list.tail && values.length >= 0\n\t\tvar next = node.next;\n\n\t\tvar newNode = { value: value, prev: node, next: next };\n\t\tnode.next = newNode;\n\t\tnext.prev = newNode;\n\t\tlist.length++;\n\n\t\treturn newNode;\n\t}\n\t/**\n\t * Removes `count` nodes after the given node. The given node will not be removed.\n\t *\n\t * @param {LinkedList<T>} list\n\t * @param {LinkedListNode<T>} node\n\t * @param {number} count\n\t * @template T\n\t */\n\tfunction removeRange(list, node, count) {\n\t\tvar next = node.next;\n\t\tfor (var i = 0; i < count && next !== list.tail; i++) {\n\t\t\tnext = next.next;\n\t\t}\n\t\tnode.next = next;\n\t\tnext.prev = node;\n\t\tlist.length -= i;\n\t}\n\t/**\n\t * @param {LinkedList<T>} list\n\t * @returns {T[]}\n\t * @template T\n\t */\n\tfunction toArray(list) {\n\t\tvar array = [];\n\t\tvar node = list.head.next;\n\t\twhile (node !== list.tail) {\n\t\t\tarray.push(node.value);\n\t\t\tnode = node.next;\n\t\t}\n\t\treturn array;\n\t}\n\n\n\tif (!_self.document) {\n\t\tif (!_self.addEventListener) {\n\t\t\t// in Node.js\n\t\t\treturn _;\n\t\t}\n\n\t\tif (!_.disableWorkerMessageHandler) {\n\t\t\t// In worker\n\t\t\t_self.addEventListener('message', function (evt) {\n\t\t\t\tvar message = JSON.parse(evt.data);\n\t\t\t\tvar lang = message.language;\n\t\t\t\tvar code = message.code;\n\t\t\t\tvar immediateClose = message.immediateClose;\n\n\t\t\t\t_self.postMessage(_.highlight(code, _.languages[lang], lang));\n\t\t\t\tif (immediateClose) {\n\t\t\t\t\t_self.close();\n\t\t\t\t}\n\t\t\t}, false);\n\t\t}\n\n\t\treturn _;\n\t}\n\n\t// Get current script and highlight\n\tvar script = _.util.currentScript();\n\n\tif (script) {\n\t\t_.filename = script.src;\n\n\t\tif (script.hasAttribute('data-manual')) {\n\t\t\t_.manual = true;\n\t\t}\n\t}\n\n\tfunction highlightAutomaticallyCallback() {\n\t\tif (!_.manual) {\n\t\t\t_.highlightAll();\n\t\t}\n\t}\n\n\tif (!_.manual) {\n\t\t// If the document state is \"loading\", then we'll use DOMContentLoaded.\n\t\t// If the document state is \"interactive\" and the prism.js script is deferred, then we'll also use the\n\t\t// DOMContentLoaded event because there might be some plugins or languages which have also been deferred and they\n\t\t// might take longer one animation frame to execute which can create a race condition where only some plugins have\n\t\t// been loaded when Prism.highlightAll() is executed, depending on how fast resources are loaded.\n\t\t// See https://github.com/PrismJS/prism/issues/2102\n\t\tvar readyState = document.readyState;\n\t\tif (readyState === 'loading' || readyState === 'interactive' && script && script.defer) {\n\t\t\tdocument.addEventListener('DOMContentLoaded', highlightAutomaticallyCallback);\n\t\t} else {\n\t\t\tif (window.requestAnimationFrame) {\n\t\t\t\twindow.requestAnimationFrame(highlightAutomaticallyCallback);\n\t\t\t} else {\n\t\t\t\twindow.setTimeout(highlightAutomaticallyCallback, 16);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn _;\n\n}(_self));\n\nif (typeof module !== 'undefined' && module.exports) {\n\tmodule.exports = Prism;\n}\n\n// hack for components to work correctly in node.js\nif (typeof global !== 'undefined') {\n\tglobal.Prism = Prism;\n}\n\n// some additional documentation/types\n\n/**\n * The expansion of a simple `RegExp` literal to support additional properties.\n *\n * @typedef GrammarToken\n * @property {RegExp} pattern The regular expression of the token.\n * @property {boolean} [lookbehind=false] If `true`, then the first capturing group of `pattern` will (effectively)\n * behave as a lookbehind group meaning that the captured text will not be part of the matched text of the new token.\n * @property {boolean} [greedy=false] Whether the token is greedy.\n * @property {string|string[]} [alias] An optional alias or list of aliases.\n * @property {Grammar} [inside] The nested grammar of this token.\n *\n * The `inside` grammar will be used to tokenize the text value of each token of this kind.\n *\n * This can be used to make nested and even recursive language definitions.\n *\n * Note: This can cause infinite recursion. Be careful when you embed different languages or even the same language into\n * each another.\n * @global\n * @public\n */\n\n/**\n * @typedef Grammar\n * @type {Object<string, RegExp | GrammarToken | Array<RegExp | GrammarToken>>}\n * @property {Grammar} [rest] An optional grammar object that will be appended to this grammar.\n * @global\n * @public\n */\n\n/**\n * A function which will invoked after an element was successfully highlighted.\n *\n * @callback HighlightCallback\n * @param {Element} element The element successfully highlighted.\n * @returns {void}\n * @global\n * @public\n */\n\n/**\n * @callback HookCallback\n * @param {Object<string, any>} env The environment variables of the hook.\n * @returns {void}\n * @global\n * @public\n */\n\n\n/* **********************************************\n     Begin prism-markup.js\n********************************************** */\n\nPrism.languages.markup = {\n\t'comment': {\n\t\tpattern: /<!--(?:(?!<!--)[\\s\\S])*?-->/,\n\t\tgreedy: true\n\t},\n\t'prolog': {\n\t\tpattern: /<\\?[\\s\\S]+?\\?>/,\n\t\tgreedy: true\n\t},\n\t'doctype': {\n\t\t// https://www.w3.org/TR/xml/#NT-doctypedecl\n\t\tpattern: /<!DOCTYPE(?:[^>\"'[\\]]|\"[^\"]*\"|'[^']*')+(?:\\[(?:[^<\"'\\]]|\"[^\"]*\"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\\]\\s*)?>/i,\n\t\tgreedy: true,\n\t\tinside: {\n\t\t\t'internal-subset': {\n\t\t\t\tpattern: /(^[^\\[]*\\[)[\\s\\S]+(?=\\]>$)/,\n\t\t\t\tlookbehind: true,\n\t\t\t\tgreedy: true,\n\t\t\t\tinside: null // see below\n\t\t\t},\n\t\t\t'string': {\n\t\t\t\tpattern: /\"[^\"]*\"|'[^']*'/,\n\t\t\t\tgreedy: true\n\t\t\t},\n\t\t\t'punctuation': /^<!|>$|[[\\]]/,\n\t\t\t'doctype-tag': /^DOCTYPE/i,\n\t\t\t'name': /[^\\s<>'\"]+/\n\t\t}\n\t},\n\t'cdata': {\n\t\tpattern: /<!\\[CDATA\\[[\\s\\S]*?\\]\\]>/i,\n\t\tgreedy: true\n\t},\n\t'tag': {\n\t\tpattern: /<\\/?(?!\\d)[^\\s>\\/=$<%]+(?:\\s(?:\\s*[^\\s>\\/=]+(?:\\s*=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+(?=[\\s>]))|(?=[\\s/>])))+)?\\s*\\/?>/,\n\t\tgreedy: true,\n\t\tinside: {\n\t\t\t'tag': {\n\t\t\t\tpattern: /^<\\/?[^\\s>\\/]+/,\n\t\t\t\tinside: {\n\t\t\t\t\t'punctuation': /^<\\/?/,\n\t\t\t\t\t'namespace': /^[^\\s>\\/:]+:/\n\t\t\t\t}\n\t\t\t},\n\t\t\t'special-attr': [],\n\t\t\t'attr-value': {\n\t\t\t\tpattern: /=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+)/,\n\t\t\t\tinside: {\n\t\t\t\t\t'punctuation': [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpattern: /^=/,\n\t\t\t\t\t\t\talias: 'attr-equals'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpattern: /^(\\s*)[\"']|[\"']$/,\n\t\t\t\t\t\t\tlookbehind: true\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t},\n\t\t\t'punctuation': /\\/?>/,\n\t\t\t'attr-name': {\n\t\t\t\tpattern: /[^\\s>\\/]+/,\n\t\t\t\tinside: {\n\t\t\t\t\t'namespace': /^[^\\s>\\/:]+:/\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t},\n\t'entity': [\n\t\t{\n\t\t\tpattern: /&[\\da-z]{1,8};/i,\n\t\t\talias: 'named-entity'\n\t\t},\n\t\t/&#x?[\\da-f]{1,8};/i\n\t]\n};\n\nPrism.languages.markup['tag'].inside['attr-value'].inside['entity'] =\n\tPrism.languages.markup['entity'];\nPrism.languages.markup['doctype'].inside['internal-subset'].inside = Prism.languages.markup;\n\n// Plugin to make entity title show the real entity, idea by Roman Komarov\nPrism.hooks.add('wrap', function (env) {\n\n\tif (env.type === 'entity') {\n\t\tenv.attributes['title'] = env.content.replace(/&amp;/, '&');\n\t}\n});\n\nObject.defineProperty(Prism.languages.markup.tag, 'addInlined', {\n\t/**\n\t * Adds an inlined language to markup.\n\t *\n\t * An example of an inlined language is CSS with `<style>` tags.\n\t *\n\t * @param {string} tagName The name of the tag that contains the inlined language. This name will be treated as\n\t * case insensitive.\n\t * @param {string} lang The language key.\n\t * @example\n\t * addInlined('style', 'css');\n\t */\n\tvalue: function addInlined(tagName, lang) {\n\t\tvar includedCdataInside = {};\n\t\tincludedCdataInside['language-' + lang] = {\n\t\t\tpattern: /(^<!\\[CDATA\\[)[\\s\\S]+?(?=\\]\\]>$)/i,\n\t\t\tlookbehind: true,\n\t\t\tinside: Prism.languages[lang]\n\t\t};\n\t\tincludedCdataInside['cdata'] = /^<!\\[CDATA\\[|\\]\\]>$/i;\n\n\t\tvar inside = {\n\t\t\t'included-cdata': {\n\t\t\t\tpattern: /<!\\[CDATA\\[[\\s\\S]*?\\]\\]>/i,\n\t\t\t\tinside: includedCdataInside\n\t\t\t}\n\t\t};\n\t\tinside['language-' + lang] = {\n\t\t\tpattern: /[\\s\\S]+/,\n\t\t\tinside: Prism.languages[lang]\n\t\t};\n\n\t\tvar def = {};\n\t\tdef[tagName] = {\n\t\t\tpattern: RegExp(/(<__[^>]*>)(?:<!\\[CDATA\\[(?:[^\\]]|\\](?!\\]>))*\\]\\]>|(?!<!\\[CDATA\\[)[\\s\\S])*?(?=<\\/__>)/.source.replace(/__/g, function () { return tagName; }), 'i'),\n\t\t\tlookbehind: true,\n\t\t\tgreedy: true,\n\t\t\tinside: inside\n\t\t};\n\n\t\tPrism.languages.insertBefore('markup', 'cdata', def);\n\t}\n});\nObject.defineProperty(Prism.languages.markup.tag, 'addAttribute', {\n\t/**\n\t * Adds an pattern to highlight languages embedded in HTML attributes.\n\t *\n\t * An example of an inlined language is CSS with `style` attributes.\n\t *\n\t * @param {string} attrName The name of the tag that contains the inlined language. This name will be treated as\n\t * case insensitive.\n\t * @param {string} lang The language key.\n\t * @example\n\t * addAttribute('style', 'css');\n\t */\n\tvalue: function (attrName, lang) {\n\t\tPrism.languages.markup.tag.inside['special-attr'].push({\n\t\t\tpattern: RegExp(\n\t\t\t\t/(^|[\"'\\s])/.source + '(?:' + attrName + ')' + /\\s*=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+(?=[\\s>]))/.source,\n\t\t\t\t'i'\n\t\t\t),\n\t\t\tlookbehind: true,\n\t\t\tinside: {\n\t\t\t\t'attr-name': /^[^\\s=]+/,\n\t\t\t\t'attr-value': {\n\t\t\t\t\tpattern: /=[\\s\\S]+/,\n\t\t\t\t\tinside: {\n\t\t\t\t\t\t'value': {\n\t\t\t\t\t\t\tpattern: /(^=\\s*([\"']|(?![\"'])))\\S[\\s\\S]*(?=\\2$)/,\n\t\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\t\talias: [lang, 'language-' + lang],\n\t\t\t\t\t\t\tinside: Prism.languages[lang]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'punctuation': [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpattern: /^=/,\n\t\t\t\t\t\t\t\talias: 'attr-equals'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t/\"|'/\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n});\n\nPrism.languages.html = Prism.languages.markup;\nPrism.languages.mathml = Prism.languages.markup;\nPrism.languages.svg = Prism.languages.markup;\n\nPrism.languages.xml = Prism.languages.extend('markup', {});\nPrism.languages.ssml = Prism.languages.xml;\nPrism.languages.atom = Prism.languages.xml;\nPrism.languages.rss = Prism.languages.xml;\n\n\n/* **********************************************\n     Begin prism-css.js\n********************************************** */\n\n(function (Prism) {\n\n\tvar string = /(?:\"(?:\\\\(?:\\r\\n|[\\s\\S])|[^\"\\\\\\r\\n])*\"|'(?:\\\\(?:\\r\\n|[\\s\\S])|[^'\\\\\\r\\n])*')/;\n\n\tPrism.languages.css = {\n\t\t'comment': /\\/\\*[\\s\\S]*?\\*\\//,\n\t\t'atrule': {\n\t\t\tpattern: RegExp('@[\\\\w-](?:' + /[^;{\\s\"']|\\s+(?!\\s)/.source + '|' + string.source + ')*?' + /(?:;|(?=\\s*\\{))/.source),\n\t\t\tinside: {\n\t\t\t\t'rule': /^@[\\w-]+/,\n\t\t\t\t'selector-function-argument': {\n\t\t\t\t\tpattern: /(\\bselector\\s*\\(\\s*(?![\\s)]))(?:[^()\\s]|\\s+(?![\\s)])|\\((?:[^()]|\\([^()]*\\))*\\))+(?=\\s*\\))/,\n\t\t\t\t\tlookbehind: true,\n\t\t\t\t\talias: 'selector'\n\t\t\t\t},\n\t\t\t\t'keyword': {\n\t\t\t\t\tpattern: /(^|[^\\w-])(?:and|not|only|or)(?![\\w-])/,\n\t\t\t\t\tlookbehind: true\n\t\t\t\t}\n\t\t\t\t// See rest below\n\t\t\t}\n\t\t},\n\t\t'url': {\n\t\t\t// https://drafts.csswg.org/css-values-3/#urls\n\t\t\tpattern: RegExp('\\\\burl\\\\((?:' + string.source + '|' + /(?:[^\\\\\\r\\n()\"']|\\\\[\\s\\S])*/.source + ')\\\\)', 'i'),\n\t\t\tgreedy: true,\n\t\t\tinside: {\n\t\t\t\t'function': /^url/i,\n\t\t\t\t'punctuation': /^\\(|\\)$/,\n\t\t\t\t'string': {\n\t\t\t\t\tpattern: RegExp('^' + string.source + '$'),\n\t\t\t\t\talias: 'url'\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t'selector': {\n\t\t\tpattern: RegExp('(^|[{}\\\\s])[^{}\\\\s](?:[^{};\"\\'\\\\s]|\\\\s+(?![\\\\s{])|' + string.source + ')*(?=\\\\s*\\\\{)'),\n\t\t\tlookbehind: true\n\t\t},\n\t\t'string': {\n\t\t\tpattern: string,\n\t\t\tgreedy: true\n\t\t},\n\t\t'property': {\n\t\t\tpattern: /(^|[^-\\w\\xA0-\\uFFFF])(?!\\s)[-_a-z\\xA0-\\uFFFF](?:(?!\\s)[-\\w\\xA0-\\uFFFF])*(?=\\s*:)/i,\n\t\t\tlookbehind: true\n\t\t},\n\t\t'important': /!important\\b/i,\n\t\t'function': {\n\t\t\tpattern: /(^|[^-a-z0-9])[-a-z0-9]+(?=\\()/i,\n\t\t\tlookbehind: true\n\t\t},\n\t\t'punctuation': /[(){};:,]/\n\t};\n\n\tPrism.languages.css['atrule'].inside.rest = Prism.languages.css;\n\n\tvar markup = Prism.languages.markup;\n\tif (markup) {\n\t\tmarkup.tag.addInlined('style', 'css');\n\t\tmarkup.tag.addAttribute('style', 'css');\n\t}\n\n}(Prism));\n\n\n/* **********************************************\n     Begin prism-clike.js\n********************************************** */\n\nPrism.languages.clike = {\n\t'comment': [\n\t\t{\n\t\t\tpattern: /(^|[^\\\\])\\/\\*[\\s\\S]*?(?:\\*\\/|$)/,\n\t\t\tlookbehind: true,\n\t\t\tgreedy: true\n\t\t},\n\t\t{\n\t\t\tpattern: /(^|[^\\\\:])\\/\\/.*/,\n\t\t\tlookbehind: true,\n\t\t\tgreedy: true\n\t\t}\n\t],\n\t'string': {\n\t\tpattern: /([\"'])(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\1)[^\\\\\\r\\n])*\\1/,\n\t\tgreedy: true\n\t},\n\t'class-name': {\n\t\tpattern: /(\\b(?:class|extends|implements|instanceof|interface|new|trait)\\s+|\\bcatch\\s+\\()[\\w.\\\\]+/i,\n\t\tlookbehind: true,\n\t\tinside: {\n\t\t\t'punctuation': /[.\\\\]/\n\t\t}\n\t},\n\t'keyword': /\\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\\b/,\n\t'boolean': /\\b(?:false|true)\\b/,\n\t'function': /\\b\\w+(?=\\()/,\n\t'number': /\\b0x[\\da-f]+\\b|(?:\\b\\d+(?:\\.\\d*)?|\\B\\.\\d+)(?:e[+-]?\\d+)?/i,\n\t'operator': /[<>]=?|[!=]=?=?|--?|\\+\\+?|&&?|\\|\\|?|[?*/~^%]/,\n\t'punctuation': /[{}[\\];(),.:]/\n};\n\n\n/* **********************************************\n     Begin prism-javascript.js\n********************************************** */\n\nPrism.languages.javascript = Prism.languages.extend('clike', {\n\t'class-name': [\n\t\tPrism.languages.clike['class-name'],\n\t\t{\n\t\t\tpattern: /(^|[^$\\w\\xA0-\\uFFFF])(?!\\s)[_$A-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\.(?:constructor|prototype))/,\n\t\t\tlookbehind: true\n\t\t}\n\t],\n\t'keyword': [\n\t\t{\n\t\t\tpattern: /((?:^|\\})\\s*)catch\\b/,\n\t\t\tlookbehind: true\n\t\t},\n\t\t{\n\t\t\tpattern: /(^|[^.]|\\.\\.\\.\\s*)\\b(?:as|assert(?=\\s*\\{)|async(?=\\s*(?:function\\b|\\(|[$\\w\\xA0-\\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\\s*(?:\\{|$))|for|from(?=\\s*(?:['\"]|$))|function|(?:get|set)(?=\\s*(?:[#\\[$\\w\\xA0-\\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\\b/,\n\t\t\tlookbehind: true\n\t\t},\n\t],\n\t// Allow for all non-ASCII characters (See http://stackoverflow.com/a/2008444)\n\t'function': /#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*(?:\\.\\s*(?:apply|bind|call)\\s*)?\\()/,\n\t'number': {\n\t\tpattern: RegExp(\n\t\t\t/(^|[^\\w$])/.source +\n\t\t\t'(?:' +\n\t\t\t(\n\t\t\t\t// constant\n\t\t\t\t/NaN|Infinity/.source +\n\t\t\t\t'|' +\n\t\t\t\t// binary integer\n\t\t\t\t/0[bB][01]+(?:_[01]+)*n?/.source +\n\t\t\t\t'|' +\n\t\t\t\t// octal integer\n\t\t\t\t/0[oO][0-7]+(?:_[0-7]+)*n?/.source +\n\t\t\t\t'|' +\n\t\t\t\t// hexadecimal integer\n\t\t\t\t/0[xX][\\dA-Fa-f]+(?:_[\\dA-Fa-f]+)*n?/.source +\n\t\t\t\t'|' +\n\t\t\t\t// decimal bigint\n\t\t\t\t/\\d+(?:_\\d+)*n/.source +\n\t\t\t\t'|' +\n\t\t\t\t// decimal number (integer or float) but no bigint\n\t\t\t\t/(?:\\d+(?:_\\d+)*(?:\\.(?:\\d+(?:_\\d+)*)?)?|\\.\\d+(?:_\\d+)*)(?:[Ee][+-]?\\d+(?:_\\d+)*)?/.source\n\t\t\t) +\n\t\t\t')' +\n\t\t\t/(?![\\w$])/.source\n\t\t),\n\t\tlookbehind: true\n\t},\n\t'operator': /--|\\+\\+|\\*\\*=?|=>|&&=?|\\|\\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\\.{3}|\\?\\?=?|\\?\\.?|[~:]/\n});\n\nPrism.languages.javascript['class-name'][0].pattern = /(\\b(?:class|extends|implements|instanceof|interface|new)\\s+)[\\w.\\\\]+/;\n\nPrism.languages.insertBefore('javascript', 'keyword', {\n\t'regex': {\n\t\tpattern: RegExp(\n\t\t\t// lookbehind\n\t\t\t// eslint-disable-next-line regexp/no-dupe-characters-character-class\n\t\t\t/((?:^|[^$\\w\\xA0-\\uFFFF.\"'\\])\\s]|\\b(?:return|yield))\\s*)/.source +\n\t\t\t// Regex pattern:\n\t\t\t// There are 2 regex patterns here. The RegExp set notation proposal added support for nested character\n\t\t\t// classes if the `v` flag is present. Unfortunately, nested CCs are both context-free and incompatible\n\t\t\t// with the only syntax, so we have to define 2 different regex patterns.\n\t\t\t/\\//.source +\n\t\t\t'(?:' +\n\t\t\t/(?:\\[(?:[^\\]\\\\\\r\\n]|\\\\.)*\\]|\\\\.|[^/\\\\\\[\\r\\n])+\\/[dgimyus]{0,7}/.source +\n\t\t\t'|' +\n\t\t\t// `v` flag syntax. This supports 3 levels of nested character classes.\n\t\t\t/(?:\\[(?:[^[\\]\\\\\\r\\n]|\\\\.|\\[(?:[^[\\]\\\\\\r\\n]|\\\\.|\\[(?:[^[\\]\\\\\\r\\n]|\\\\.)*\\])*\\])*\\]|\\\\.|[^/\\\\\\[\\r\\n])+\\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source +\n\t\t\t')' +\n\t\t\t// lookahead\n\t\t\t/(?=(?:\\s|\\/\\*(?:[^*]|\\*(?!\\/))*\\*\\/)*(?:$|[\\r\\n,.;:})\\]]|\\/\\/))/.source\n\t\t),\n\t\tlookbehind: true,\n\t\tgreedy: true,\n\t\tinside: {\n\t\t\t'regex-source': {\n\t\t\t\tpattern: /^(\\/)[\\s\\S]+(?=\\/[a-z]*$)/,\n\t\t\t\tlookbehind: true,\n\t\t\t\talias: 'language-regex',\n\t\t\t\tinside: Prism.languages.regex\n\t\t\t},\n\t\t\t'regex-delimiter': /^\\/|\\/$/,\n\t\t\t'regex-flags': /^[a-z]+$/,\n\t\t}\n\t},\n\t// This must be declared before keyword because we use \"function\" inside the look-forward\n\t'function-variable': {\n\t\tpattern: /#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*[=:]\\s*(?:async\\s*)?(?:\\bfunction\\b|(?:\\((?:[^()]|\\([^()]*\\))*\\)|(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*)\\s*=>))/,\n\t\talias: 'function'\n\t},\n\t'parameter': [\n\t\t{\n\t\t\tpattern: /(function(?:\\s+(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*)?\\s*\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\))/,\n\t\t\tlookbehind: true,\n\t\t\tinside: Prism.languages.javascript\n\t\t},\n\t\t{\n\t\t\tpattern: /(^|[^$\\w\\xA0-\\uFFFF])(?!\\s)[_$a-z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*=>)/i,\n\t\t\tlookbehind: true,\n\t\t\tinside: Prism.languages.javascript\n\t\t},\n\t\t{\n\t\t\tpattern: /(\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\)\\s*=>)/,\n\t\t\tlookbehind: true,\n\t\t\tinside: Prism.languages.javascript\n\t\t},\n\t\t{\n\t\t\tpattern: /((?:\\b|\\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\\w\\xA0-\\uFFFF]))(?:(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*\\s*)\\(\\s*|\\]\\s*\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\)\\s*\\{)/,\n\t\t\tlookbehind: true,\n\t\t\tinside: Prism.languages.javascript\n\t\t}\n\t],\n\t'constant': /\\b[A-Z](?:[A-Z_]|\\dx?)*\\b/\n});\n\nPrism.languages.insertBefore('javascript', 'string', {\n\t'hashbang': {\n\t\tpattern: /^#!.*/,\n\t\tgreedy: true,\n\t\talias: 'comment'\n\t},\n\t'template-string': {\n\t\tpattern: /`(?:\\\\[\\s\\S]|\\$\\{(?:[^{}]|\\{(?:[^{}]|\\{[^}]*\\})*\\})+\\}|(?!\\$\\{)[^\\\\`])*`/,\n\t\tgreedy: true,\n\t\tinside: {\n\t\t\t'template-punctuation': {\n\t\t\t\tpattern: /^`|`$/,\n\t\t\t\talias: 'string'\n\t\t\t},\n\t\t\t'interpolation': {\n\t\t\t\tpattern: /((?:^|[^\\\\])(?:\\\\{2})*)\\$\\{(?:[^{}]|\\{(?:[^{}]|\\{[^}]*\\})*\\})+\\}/,\n\t\t\t\tlookbehind: true,\n\t\t\t\tinside: {\n\t\t\t\t\t'interpolation-punctuation': {\n\t\t\t\t\t\tpattern: /^\\$\\{|\\}$/,\n\t\t\t\t\t\talias: 'punctuation'\n\t\t\t\t\t},\n\t\t\t\t\trest: Prism.languages.javascript\n\t\t\t\t}\n\t\t\t},\n\t\t\t'string': /[\\s\\S]+/\n\t\t}\n\t},\n\t'string-property': {\n\t\tpattern: /((?:^|[,{])[ \\t]*)([\"'])(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\2)[^\\\\\\r\\n])*\\2(?=\\s*:)/m,\n\t\tlookbehind: true,\n\t\tgreedy: true,\n\t\talias: 'property'\n\t}\n});\n\nPrism.languages.insertBefore('javascript', 'operator', {\n\t'literal-property': {\n\t\tpattern: /((?:^|[,{])[ \\t]*)(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*:)/m,\n\t\tlookbehind: true,\n\t\talias: 'property'\n\t},\n});\n\nif (Prism.languages.markup) {\n\tPrism.languages.markup.tag.addInlined('script', 'javascript');\n\n\t// add attribute support for all DOM events.\n\t// https://developer.mozilla.org/en-US/docs/Web/Events#Standard_events\n\tPrism.languages.markup.tag.addAttribute(\n\t\t/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,\n\t\t'javascript'\n\t);\n}\n\nPrism.languages.js = Prism.languages.javascript;\n\n\n/* **********************************************\n     Begin prism-file-highlight.js\n********************************************** */\n\n(function () {\n\n\tif (typeof Prism === 'undefined' || typeof document === 'undefined') {\n\t\treturn;\n\t}\n\n\t// https://developer.mozilla.org/en-US/docs/Web/API/Element/matches#Polyfill\n\tif (!Element.prototype.matches) {\n\t\tElement.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n\t}\n\n\tvar LOADING_MESSAGE = 'Loading\u2026';\n\tvar FAILURE_MESSAGE = function (status, message) {\n\t\treturn '\u2716 Error ' + status + ' while fetching file: ' + message;\n\t};\n\tvar FAILURE_EMPTY_MESSAGE = '\u2716 Error: File does not exist or is empty';\n\n\tvar EXTENSIONS = {\n\t\t'js': 'javascript',\n\t\t'py': 'python',\n\t\t'rb': 'ruby',\n\t\t'ps1': 'powershell',\n\t\t'psm1': 'powershell',\n\t\t'sh': 'bash',\n\t\t'bat': 'batch',\n\t\t'h': 'c',\n\t\t'tex': 'latex'\n\t};\n\n\tvar STATUS_ATTR = 'data-src-status';\n\tvar STATUS_LOADING = 'loading';\n\tvar STATUS_LOADED = 'loaded';\n\tvar STATUS_FAILED = 'failed';\n\n\tvar SELECTOR = 'pre[data-src]:not([' + STATUS_ATTR + '=\"' + STATUS_LOADED + '\"])'\n\t\t+ ':not([' + STATUS_ATTR + '=\"' + STATUS_LOADING + '\"])';\n\n\t/**\n\t * Loads the given file.\n\t *\n\t * @param {string} src The URL or path of the source file to load.\n\t * @param {(result: string) => void} success\n\t * @param {(reason: string) => void} error\n\t */\n\tfunction loadFile(src, success, error) {\n\t\tvar xhr = new XMLHttpRequest();\n\t\txhr.open('GET', src, true);\n\t\txhr.onreadystatechange = function () {\n\t\t\tif (xhr.readyState == 4) {\n\t\t\t\tif (xhr.status < 400 && xhr.responseText) {\n\t\t\t\t\tsuccess(xhr.responseText);\n\t\t\t\t} else {\n\t\t\t\t\tif (xhr.status >= 400) {\n\t\t\t\t\t\terror(FAILURE_MESSAGE(xhr.status, xhr.statusText));\n\t\t\t\t\t} else {\n\t\t\t\t\t\terror(FAILURE_EMPTY_MESSAGE);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\txhr.send(null);\n\t}\n\n\t/**\n\t * Parses the given range.\n\t *\n\t * This returns a range with inclusive ends.\n\t *\n\t * @param {string | null | undefined} range\n\t * @returns {[number, number | undefined] | undefined}\n\t */\n\tfunction parseRange(range) {\n\t\tvar m = /^\\s*(\\d+)\\s*(?:(,)\\s*(?:(\\d+)\\s*)?)?$/.exec(range || '');\n\t\tif (m) {\n\t\t\tvar start = Number(m[1]);\n\t\t\tvar comma = m[2];\n\t\t\tvar end = m[3];\n\n\t\t\tif (!comma) {\n\t\t\t\treturn [start, start];\n\t\t\t}\n\t\t\tif (!end) {\n\t\t\t\treturn [start, undefined];\n\t\t\t}\n\t\t\treturn [start, Number(end)];\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tPrism.hooks.add('before-highlightall', function (env) {\n\t\tenv.selector += ', ' + SELECTOR;\n\t});\n\n\tPrism.hooks.add('before-sanity-check', function (env) {\n\t\tvar pre = /** @type {HTMLPreElement} */ (env.element);\n\t\tif (pre.matches(SELECTOR)) {\n\t\t\tenv.code = ''; // fast-path the whole thing and go to complete\n\n\t\t\tpre.setAttribute(STATUS_ATTR, STATUS_LOADING); // mark as loading\n\n\t\t\t// add code element with loading message\n\t\t\tvar code = pre.appendChild(document.createElement('CODE'));\n\t\t\tcode.textContent = LOADING_MESSAGE;\n\n\t\t\tvar src = pre.getAttribute('data-src');\n\n\t\t\tvar language = env.language;\n\t\t\tif (language === 'none') {\n\t\t\t\t// the language might be 'none' because there is no language set;\n\t\t\t\t// in this case, we want to use the extension as the language\n\t\t\t\tvar extension = (/\\.(\\w+)$/.exec(src) || [, 'none'])[1];\n\t\t\t\tlanguage = EXTENSIONS[extension] || extension;\n\t\t\t}\n\n\t\t\t// set language classes\n\t\t\tPrism.util.setLanguage(code, language);\n\t\t\tPrism.util.setLanguage(pre, language);\n\n\t\t\t// preload the language\n\t\t\tvar autoloader = Prism.plugins.autoloader;\n\t\t\tif (autoloader) {\n\t\t\t\tautoloader.loadLanguages(language);\n\t\t\t}\n\n\t\t\t// load file\n\t\t\tloadFile(\n\t\t\t\tsrc,\n\t\t\t\tfunction (text) {\n\t\t\t\t\t// mark as loaded\n\t\t\t\t\tpre.setAttribute(STATUS_ATTR, STATUS_LOADED);\n\n\t\t\t\t\t// handle data-range\n\t\t\t\t\tvar range = parseRange(pre.getAttribute('data-range'));\n\t\t\t\t\tif (range) {\n\t\t\t\t\t\tvar lines = text.split(/\\r\\n?|\\n/g);\n\n\t\t\t\t\t\t// the range is one-based and inclusive on both ends\n\t\t\t\t\t\tvar start = range[0];\n\t\t\t\t\t\tvar end = range[1] == null ? lines.length : range[1];\n\n\t\t\t\t\t\tif (start < 0) { start += lines.length; }\n\t\t\t\t\t\tstart = Math.max(0, Math.min(start - 1, lines.length));\n\t\t\t\t\t\tif (end < 0) { end += lines.length; }\n\t\t\t\t\t\tend = Math.max(0, Math.min(end, lines.length));\n\n\t\t\t\t\t\ttext = lines.slice(start, end).join('\\n');\n\n\t\t\t\t\t\t// add data-start for line numbers\n\t\t\t\t\t\tif (!pre.hasAttribute('data-start')) {\n\t\t\t\t\t\t\tpre.setAttribute('data-start', String(start + 1));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// highlight code\n\t\t\t\t\tcode.textContent = text;\n\t\t\t\t\tPrism.highlightElement(code);\n\t\t\t\t},\n\t\t\t\tfunction (error) {\n\t\t\t\t\t// mark as failed\n\t\t\t\t\tpre.setAttribute(STATUS_ATTR, STATUS_FAILED);\n\n\t\t\t\t\tcode.textContent = error;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t});\n\n\tPrism.plugins.fileHighlight = {\n\t\t/**\n\t\t * Executes the File Highlight plugin for all matching `pre` elements under the given container.\n\t\t *\n\t\t * Note: Elements which are already loaded or currently loading will not be touched by this method.\n\t\t *\n\t\t * @param {ParentNode} [container=document]\n\t\t */\n\t\thighlight: function highlight(container) {\n\t\t\tvar elements = (container || document).querySelectorAll(SELECTOR);\n\n\t\t\tfor (var i = 0, element; (element = elements[i++]);) {\n\t\t\t\tPrism.highlightElement(element);\n\t\t\t}\n\t\t}\n\t};\n\n\tvar logged = false;\n\t/** @deprecated Use `Prism.plugins.fileHighlight.highlight` instead. */\n\tPrism.fileHighlight = function () {\n\t\tif (!logged) {\n\t\t\tconsole.warn('Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead.');\n\t\t\tlogged = true;\n\t\t}\n\t\tPrism.plugins.fileHighlight.highlight.apply(this, arguments);\n\t};\n\n}());\n", "/* \n * utilty for use with demo version of transmission \n * create a customs options picker and set class entries on the <site> element to reflect the picked option\n *\n * the behaviour of the options is determined by demo.js\n * \n * to enable this functionality, use code injection to insert a data-demo-site attribute to root of the doc\n *      <script>\n *          document.documentElement.setAttribute('data-demo-site', 'true');\n *      </script>\n*/\n\nexport function demoOptionsPicker() {\n    const demoSite = document.querySelector('[data-demo-site=\"true\"] .site');\n    const downloadIcon =`<svg viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\"><g id=\"SVGRepo_bgCarrier\" stroke-width=\"0\"></g><g id=\"SVGRepo_tracerCarrier\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></g><g id=\"SVGRepo_iconCarrier\"> <title></title> <g id=\"Complete\"> <g id=\"download\"> <g> <path d=\"M3,12.3v7a2,2,0,0,0,2,2H19a2,2,0,0,0,2-2v-7\" fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"></path> <g> <polyline data-name=\"Right\" fill=\"none\" id=\"Right-2\" points=\"7.9 12.3 12 16.3 16.1 12.3\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"></polyline> <line fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" x1=\"12\" x2=\"12\" y1=\"2.7\" y2=\"14.2\"></line> </g> </g> </g> </g> </g></svg>`;\n    const gearIcon = `<svg viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\"><g id=\"SVGRepo_bgCarrier\" stroke-width=\"0\"></g><g id=\"SVGRepo_tracerCarrier\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></g><g id=\"SVGRepo_iconCarrier\"> <path stroke=\"currentColor\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19.19 3.757A1 1 0 0018.22 3h-4.44a1 1 0 00-.97.757l-.66 2.644a1 1 0 01-.47.623l-1.291.747a1 1 0 01-.776.095l-2.62-.75a1 1 0 00-1.142.462l-2.219 3.844a1 1 0 00.171 1.219l1.96 1.895a1 1 0 01.305.719v1.49a1 1 0 01-.305.72l-1.96 1.894a1 1 0 00-.17 1.22l2.218 3.843a1 1 0 001.141.461l2.61-.746a1 1 0 01.793.106l.963.584a1 1 0 01.43.54l.984 2.95a1 1 0 00.949.683h4.558a1 1 0 00.949-.684l.982-2.947a1 1 0 01.435-.542l.982-.587a1 1 0 01.79-.103l2.59.745a1 1 0 001.142-.461l2.222-3.848a1 1 0 00-.166-1.214l-1.933-1.896a1 1 0 01-.3-.713v-1.5a1 1 0 01.3-.713l1.933-1.896a1 1 0 00.166-1.214l-2.222-3.848a1 1 0 00-1.142-.46l-2.6.747a1 1 0 01-.774-.093l-1.31-.75a1 1 0 01-.474-.625l-.66-2.64z\"></path> <circle cx=\"16\" cy=\"16\" r=\"5\" stroke=\"currentColor\" stroke-linejoin=\"round\" stroke-width=\"2\"></circle> </g></svg>`;\n    const downloadURL = `https://github.com/nickabs/transmission/releases/latest/download/transmission.zip`;\n    if (!demoSite) {\n        return false;\n    }\n\n    const classAlternatives = {\n        // list of the custom options \n        siteWide: {\n            navBarStyle: ['expanded-nav', 'minified-nav'],\n            navBarOption: ['fixed-navigation-bar' , 'scrolling-navigation-bar'],\n            heroStyle: ['hero-style-plain', 'hero-style-color-image', 'hero-style-grayscale-image'],\n            sidebarOption: ['sidebar-top','sidebar-left', 'sidebar-right', 'sidebar-bottom' , 'sidebar-none'],\n            footerOption: [ 'footer-style-all', 'footer-style-copyright-privacy', 'footer-style-copyright', 'footer-style-privacy',\n                'footer-style-ghost-theme', 'footer-style-ghost', 'footer-style-none' ],\n            enrolOption: ['newsletter','subscribe','newsletter-subscribe','enrol-none'],\n            authorOption: ['show-author-names', 'show-author-images', 'show-author-names-and-images', \n                    'show-author-none']\n        },\n        homePage: {\n            focusPosition: ['home-page-list', 'home-page-focus-right', 'home-page-focus-left'],\n            highlightFeaturedArticles: [ 'highlight-featured-articles', 'standard-featured-articles' ]\n        },\n        post: {\n            tableOfContentsOption: ['post-toc-full','post-toc-minified','post-toc-none'],\n            relatedPostsOption: ['show-related-posts', 'hide-related-posts'],\n            oneTimePaymentRequest: ['show-payment-request', 'hide-payment-request']\n        }\n    };\n    \n    function updateSiteClass(property, className) {\n        const section = Object.values(classAlternatives).find(section => property in section);\n        if (!section) return false;\n    \n        const validClasses = section[property];\n        if (!validClasses.includes(className)) {\n            console.error(`Invalid class name: ${className} for property: ${property}`);\n            return false;\n        }\n    \n        //remove the class option previously selected and add the new one\n        validClasses.forEach(cls => demoSite.classList.remove(cls));\n        demoSite.classList.add(className);\n        return true;\n    }\n\n\n    function createDemoOptions() {\n        const demoOptions = document.createElement('aside');\n        demoOptions.classList.add('demo-options','options-picker-closed');\n\n        const demoOptionsButton = document.createElement('button');\n        demoOptionsButton.innerHTML = `\n            ${gearIcon}\n            <div class=\"demo-options-button-description\">Customise</div>\n        `;\n\n        demoOptionsButton.classList.add('icon','demo-options-button')\n        demoOptions.appendChild(demoOptionsButton);\n\n        demoOptionsButton.addEventListener('click', () => {\n            console.log('click');\n            demoOptions.classList.toggle('options-picker-closed');\n        });\n\n\n        const optionsPickerContainer = createOptionsPickerContainer();\n        demoOptions.appendChild(optionsPickerContainer);\n\n        const hr = document.createElement('hr');\n        demoOptions.appendChild(hr);\n\n        const downloadLink = document.createElement('a');\n        downloadLink.href= `${downloadURL}`\n        downloadLink.classList.add('icon','download-link')\n        downloadLink.innerHTML = `\n            ${downloadIcon}\n            <div class=\"download-button-description\">Download theme</div>\n        `;\n\n        //<a href=\"path/to/yourfile.pdf\" download class=\"download-link\">Download File</a>\n        demoOptions.appendChild(downloadLink);\n\n        return demoOptions;\n    }\n\n    function createOptionsPickerContainer() {\n        const container = document.createElement('div');\n        container.classList.add('options-picker-container');\n\n        const form = document.createElement('form');\n        form.classList = 'options-picker-form';\n    \n        // Create fieldsets for each section (siteWide, home, page)\n        Object.entries(classAlternatives).forEach(([sectionName, properties]) => {\n\n            const fieldset = document.createElement('fieldset');\n            fieldset.classList.add('form-fieldset');\n\n            const legend = document.createElement('legend');\n\n            const pretifiedSectionName = sectionName.charAt(0).toUpperCase() + sectionName.slice(1).replace(/([A-Z])/g, ' $1');\n\n            legend.textContent = pretifiedSectionName + ' Options'; \n            \n            fieldset.appendChild(legend);\n\n            /*\n             * Create form groups for each option (navBarStyle, heroStyle ...) in this section\n             *  <form>\n             *      <label>nav bar style</label>\n             *      <select>\n             *          <option>expanded-nav</option>\n             *          ...\n            */\n            \n            Object.entries(properties).forEach(([property, options]) => {\n                const formGroup = document.createElement('div');\n                formGroup.classList.add('form-group');\n    \n                const label = document.createElement('label');\n                label.setAttribute('for', property);\n                label.classList.add('form-label');\n                label.textContent = property.replace(/([A-Z])/g, ' $1').toLowerCase();\n    \n                const select = document.createElement('select');\n                select.id = property;\n                select.classList.add('form-select');\n                select.name = property;\n\n                let placeholderOption = document.createElement('option');\n                placeholderOption.value=\"\"\n                placeholderOption.selected = true; \n                placeholderOption.disabled = true; \n                placeholderOption.textContent = `Select ${\"aeiou\".includes(label.textContent.charAt(0).toLowerCase()) ? \"an\" : \"a\"} ${label.textContent}`;\n\n                select.appendChild(placeholderOption);\n    \n                options.forEach(optionValue => {\n                    const option = document.createElement('option');\n                    option.value = optionValue;\n                    option.textContent = optionValue;\n                    select.appendChild(option);\n                });\n    \n                select.addEventListener('change', function() {\n                    updateSiteClass(property, this.value);\n                });\n\n                formGroup.appendChild(label);\n                formGroup.appendChild(select);\n                fieldset.appendChild(formGroup);\n            });\n    \n            const details = document.createElement('details')\n            details.open = false;\n\n            const summary = document.createElement('summary')\n            summary.textContent = `${pretifiedSectionName.toLowerCase()} options`\n\n            details.appendChild(summary);\n            details.appendChild(fieldset)\n            form.appendChild(details);\n\n            // only show one open section of the options at a time\n            details.querySelector('summary').addEventListener('click', (e) => {\n                document.querySelectorAll('.demo-options details').forEach(d => {\n                if (d !== details) d.open = false;\n                });\n            });\n\n        });\n    \n        container.appendChild(form);\n        return container;\n    }\n    \n    const demoOptions = createDemoOptions();\n    demoSite.appendChild(demoOptions);\n}\n", "/* copy link button (copies link and shows a tooltip)  */\nexport function copyLink() {\n  const copyLinkElement = document.querySelector(\".copy-link\");\n  const sidebar = document.querySelector(\".sidebar\")\n\n  if (!copyLinkElement || !sidebar) return;\n\n  const handleCopyLinkClick = () => {\n    // Write the current URL to the clipboard\n    navigator.clipboard.writeText(window.location.href).then(() => {\n      const tooltip = document.createElement('div');\n      tooltip.className = 'tooltip';\n      tooltip.textContent = 'Copied!';\n      sidebar.appendChild(tooltip);\n      console.log(copyLinkElement);\n      setTimeout(() => tooltip.remove(), 500);\n    });\n  };\n\n  copyLinkElement.addEventListener(\"click\", handleCopyLinkClick);\n}\n", "/*\n * toggle between dark and light mode\n * if the user has set a system preference then default to that setting\n * if they specify a setting using the site dark/light mode buttons, save it in local storage so it is remembered next time\n * \n*/\nexport function darkModeToggle() {\n    const darkModeButton = document.querySelector(\"button.dark-mode\");\n    const lightModeButton = document.querySelector(\"button.light-mode\");\n\n    if (! darkModeButton || ! lightModeButton) {\n        return;\n    }\n\n    const icons = document.querySelectorAll('.internal-tags .sidebar-link-icon'); // sidebar icons need to be updated according to the color scheme preference\n    const storedDataColorScheme = localStorage.getItem('data-color-scheme');\n    const systemSchemePreference = window.matchMedia(\"(prefers-color-scheme: dark)\").matches ? \"dark\" : \"light\";\n\n    document.documentElement.setAttribute('data-color-scheme', storedDataColorScheme || systemSchemePreference);\n\n    /* \n     * where an svg icon is loaded externally, e.g in the sidebar, \n     * we have to update the svg paths to reflect the selected color scheme \n     */\n    function updateIconColor() {\n        // get current setting\n        const fillColor = getComputedStyle(document.documentElement).getPropertyValue('--icon-color').trim();\n        if (!icons) return;\n\n        icons.forEach(icon => {\n            const svgDoc = icon.contentDocument;\n            if (!svgDoc) return; \n\n            const elements = svgDoc.querySelectorAll('path, circle, rect, ellipse');\n            \n            elements.forEach(element => {\n                element.setAttribute('fill', fillColor);\n                element.setAttribute('stroke', fillColor);\n            });\n        });\n    }\n\n    function onClick(event) {\n        var currentScheme = document.documentElement.getAttribute(\"data-color-scheme\");\n        var targetDataColorScheme = currentScheme == \"dark\" ? \"light\" : \"dark\";\n\n        document.documentElement.setAttribute('data-color-scheme', targetDataColorScheme)\n\n        localStorage.setItem('data-color-scheme', targetDataColorScheme);\n\n        // set color-scheme on the comments iframe\n        // As of 5.0 Ghost helper supports {{comments mode=\"auto\" }} which will use the background color to determine if the theme is using a dark mode\n        // ... but this only works after a screen refresh.  The code below will make the scheme change on clicking the dark mode toggle\n        const commentsScript = document.querySelector('script[data-color-scheme]');\n        if (commentsScript) {\n            commentsScript.setAttribute('data-color-scheme', targetDataColorScheme);\n        };\n\n        /* update the sidebar icons */\n        updateIconColor();\n    }\n\n    darkModeButton.addEventListener('click', onClick);\n    lightModeButton.addEventListener('click', onClick);\n\n  }", "/* this function will open a pop-up window asking the user to check their inbox having enrolled for a newsletter\n* as of 2024/09 this is only required for newsletter registrations.  When using the portal/sign-up feature \n* Ghost automatically opens a similar window\n*/\nexport function enrolDialogModal() {\n    const dialog = document.querySelector(\".enrol-dialog\");\n    const closeButton = document.querySelector(\".enrol-dialog-button\");\n    const form = document.querySelector(\"form.enrol-newsletter\");\n\n    if (dialog && closeButton) {\n        closeButton.addEventListener(\"click\", () => {\n            dialog.close();\n            dialog.style.display = \"none\"; \n        });\n    }\n\n    if (form) {\n        const observer = new MutationObserver((mutations) => {\n            for (const mutation of mutations) {\n                if (mutation.attributeName === \"class\" && mutation.target.classList.contains(\"success\")) {\n                    dialog.showModal();\n                    dialog.style.display = \"flex\";\n                    break; \n                }\n            }\n        });\n        observer.observe(form, { attributes: true, attributeFilter: [\"class\"] });\n    }\n};\n", "/** @typedef {import('../photoswipe.js').Point} Point */\r\n\r\n/**\r\n * @template {keyof HTMLElementTagNameMap} T\r\n * @param {string} className\r\n * @param {T} tagName\r\n * @param {Node} [appendToEl]\r\n * @returns {HTMLElementTagNameMap[T]}\r\n */\r\nexport function createElement(className, tagName, appendToEl) {\r\n  const el = document.createElement(tagName);\r\n  if (className) {\r\n    el.className = className;\r\n  }\r\n  if (appendToEl) {\r\n    appendToEl.appendChild(el);\r\n  }\r\n  return el;\r\n}\r\n\r\n/**\r\n * @param {Point} p1\r\n * @param {Point} p2\r\n * @returns {Point}\r\n */\r\nexport function equalizePoints(p1, p2) {\r\n  p1.x = p2.x;\r\n  p1.y = p2.y;\r\n  if (p2.id !== undefined) {\r\n    p1.id = p2.id;\r\n  }\r\n  return p1;\r\n}\r\n\r\n/**\r\n * @param {Point} p\r\n */\r\nexport function roundPoint(p) {\r\n  p.x = Math.round(p.x);\r\n  p.y = Math.round(p.y);\r\n}\r\n\r\n/**\r\n * Returns distance between two points.\r\n *\r\n * @param {Point} p1\r\n * @param {Point} p2\r\n * @returns {number}\r\n */\r\nexport function getDistanceBetween(p1, p2) {\r\n  const x = Math.abs(p1.x - p2.x);\r\n  const y = Math.abs(p1.y - p2.y);\r\n  return Math.sqrt((x * x) + (y * y));\r\n}\r\n\r\n/**\r\n * Whether X and Y positions of points are equal\r\n *\r\n * @param {Point} p1\r\n * @param {Point} p2\r\n * @returns {boolean}\r\n */\r\nexport function pointsEqual(p1, p2) {\r\n  return p1.x === p2.x && p1.y === p2.y;\r\n}\r\n\r\n/**\r\n * The float result between the min and max values.\r\n *\r\n * @param {number} val\r\n * @param {number} min\r\n * @param {number} max\r\n * @returns {number}\r\n */\r\nexport function clamp(val, min, max) {\r\n  return Math.min(Math.max(val, min), max);\r\n}\r\n\r\n/**\r\n * Get transform string\r\n *\r\n * @param {number} x\r\n * @param {number} [y]\r\n * @param {number} [scale]\r\n * @returns {string}\r\n */\r\nexport function toTransformString(x, y, scale) {\r\n  let propValue = `translate3d(${x}px,${y || 0}px,0)`;\r\n\r\n  if (scale !== undefined) {\r\n    propValue += ` scale3d(${scale},${scale},1)`;\r\n  }\r\n\r\n  return propValue;\r\n}\r\n\r\n/**\r\n * Apply transform:translate(x, y) scale(scale) to element\r\n *\r\n * @param {HTMLElement} el\r\n * @param {number} x\r\n * @param {number} [y]\r\n * @param {number} [scale]\r\n */\r\nexport function setTransform(el, x, y, scale) {\r\n  el.style.transform = toTransformString(x, y, scale);\r\n}\r\n\r\nconst defaultCSSEasing = 'cubic-bezier(.4,0,.22,1)';\r\n\r\n/**\r\n * Apply CSS transition to element\r\n *\r\n * @param {HTMLElement} el\r\n * @param {string} [prop] CSS property to animate\r\n * @param {number} [duration] in ms\r\n * @param {string} [ease] CSS easing function\r\n */\r\nexport function setTransitionStyle(el, prop, duration, ease) {\r\n  // inOut: 'cubic-bezier(.4, 0, .22, 1)', // for \"toggle state\" transitions\r\n  // out: 'cubic-bezier(0, 0, .22, 1)', // for \"show\" transitions\r\n  // in: 'cubic-bezier(.4, 0, 1, 1)'// for \"hide\" transitions\r\n  el.style.transition = prop\r\n    ? `${prop} ${duration}ms ${ease || defaultCSSEasing}`\r\n    : 'none';\r\n}\r\n\r\n/**\r\n * Apply width and height CSS properties to element\r\n *\r\n * @param {HTMLElement} el\r\n * @param {string | number} w\r\n * @param {string | number} h\r\n */\r\nexport function setWidthHeight(el, w, h) {\r\n  el.style.width = (typeof w === 'number') ? `${w}px` : w;\r\n  el.style.height = (typeof h === 'number') ? `${h}px` : h;\r\n}\r\n\r\n/**\r\n * @param {HTMLElement} el\r\n */\r\nexport function removeTransitionStyle(el) {\r\n  setTransitionStyle(el);\r\n}\r\n\r\n/**\r\n * @param {HTMLImageElement} img\r\n * @returns {Promise<HTMLImageElement | void>}\r\n */\r\nexport function decodeImage(img) {\r\n  if ('decode' in img) {\r\n    return img.decode().catch(() => {});\r\n  }\r\n\r\n  if (img.complete) {\r\n    return Promise.resolve(img);\r\n  }\r\n\r\n  return new Promise((resolve, reject) => {\r\n    img.onload = () => resolve(img);\r\n    img.onerror = reject;\r\n  });\r\n}\r\n\r\n/** @typedef {LOAD_STATE[keyof LOAD_STATE]} LoadState */\r\n/** @type {{ IDLE: 'idle'; LOADING: 'loading'; LOADED: 'loaded'; ERROR: 'error' }} */\r\nexport const LOAD_STATE = {\r\n  IDLE: 'idle',\r\n  LOADING: 'loading',\r\n  LOADED: 'loaded',\r\n  ERROR: 'error',\r\n};\r\n\r\n\r\n/**\r\n * Check if click or keydown event was dispatched\r\n * with a special key or via mouse wheel.\r\n *\r\n * @param {MouseEvent | KeyboardEvent} e\r\n * @returns {boolean}\r\n */\r\nexport function specialKeyUsed(e) {\r\n  return ('button' in e && e.button === 1) || e.ctrlKey || e.metaKey || e.altKey || e.shiftKey;\r\n}\r\n\r\n/**\r\n * Parse `gallery` or `children` options.\r\n *\r\n * @param {import('../photoswipe.js').ElementProvider} [option]\r\n * @param {string} [legacySelector]\r\n * @param {HTMLElement | Document} [parent]\r\n * @returns HTMLElement[]\r\n */\r\nexport function getElementsFromOption(option, legacySelector, parent = document) {\r\n  /** @type {HTMLElement[]} */\r\n  let elements = [];\r\n\r\n  if (option instanceof Element) {\r\n    elements = [option];\r\n  } else if (option instanceof NodeList || Array.isArray(option)) {\r\n    elements = Array.from(option);\r\n  } else {\r\n    const selector = typeof option === 'string' ? option : legacySelector;\r\n    if (selector) {\r\n      elements = Array.from(parent.querySelectorAll(selector));\r\n    }\r\n  }\r\n\r\n  return elements;\r\n}\r\n\r\n/**\r\n * Check if variable is PhotoSwipe class\r\n *\r\n * @param {any} fn\r\n * @returns {boolean}\r\n */\r\nexport function isPswpClass(fn) {\r\n  return typeof fn === 'function'\r\n    && fn.prototype\r\n    && fn.prototype.goTo;\r\n}\r\n\r\n/**\r\n * Check if browser is Safari\r\n *\r\n * @returns {boolean}\r\n */\r\nexport function isSafari() {\r\n  return !!(navigator.vendor && navigator.vendor.match(/apple/i));\r\n}\r\n\r\n", "/** @typedef {import('../lightbox/lightbox.js').default} PhotoSwipeLightbox */\r\n/** @typedef {import('../photoswipe.js').default} PhotoSwipe */\r\n/** @typedef {import('../photoswipe.js').PhotoSwipeOptions} PhotoSwipeOptions */\r\n/** @typedef {import('../photoswipe.js').DataSource} DataSource */\r\n/** @typedef {import('../ui/ui-element.js').UIElementData} UIElementData */\r\n/** @typedef {import('../slide/content.js').default} ContentDefault */\r\n/** @typedef {import('../slide/slide.js').default} Slide */\r\n/** @typedef {import('../slide/slide.js').SlideData} SlideData */\r\n/** @typedef {import('../slide/zoom-level.js').default} ZoomLevel */\r\n/** @typedef {import('../slide/get-thumb-bounds.js').Bounds} Bounds */\r\n\r\n/**\r\n * Allow adding an arbitrary props to the Content\r\n * https://photoswipe.com/custom-content/#using-webp-image-format\r\n * @typedef {ContentDefault & Record<string, any>} Content\r\n */\r\n/** @typedef {{ x?: number; y?: number }} Point */\r\n\r\n/**\r\n * @typedef {Object} PhotoSwipeEventsMap https://photoswipe.com/events/\r\n *\r\n *\r\n * https://photoswipe.com/adding-ui-elements/\r\n *\r\n * @prop {undefined} uiRegister\r\n * @prop {{ data: UIElementData }} uiElementCreate\r\n *\r\n *\r\n * https://photoswipe.com/events/#initialization-events\r\n *\r\n * @prop {undefined} beforeOpen\r\n * @prop {undefined} firstUpdate\r\n * @prop {undefined} initialLayout\r\n * @prop {undefined} change\r\n * @prop {undefined} afterInit\r\n * @prop {undefined} bindEvents\r\n *\r\n *\r\n * https://photoswipe.com/events/#opening-or-closing-transition-events\r\n *\r\n * @prop {undefined} openingAnimationStart\r\n * @prop {undefined} openingAnimationEnd\r\n * @prop {undefined} closingAnimationStart\r\n * @prop {undefined} closingAnimationEnd\r\n *\r\n *\r\n * https://photoswipe.com/events/#closing-events\r\n *\r\n * @prop {undefined} close\r\n * @prop {undefined} destroy\r\n *\r\n *\r\n * https://photoswipe.com/events/#pointer-and-gesture-events\r\n *\r\n * @prop {{ originalEvent: PointerEvent }} pointerDown\r\n * @prop {{ originalEvent: PointerEvent }} pointerMove\r\n * @prop {{ originalEvent: PointerEvent }} pointerUp\r\n * @prop {{ bgOpacity: number }} pinchClose can be default prevented\r\n * @prop {{ panY: number }} verticalDrag can be default prevented\r\n *\r\n *\r\n * https://photoswipe.com/events/#slide-content-events\r\n *\r\n * @prop {{ content: Content }} contentInit\r\n * @prop {{ content: Content; isLazy: boolean }} contentLoad can be default prevented\r\n * @prop {{ content: Content; isLazy: boolean }} contentLoadImage can be default prevented\r\n * @prop {{ content: Content; slide: Slide; isError?: boolean }} loadComplete\r\n * @prop {{ content: Content; slide: Slide }} loadError\r\n * @prop {{ content: Content; width: number; height: number }} contentResize can be default prevented\r\n * @prop {{ content: Content; width: number; height: number; slide: Slide }} imageSizeChange\r\n * @prop {{ content: Content }} contentLazyLoad can be default prevented\r\n * @prop {{ content: Content }} contentAppend can be default prevented\r\n * @prop {{ content: Content }} contentActivate can be default prevented\r\n * @prop {{ content: Content }} contentDeactivate can be default prevented\r\n * @prop {{ content: Content }} contentRemove can be default prevented\r\n * @prop {{ content: Content }} contentDestroy can be default prevented\r\n *\r\n *\r\n * undocumented\r\n *\r\n * @prop {{ point: Point; originalEvent: PointerEvent }} imageClickAction can be default prevented\r\n * @prop {{ point: Point; originalEvent: PointerEvent }} bgClickAction can be default prevented\r\n * @prop {{ point: Point; originalEvent: PointerEvent }} tapAction can be default prevented\r\n * @prop {{ point: Point; originalEvent: PointerEvent }} doubleTapAction can be default prevented\r\n *\r\n * @prop {{ originalEvent: KeyboardEvent }} keydown can be default prevented\r\n * @prop {{ x: number; dragging: boolean }} moveMainScroll\r\n * @prop {{ slide: Slide }} firstZoomPan\r\n * @prop {{ slide: Slide | undefined, data: SlideData, index: number }} gettingData\r\n * @prop {undefined} beforeResize\r\n * @prop {undefined} resize\r\n * @prop {undefined} viewportSize\r\n * @prop {undefined} updateScrollOffset\r\n * @prop {{ slide: Slide }} slideInit\r\n * @prop {{ slide: Slide }} afterSetContent\r\n * @prop {{ slide: Slide }} slideLoad\r\n * @prop {{ slide: Slide }} appendHeavy can be default prevented\r\n * @prop {{ slide: Slide }} appendHeavyContent\r\n * @prop {{ slide: Slide }} slideActivate\r\n * @prop {{ slide: Slide }} slideDeactivate\r\n * @prop {{ slide: Slide }} slideDestroy\r\n * @prop {{ destZoomLevel: number, centerPoint: Point | undefined, transitionDuration: number | false | undefined }} beforeZoomTo\r\n * @prop {{ slide: Slide }} zoomPanUpdate\r\n * @prop {{ slide: Slide }} initialZoomPan\r\n * @prop {{ slide: Slide }} calcSlideSize\r\n * @prop {undefined} resolutionChanged\r\n * @prop {{ originalEvent: WheelEvent }} wheel can be default prevented\r\n * @prop {{ content: Content }} contentAppendImage can be default prevented\r\n * @prop {{ index: number; itemData: SlideData }} lazyLoadSlide can be default prevented\r\n * @prop {undefined} lazyLoad\r\n * @prop {{ slide: Slide }} calcBounds\r\n * @prop {{ zoomLevels: ZoomLevel, slideData: SlideData }} zoomLevelsUpdate\r\n *\r\n *\r\n * legacy\r\n *\r\n * @prop {undefined} init\r\n * @prop {undefined} initialZoomIn\r\n * @prop {undefined} initialZoomOut\r\n * @prop {undefined} initialZoomInEnd\r\n * @prop {undefined} initialZoomOutEnd\r\n * @prop {{ dataSource: DataSource | undefined, numItems: number }} numItems\r\n * @prop {{ itemData: SlideData; index: number }} itemData\r\n * @prop {{ index: number, itemData: SlideData, instance: PhotoSwipe }} thumbBounds\r\n */\r\n\r\n/**\r\n * @typedef {Object} PhotoSwipeFiltersMap https://photoswipe.com/filters/\r\n *\r\n * @prop {(numItems: number, dataSource: DataSource | undefined) => number} numItems\r\n * Modify the total amount of slides. Example on Data sources page.\r\n * https://photoswipe.com/filters/#numitems\r\n *\r\n * @prop {(itemData: SlideData, index: number) => SlideData} itemData\r\n * Modify slide item data. Example on Data sources page.\r\n * https://photoswipe.com/filters/#itemdata\r\n *\r\n * @prop {(itemData: SlideData, element: HTMLElement, linkEl: HTMLAnchorElement) => SlideData} domItemData\r\n * Modify item data when it's parsed from DOM element. Example on Data sources page.\r\n * https://photoswipe.com/filters/#domitemdata\r\n *\r\n * @prop {(clickedIndex: number, e: MouseEvent, instance: PhotoSwipeLightbox) => number} clickedIndex\r\n * Modify clicked gallery item index.\r\n * https://photoswipe.com/filters/#clickedindex\r\n *\r\n * @prop {(placeholderSrc: string | false, content: Content) => string | false} placeholderSrc\r\n * Modify placeholder image source.\r\n * https://photoswipe.com/filters/#placeholdersrc\r\n *\r\n * @prop {(isContentLoading: boolean, content: Content) => boolean} isContentLoading\r\n * Modify if the content is currently loading.\r\n * https://photoswipe.com/filters/#iscontentloading\r\n *\r\n * @prop {(isContentZoomable: boolean, content: Content) => boolean} isContentZoomable\r\n * Modify if the content can be zoomed.\r\n * https://photoswipe.com/filters/#iscontentzoomable\r\n *\r\n * @prop {(useContentPlaceholder: boolean, content: Content) => boolean} useContentPlaceholder\r\n * Modify if the placeholder should be used for the content.\r\n * https://photoswipe.com/filters/#usecontentplaceholder\r\n *\r\n * @prop {(isKeepingPlaceholder: boolean, content: Content) => boolean} isKeepingPlaceholder\r\n * Modify if the placeholder should be kept after the content is loaded.\r\n * https://photoswipe.com/filters/#iskeepingplaceholder\r\n *\r\n *\r\n * @prop {(contentErrorElement: HTMLElement, content: Content) => HTMLElement} contentErrorElement\r\n * Modify an element when the content has error state (for example, if image cannot be loaded).\r\n * https://photoswipe.com/filters/#contenterrorelement\r\n *\r\n * @prop {(element: HTMLElement, data: UIElementData) => HTMLElement} uiElement\r\n * Modify a UI element that's being created.\r\n * https://photoswipe.com/filters/#uielement\r\n *\r\n * @prop {(thumbnail: HTMLElement | null | undefined, itemData: SlideData, index: number) => HTMLElement} thumbEl\r\n * Modify the thumbnail element from which opening zoom animation starts or ends.\r\n * https://photoswipe.com/filters/#thumbel\r\n *\r\n * @prop {(thumbBounds: Bounds | undefined, itemData: SlideData, index: number) => Bounds} thumbBounds\r\n * Modify the thumbnail bounds from which opening zoom animation starts or ends.\r\n * https://photoswipe.com/filters/#thumbbounds\r\n *\r\n * @prop {(srcsetSizesWidth: number, content: Content) => number} srcsetSizesWidth\r\n *\r\n * @prop {(preventPointerEvent: boolean, event: PointerEvent, pointerType: string) => boolean} preventPointerEvent\r\n *\r\n */\r\n\r\n/**\r\n * @template {keyof PhotoSwipeFiltersMap} T\r\n * @typedef {{ fn: PhotoSwipeFiltersMap[T], priority: number }} Filter\r\n */\r\n\r\n/**\r\n * @template {keyof PhotoSwipeEventsMap} T\r\n * @typedef {PhotoSwipeEventsMap[T] extends undefined ? PhotoSwipeEvent<T> : PhotoSwipeEvent<T> & PhotoSwipeEventsMap[T]} AugmentedEvent\r\n */\r\n\r\n/**\r\n * @template {keyof PhotoSwipeEventsMap} T\r\n * @typedef {(event: AugmentedEvent<T>) => void} EventCallback\r\n */\r\n\r\n/**\r\n * Base PhotoSwipe event object\r\n *\r\n * @template {keyof PhotoSwipeEventsMap} T\r\n */\r\nclass PhotoSwipeEvent {\r\n  /**\r\n   * @param {T} type\r\n   * @param {PhotoSwipeEventsMap[T]} [details]\r\n   */\r\n  constructor(type, details) {\r\n    this.type = type;\r\n    this.defaultPrevented = false;\r\n    if (details) {\r\n      Object.assign(this, details);\r\n    }\r\n  }\r\n\r\n  preventDefault() {\r\n    this.defaultPrevented = true;\r\n  }\r\n}\r\n\r\n/**\r\n * PhotoSwipe base class that can listen and dispatch for events.\r\n * Shared by PhotoSwipe Core and PhotoSwipe Lightbox, extended by base.js\r\n */\r\nclass Eventable {\r\n  constructor() {\r\n    /**\r\n     * @type {{ [T in keyof PhotoSwipeEventsMap]?: ((event: AugmentedEvent<T>) => void)[] }}\r\n     */\r\n    this._listeners = {};\r\n\r\n    /**\r\n     * @type {{ [T in keyof PhotoSwipeFiltersMap]?: Filter<T>[] }}\r\n     */\r\n    this._filters = {};\r\n\r\n    /** @type {PhotoSwipe | undefined} */\r\n    this.pswp = undefined;\r\n\r\n    /** @type {PhotoSwipeOptions | undefined} */\r\n    this.options = undefined;\r\n  }\r\n\r\n  /**\r\n   * @template {keyof PhotoSwipeFiltersMap} T\r\n   * @param {T} name\r\n   * @param {PhotoSwipeFiltersMap[T]} fn\r\n   * @param {number} priority\r\n   */\r\n  addFilter(name, fn, priority = 100) {\r\n    if (!this._filters[name]) {\r\n      this._filters[name] = [];\r\n    }\r\n\r\n    this._filters[name]?.push({ fn, priority });\r\n    this._filters[name]?.sort((f1, f2) => f1.priority - f2.priority);\r\n\r\n    this.pswp?.addFilter(name, fn, priority);\r\n  }\r\n\r\n  /**\r\n   * @template {keyof PhotoSwipeFiltersMap} T\r\n   * @param {T} name\r\n   * @param {PhotoSwipeFiltersMap[T]} fn\r\n   */\r\n  removeFilter(name, fn) {\r\n    if (this._filters[name]) {\r\n      // @ts-expect-error\r\n      this._filters[name] = this._filters[name].filter(filter => (filter.fn !== fn));\r\n    }\r\n\r\n    if (this.pswp) {\r\n      this.pswp.removeFilter(name, fn);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @template {keyof PhotoSwipeFiltersMap} T\r\n   * @param {T} name\r\n   * @param {Parameters<PhotoSwipeFiltersMap[T]>} args\r\n   * @returns {Parameters<PhotoSwipeFiltersMap[T]>[0]}\r\n   */\r\n  applyFilters(name, ...args) {\r\n    this._filters[name]?.forEach((filter) => {\r\n      // @ts-expect-error\r\n      args[0] = filter.fn.apply(this, args);\r\n    });\r\n    return args[0];\r\n  }\r\n\r\n  /**\r\n   * @template {keyof PhotoSwipeEventsMap} T\r\n   * @param {T} name\r\n   * @param {EventCallback<T>} fn\r\n   */\r\n  on(name, fn) {\r\n    if (!this._listeners[name]) {\r\n      this._listeners[name] = [];\r\n    }\r\n    this._listeners[name]?.push(fn);\r\n\r\n    // When binding events to lightbox,\r\n    // also bind events to PhotoSwipe Core,\r\n    // if it's open.\r\n    this.pswp?.on(name, fn);\r\n  }\r\n\r\n  /**\r\n   * @template {keyof PhotoSwipeEventsMap} T\r\n   * @param {T} name\r\n   * @param {EventCallback<T>} fn\r\n   */\r\n  off(name, fn) {\r\n    if (this._listeners[name]) {\r\n      // @ts-expect-error\r\n      this._listeners[name] = this._listeners[name].filter(listener => (fn !== listener));\r\n    }\r\n\r\n    this.pswp?.off(name, fn);\r\n  }\r\n\r\n  /**\r\n   * @template {keyof PhotoSwipeEventsMap} T\r\n   * @param {T} name\r\n   * @param {PhotoSwipeEventsMap[T]} [details]\r\n   * @returns {AugmentedEvent<T>}\r\n   */\r\n  dispatch(name, details) {\r\n    if (this.pswp) {\r\n      return this.pswp.dispatch(name, details);\r\n    }\r\n\r\n    const event = /** @type {AugmentedEvent<T>} */ (new PhotoSwipeEvent(name, details));\r\n\r\n    this._listeners[name]?.forEach((listener) => {\r\n      listener.call(this, event);\r\n    });\r\n\r\n    return event;\r\n  }\r\n}\r\n\r\nexport default Eventable;\r\n", "import { createElement, setWidthHeight, toTransformString } from '../util/util.js';\r\n\r\nclass Placeholder {\r\n  /**\r\n   * @param {string | false} imageSrc\r\n   * @param {HTMLElement} container\r\n   */\r\n  constructor(imageSrc, container) {\r\n    // Create placeholder\r\n    // (stretched thumbnail or simple div behind the main image)\r\n    /** @type {HTMLImageElement | HTMLDivElement | null} */\r\n    this.element = createElement(\r\n      'pswp__img pswp__img--placeholder',\r\n      imageSrc ? 'img' : 'div',\r\n      container\r\n    );\r\n\r\n    if (imageSrc) {\r\n      const imgEl = /** @type {HTMLImageElement} */ (this.element);\r\n      imgEl.decoding = 'async';\r\n      imgEl.alt = '';\r\n      imgEl.src = imageSrc;\r\n      imgEl.setAttribute('role', 'presentation');\r\n    }\r\n\r\n    this.element.setAttribute('aria-hidden', 'true');\r\n  }\r\n\r\n  /**\r\n   * @param {number} width\r\n   * @param {number} height\r\n   */\r\n  setDisplayedSize(width, height) {\r\n    if (!this.element) {\r\n      return;\r\n    }\r\n\r\n    if (this.element.tagName === 'IMG') {\r\n      // Use transform scale() to modify img placeholder size\r\n      // (instead of changing width/height directly).\r\n      // This helps with performance, specifically in iOS15 Safari.\r\n      setWidthHeight(this.element, 250, 'auto');\r\n      this.element.style.transformOrigin = '0 0';\r\n      this.element.style.transform = toTransformString(0, 0, width / 250);\r\n    } else {\r\n      setWidthHeight(this.element, width, height);\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    if (this.element?.parentNode) {\r\n      this.element.remove();\r\n    }\r\n    this.element = null;\r\n  }\r\n}\r\n\r\nexport default Placeholder;\r\n", "import { createElement, isSafari, LOAD_STATE, setWidthHeight } from '../util/util.js';\r\nimport Placeholder from './placeholder.js';\r\n\r\n/** @typedef {import('./slide.js').default} Slide */\r\n/** @typedef {import('./slide.js').SlideData} SlideData */\r\n/** @typedef {import('../core/base.js').default} PhotoSwipeBase */\r\n/** @typedef {import('../util/util.js').LoadState} LoadState */\r\n\r\nclass Content {\r\n  /**\r\n   * @param {SlideData} itemData Slide data\r\n   * @param {PhotoSwipeBase} instance PhotoSwipe or PhotoSwipeLightbox instance\r\n   * @param {number} index\r\n   */\r\n  constructor(itemData, instance, index) {\r\n    this.instance = instance;\r\n    this.data = itemData;\r\n    this.index = index;\r\n\r\n    /** @type {HTMLImageElement | HTMLDivElement | undefined} */\r\n    this.element = undefined;\r\n    /** @type {Placeholder | undefined} */\r\n    this.placeholder = undefined;\r\n    /** @type {Slide | undefined} */\r\n    this.slide = undefined;\r\n\r\n    this.displayedImageWidth = 0;\r\n    this.displayedImageHeight = 0;\r\n\r\n    this.width = Number(this.data.w) || Number(this.data.width) || 0;\r\n    this.height = Number(this.data.h) || Number(this.data.height) || 0;\r\n\r\n    this.isAttached = false;\r\n    this.hasSlide = false;\r\n    this.isDecoding = false;\r\n    /** @type {LoadState} */\r\n    this.state = LOAD_STATE.IDLE;\r\n\r\n    if (this.data.type) {\r\n      this.type = this.data.type;\r\n    } else if (this.data.src) {\r\n      this.type = 'image';\r\n    } else {\r\n      this.type = 'html';\r\n    }\r\n\r\n    this.instance.dispatch('contentInit', { content: this });\r\n  }\r\n\r\n  removePlaceholder() {\r\n    if (this.placeholder && !this.keepPlaceholder()) {\r\n      // With delay, as image might be loaded, but not rendered\r\n      setTimeout(() => {\r\n        if (this.placeholder) {\r\n          this.placeholder.destroy();\r\n          this.placeholder = undefined;\r\n        }\r\n      }, 1000);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Preload content\r\n   *\r\n   * @param {boolean} isLazy\r\n   * @param {boolean} [reload]\r\n   */\r\n  load(isLazy, reload) {\r\n    if (this.slide && this.usePlaceholder()) {\r\n      if (!this.placeholder) {\r\n        const placeholderSrc = this.instance.applyFilters(\r\n          'placeholderSrc',\r\n          // use  image-based placeholder only for the first slide,\r\n          // as rendering (even small stretched thumbnail) is an expensive operation\r\n          (this.data.msrc && this.slide.isFirstSlide) ? this.data.msrc : false,\r\n          this\r\n        );\r\n        this.placeholder = new Placeholder(\r\n          placeholderSrc,\r\n          this.slide.container\r\n        );\r\n      } else {\r\n        const placeholderEl = this.placeholder.element;\r\n        // Add placeholder to DOM if it was already created\r\n        if (placeholderEl && !placeholderEl.parentElement) {\r\n          this.slide.container.prepend(placeholderEl);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.element && !reload) {\r\n      return;\r\n    }\r\n\r\n    if (this.instance.dispatch('contentLoad', { content: this, isLazy }).defaultPrevented) {\r\n      return;\r\n    }\r\n\r\n    if (this.isImageContent()) {\r\n      this.element = createElement('pswp__img', 'img');\r\n      // Start loading only after width is defined, as sizes might depend on it.\r\n      // Due to Safari feature, we must define sizes before srcset.\r\n      if (this.displayedImageWidth) {\r\n        this.loadImage(isLazy);\r\n      }\r\n    } else {\r\n      this.element = createElement('pswp__content', 'div');\r\n      this.element.innerHTML = this.data.html || '';\r\n    }\r\n\r\n    if (reload && this.slide) {\r\n      this.slide.updateContentSize(true);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Preload image\r\n   *\r\n   * @param {boolean} isLazy\r\n   */\r\n  loadImage(isLazy) {\r\n    if (!this.isImageContent()\r\n      || !this.element\r\n      || this.instance.dispatch('contentLoadImage', { content: this, isLazy }).defaultPrevented) {\r\n      return;\r\n    }\r\n\r\n    const imageElement = /** @type HTMLImageElement */ (this.element);\r\n\r\n    this.updateSrcsetSizes();\r\n\r\n    if (this.data.srcset) {\r\n      imageElement.srcset = this.data.srcset;\r\n    }\r\n\r\n    imageElement.src = this.data.src ?? '';\r\n    imageElement.alt = this.data.alt ?? '';\r\n\r\n    this.state = LOAD_STATE.LOADING;\r\n\r\n    if (imageElement.complete) {\r\n      this.onLoaded();\r\n    } else {\r\n      imageElement.onload = () => {\r\n        this.onLoaded();\r\n      };\r\n\r\n      imageElement.onerror = () => {\r\n        this.onError();\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Assign slide to content\r\n   *\r\n   * @param {Slide} slide\r\n   */\r\n  setSlide(slide) {\r\n    this.slide = slide;\r\n    this.hasSlide = true;\r\n    this.instance = slide.pswp;\r\n\r\n    // todo: do we need to unset slide?\r\n  }\r\n\r\n  /**\r\n   * Content load success handler\r\n   */\r\n  onLoaded() {\r\n    this.state = LOAD_STATE.LOADED;\r\n\r\n    if (this.slide && this.element) {\r\n      this.instance.dispatch('loadComplete', { slide: this.slide, content: this });\r\n\r\n      // if content is reloaded\r\n      if (this.slide.isActive\r\n          && this.slide.heavyAppended\r\n          && !this.element.parentNode) {\r\n        this.append();\r\n        this.slide.updateContentSize(true);\r\n      }\r\n\r\n      if (this.state === LOAD_STATE.LOADED || this.state === LOAD_STATE.ERROR) {\r\n        this.removePlaceholder();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Content load error handler\r\n   */\r\n  onError() {\r\n    this.state = LOAD_STATE.ERROR;\r\n\r\n    if (this.slide) {\r\n      this.displayError();\r\n      this.instance.dispatch('loadComplete', { slide: this.slide, isError: true, content: this });\r\n      this.instance.dispatch('loadError', { slide: this.slide, content: this });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @returns {Boolean} If the content is currently loading\r\n   */\r\n  isLoading() {\r\n    return this.instance.applyFilters(\r\n      'isContentLoading',\r\n      this.state === LOAD_STATE.LOADING,\r\n      this\r\n    );\r\n  }\r\n\r\n  /**\r\n   * @returns {Boolean} If the content is in error state\r\n   */\r\n  isError() {\r\n    return this.state === LOAD_STATE.ERROR;\r\n  }\r\n\r\n  /**\r\n   * @returns {boolean} If the content is image\r\n   */\r\n  isImageContent() {\r\n    return this.type === 'image';\r\n  }\r\n\r\n  /**\r\n   * Update content size\r\n   *\r\n   * @param {Number} width\r\n   * @param {Number} height\r\n   */\r\n  setDisplayedSize(width, height) {\r\n    if (!this.element) {\r\n      return;\r\n    }\r\n\r\n    if (this.placeholder) {\r\n      this.placeholder.setDisplayedSize(width, height);\r\n    }\r\n\r\n    if (this.instance.dispatch(\r\n      'contentResize',\r\n      { content: this, width, height }).defaultPrevented\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    setWidthHeight(this.element, width, height);\r\n\r\n    if (this.isImageContent() && !this.isError()) {\r\n      const isInitialSizeUpdate = (!this.displayedImageWidth && width);\r\n\r\n      this.displayedImageWidth = width;\r\n      this.displayedImageHeight = height;\r\n\r\n      if (isInitialSizeUpdate) {\r\n        this.loadImage(false);\r\n      } else {\r\n        this.updateSrcsetSizes();\r\n      }\r\n\r\n      if (this.slide) {\r\n        this.instance.dispatch(\r\n          'imageSizeChange',\r\n          { slide: this.slide, width, height, content: this }\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @returns {boolean} If the content can be zoomed\r\n   */\r\n  isZoomable() {\r\n    return this.instance.applyFilters(\r\n      'isContentZoomable',\r\n      this.isImageContent() && (this.state !== LOAD_STATE.ERROR),\r\n      this\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Update image srcset sizes attribute based on width and height\r\n   */\r\n  updateSrcsetSizes() {\r\n    // Handle srcset sizes attribute.\r\n    //\r\n    // Never lower quality, if it was increased previously.\r\n    // Chrome does this automatically, Firefox and Safari do not,\r\n    // so we store largest used size in dataset.\r\n    if (!this.isImageContent() || !this.element || !this.data.srcset) {\r\n      return;\r\n    }\r\n\r\n    const image = /** @type HTMLImageElement */ (this.element);\r\n    const sizesWidth = this.instance.applyFilters(\r\n      'srcsetSizesWidth',\r\n      this.displayedImageWidth,\r\n      this\r\n    );\r\n\r\n    if (\r\n      !image.dataset.largestUsedSize\r\n      || sizesWidth > parseInt(image.dataset.largestUsedSize, 10)\r\n    ) {\r\n      image.sizes = sizesWidth + 'px';\r\n      image.dataset.largestUsedSize = String(sizesWidth);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @returns {boolean} If content should use a placeholder (from msrc by default)\r\n   */\r\n  usePlaceholder() {\r\n    return this.instance.applyFilters(\r\n      'useContentPlaceholder',\r\n      this.isImageContent(),\r\n      this\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Preload content with lazy-loading param\r\n   */\r\n  lazyLoad() {\r\n    if (this.instance.dispatch('contentLazyLoad', { content: this }).defaultPrevented) {\r\n      return;\r\n    }\r\n\r\n    this.load(true);\r\n  }\r\n\r\n  /**\r\n   * @returns {boolean} If placeholder should be kept after content is loaded\r\n   */\r\n  keepPlaceholder() {\r\n    return this.instance.applyFilters(\r\n      'isKeepingPlaceholder',\r\n      this.isLoading(),\r\n      this\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Destroy the content\r\n   */\r\n  destroy() {\r\n    this.hasSlide = false;\r\n    this.slide = undefined;\r\n\r\n    if (this.instance.dispatch('contentDestroy', { content: this }).defaultPrevented) {\r\n      return;\r\n    }\r\n\r\n    this.remove();\r\n\r\n    if (this.placeholder) {\r\n      this.placeholder.destroy();\r\n      this.placeholder = undefined;\r\n    }\r\n\r\n    if (this.isImageContent() && this.element) {\r\n      this.element.onload = null;\r\n      this.element.onerror = null;\r\n      this.element = undefined;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Display error message\r\n   */\r\n  displayError() {\r\n    if (this.slide) {\r\n      let errorMsgEl = createElement('pswp__error-msg', 'div');\r\n      errorMsgEl.innerText = this.instance.options?.errorMsg ?? '';\r\n      errorMsgEl = /** @type {HTMLDivElement} */ (this.instance.applyFilters(\r\n        'contentErrorElement',\r\n        errorMsgEl,\r\n        this\r\n      ));\r\n      this.element = createElement('pswp__content pswp__error-msg-container', 'div');\r\n      this.element.appendChild(errorMsgEl);\r\n      this.slide.container.innerText = '';\r\n      this.slide.container.appendChild(this.element);\r\n      this.slide.updateContentSize(true);\r\n      this.removePlaceholder();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Append the content\r\n   */\r\n  append() {\r\n    if (this.isAttached || !this.element) {\r\n      return;\r\n    }\r\n\r\n    this.isAttached = true;\r\n\r\n    if (this.state === LOAD_STATE.ERROR) {\r\n      this.displayError();\r\n      return;\r\n    }\r\n\r\n    if (this.instance.dispatch('contentAppend', { content: this }).defaultPrevented) {\r\n      return;\r\n    }\r\n\r\n    const supportsDecode = ('decode' in this.element);\r\n\r\n    if (this.isImageContent()) {\r\n      // Use decode() on nearby slides\r\n      //\r\n      // Nearby slide images are in DOM and not hidden via display:none.\r\n      // However, they are placed offscreen (to the left and right side).\r\n      //\r\n      // Some browsers do not composite the image until it's actually visible,\r\n      // using decode() helps.\r\n      //\r\n      // You might ask \"why dont you just decode() and then append all images\",\r\n      // that's because I want to show image before it's fully loaded,\r\n      // as browser can render parts of image while it is loading.\r\n      // We do not do this in Safari due to partial loading bug.\r\n      if (supportsDecode && this.slide && (!this.slide.isActive || isSafari())) {\r\n        this.isDecoding = true;\r\n        // purposefully using finally instead of then,\r\n        // as if srcset sizes changes dynamically - it may cause decode error\r\n        /** @type {HTMLImageElement} */\r\n        (this.element).decode().catch(() => {}).finally(() => {\r\n          this.isDecoding = false;\r\n          this.appendImage();\r\n        });\r\n      } else {\r\n        this.appendImage();\r\n      }\r\n    } else if (this.slide && !this.element.parentNode) {\r\n      this.slide.container.appendChild(this.element);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Activate the slide,\r\n   * active slide is generally the current one,\r\n   * meaning the user can see it.\r\n   */\r\n  activate() {\r\n    if (this.instance.dispatch('contentActivate', { content: this }).defaultPrevented\r\n      || !this.slide) {\r\n      return;\r\n    }\r\n\r\n    if (this.isImageContent() && this.isDecoding && !isSafari()) {\r\n      // add image to slide when it becomes active,\r\n      // even if it's not finished decoding\r\n      this.appendImage();\r\n    } else if (this.isError()) {\r\n      this.load(false, true); // try to reload\r\n    }\r\n\r\n    if (this.slide.holderElement) {\r\n      this.slide.holderElement.setAttribute('aria-hidden', 'false');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Deactivate the content\r\n   */\r\n  deactivate() {\r\n    this.instance.dispatch('contentDeactivate', { content: this });\r\n    if (this.slide && this.slide.holderElement) {\r\n      this.slide.holderElement.setAttribute('aria-hidden', 'true');\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Remove the content from DOM\r\n   */\r\n  remove() {\r\n    this.isAttached = false;\r\n\r\n    if (this.instance.dispatch('contentRemove', { content: this }).defaultPrevented) {\r\n      return;\r\n    }\r\n\r\n    if (this.element && this.element.parentNode) {\r\n      this.element.remove();\r\n    }\r\n\r\n    if (this.placeholder && this.placeholder.element) {\r\n      this.placeholder.element.remove();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Append the image content to slide container\r\n   */\r\n  appendImage() {\r\n    if (!this.isAttached) {\r\n      return;\r\n    }\r\n\r\n    if (this.instance.dispatch('contentAppendImage', { content: this }).defaultPrevented) {\r\n      return;\r\n    }\r\n\r\n    // ensure that element exists and is not already appended\r\n    if (this.slide && this.element && !this.element.parentNode) {\r\n      this.slide.container.appendChild(this.element);\r\n    }\r\n\r\n    if (this.state === LOAD_STATE.LOADED || this.state === LOAD_STATE.ERROR) {\r\n      this.removePlaceholder();\r\n    }\r\n  }\r\n}\r\n\r\nexport default Content;\r\n", "/** @typedef {import('../photoswipe.js').PhotoSwipeOptions} PhotoSwipeOptions */\r\n/** @typedef {import('../core/base.js').default} PhotoSwipeBase */\r\n/** @typedef {import('../photoswipe.js').Point} Point */\r\n/** @typedef {import('../slide/slide.js').SlideData} SlideData */\r\n\r\n/**\r\n * @param {PhotoSwipeOptions} options\r\n * @param {PhotoSwipeBase} pswp\r\n * @returns {Point}\r\n */\r\nexport function getViewportSize(options, pswp) {\r\n  if (options.getViewportSizeFn) {\r\n    const newViewportSize = options.getViewportSizeFn(options, pswp);\r\n    if (newViewportSize) {\r\n      return newViewportSize;\r\n    }\r\n  }\r\n\r\n  return {\r\n    x: document.documentElement.clientWidth,\r\n\r\n    // TODO: height on mobile is very incosistent due to toolbar\r\n    // find a way to improve this\r\n    //\r\n    // document.documentElement.clientHeight - doesn't seem to work well\r\n    y: window.innerHeight\r\n  };\r\n}\r\n\r\n/**\r\n * Parses padding option.\r\n * Supported formats:\r\n *\r\n * // Object\r\n * padding: {\r\n *  top: 0,\r\n *  bottom: 0,\r\n *  left: 0,\r\n *  right: 0\r\n * }\r\n *\r\n * // A function that returns the object\r\n * paddingFn: (viewportSize, itemData, index) => {\r\n *  return {\r\n *    top: 0,\r\n *    bottom: 0,\r\n *    left: 0,\r\n *    right: 0\r\n *  };\r\n * }\r\n *\r\n * // Legacy variant\r\n * paddingLeft: 0,\r\n * paddingRight: 0,\r\n * paddingTop: 0,\r\n * paddingBottom: 0,\r\n *\r\n * @param {'left' | 'top' | 'bottom' | 'right'} prop\r\n * @param {PhotoSwipeOptions} options PhotoSwipe options\r\n * @param {Point} viewportSize PhotoSwipe viewport size, for example: { x:800, y:600 }\r\n * @param {SlideData} itemData Data about the slide\r\n * @param {number} index Slide index\r\n * @returns {number}\r\n */\r\nexport function parsePaddingOption(prop, options, viewportSize, itemData, index) {\r\n  let paddingValue = 0;\r\n\r\n  if (options.paddingFn) {\r\n    paddingValue = options.paddingFn(viewportSize, itemData, index)[prop];\r\n  } else if (options.padding) {\r\n    paddingValue = options.padding[prop];\r\n  } else {\r\n    const legacyPropName = 'padding' + prop[0].toUpperCase() + prop.slice(1);\r\n    // @ts-expect-error\r\n    if (options[legacyPropName]) {\r\n      // @ts-expect-error\r\n      paddingValue = options[legacyPropName];\r\n    }\r\n  }\r\n\r\n  return Number(paddingValue) || 0;\r\n}\r\n\r\n/**\r\n * @param {PhotoSwipeOptions} options\r\n * @param {Point} viewportSize\r\n * @param {SlideData} itemData\r\n * @param {number} index\r\n * @returns {Point}\r\n */\r\nexport function getPanAreaSize(options, viewportSize, itemData, index) {\r\n  return {\r\n    x: viewportSize.x\r\n      - parsePaddingOption('left', options, viewportSize, itemData, index)\r\n      - parsePaddingOption('right', options, viewportSize, itemData, index),\r\n    y: viewportSize.y\r\n      - parsePaddingOption('top', options, viewportSize, itemData, index)\r\n      - parsePaddingOption('bottom', options, viewportSize, itemData, index)\r\n  };\r\n}\r\n", "const MAX_IMAGE_WIDTH = 4000;\r\n\r\n/** @typedef {import('../photoswipe.js').default} PhotoSwipe */\r\n/** @typedef {import('../photoswipe.js').PhotoSwipeOptions} PhotoSwipeOptions */\r\n/** @typedef {import('../photoswipe.js').Point} Point */\r\n/** @typedef {import('../slide/slide.js').SlideData} SlideData */\r\n\r\n/** @typedef {'fit' | 'fill' | number | ((zoomLevelObject: ZoomLevel) => number)} ZoomLevelOption */\r\n\r\n/**\r\n * Calculates zoom levels for specific slide.\r\n * Depends on viewport size and image size.\r\n */\r\nclass ZoomLevel {\r\n  /**\r\n   * @param {PhotoSwipeOptions} options PhotoSwipe options\r\n   * @param {SlideData} itemData Slide data\r\n   * @param {number} index Slide index\r\n   * @param {PhotoSwipe} [pswp] PhotoSwipe instance, can be undefined if not initialized yet\r\n   */\r\n  constructor(options, itemData, index, pswp) {\r\n    this.pswp = pswp;\r\n    this.options = options;\r\n    this.itemData = itemData;\r\n    this.index = index;\r\n    /** @type { Point | null } */\r\n    this.panAreaSize = null;\r\n    /** @type { Point | null } */\r\n    this.elementSize = null;\r\n    this.fit = 1;\r\n    this.fill = 1;\r\n    this.vFill = 1;\r\n    this.initial = 1;\r\n    this.secondary = 1;\r\n    this.max = 1;\r\n    this.min = 1;\r\n  }\r\n\r\n  /**\r\n   * Calculate initial, secondary and maximum zoom level for the specified slide.\r\n   *\r\n   * It should be called when either image or viewport size changes.\r\n   *\r\n   * @param {number} maxWidth\r\n   * @param {number} maxHeight\r\n   * @param {Point} panAreaSize\r\n   */\r\n  update(maxWidth, maxHeight, panAreaSize) {\r\n    /** @type {Point} */\r\n    const elementSize = { x: maxWidth, y: maxHeight };\r\n    this.elementSize = elementSize;\r\n    this.panAreaSize = panAreaSize;\r\n\r\n    const hRatio = panAreaSize.x / elementSize.x;\r\n    const vRatio = panAreaSize.y / elementSize.y;\r\n\r\n    this.fit = Math.min(1, hRatio < vRatio ? hRatio : vRatio);\r\n    this.fill = Math.min(1, hRatio > vRatio ? hRatio : vRatio);\r\n\r\n    // zoom.vFill defines zoom level of the image\r\n    // when it has 100% of viewport vertical space (height)\r\n    this.vFill = Math.min(1, vRatio);\r\n\r\n    this.initial = this._getInitial();\r\n    this.secondary = this._getSecondary();\r\n    this.max = Math.max(\r\n      this.initial,\r\n      this.secondary,\r\n      this._getMax()\r\n    );\r\n\r\n    this.min = Math.min(\r\n      this.fit,\r\n      this.initial,\r\n      this.secondary\r\n    );\r\n\r\n    if (this.pswp) {\r\n      this.pswp.dispatch('zoomLevelsUpdate', { zoomLevels: this, slideData: this.itemData });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Parses user-defined zoom option.\r\n   *\r\n   * @private\r\n   * @param {'initial' | 'secondary' | 'max'} optionPrefix Zoom level option prefix (initial, secondary, max)\r\n   * @returns { number | undefined }\r\n   */\r\n  _parseZoomLevelOption(optionPrefix) {\r\n    const optionName = /** @type {'initialZoomLevel' | 'secondaryZoomLevel' | 'maxZoomLevel'} */ (\r\n      optionPrefix + 'ZoomLevel'\r\n    );\r\n    const optionValue = this.options[optionName];\r\n\r\n    if (!optionValue) {\r\n      return;\r\n    }\r\n\r\n    if (typeof optionValue === 'function') {\r\n      return optionValue(this);\r\n    }\r\n\r\n    if (optionValue === 'fill') {\r\n      return this.fill;\r\n    }\r\n\r\n    if (optionValue === 'fit') {\r\n      return this.fit;\r\n    }\r\n\r\n    return Number(optionValue);\r\n  }\r\n\r\n  /**\r\n   * Get zoom level to which image will be zoomed after double-tap gesture,\r\n   * or when user clicks on zoom icon,\r\n   * or mouse-click on image itself.\r\n   * If you return 1 image will be zoomed to its original size.\r\n   *\r\n   * @private\r\n   * @return {number}\r\n   */\r\n  _getSecondary() {\r\n    let currZoomLevel = this._parseZoomLevelOption('secondary');\r\n\r\n    if (currZoomLevel) {\r\n      return currZoomLevel;\r\n    }\r\n\r\n    // 3x of \"fit\" state, but not larger than original\r\n    currZoomLevel = Math.min(1, this.fit * 3);\r\n\r\n    if (this.elementSize && currZoomLevel * this.elementSize.x > MAX_IMAGE_WIDTH) {\r\n      currZoomLevel = MAX_IMAGE_WIDTH / this.elementSize.x;\r\n    }\r\n\r\n    return currZoomLevel;\r\n  }\r\n\r\n  /**\r\n   * Get initial image zoom level.\r\n   *\r\n   * @private\r\n   * @return {number}\r\n   */\r\n  _getInitial() {\r\n    return this._parseZoomLevelOption('initial') || this.fit;\r\n  }\r\n\r\n  /**\r\n   * Maximum zoom level when user zooms\r\n   * via zoom/pinch gesture,\r\n   * via cmd/ctrl-wheel or via trackpad.\r\n   *\r\n   * @private\r\n   * @return {number}\r\n   */\r\n  _getMax() {\r\n    // max zoom level is x4 from \"fit state\",\r\n    // used for zoom gesture and ctrl/trackpad zoom\r\n    return this._parseZoomLevelOption('max') || Math.max(1, this.fit * 4);\r\n  }\r\n}\r\n\r\nexport default ZoomLevel;\r\n", "import { getViewportSize, getPanAreaSize } from '../util/viewport-size.js';\r\nimport ZoomLevel from './zoom-level.js';\r\n\r\n/** @typedef {import('./content.js').default} Content */\r\n/** @typedef {import('./slide.js').default} Slide */\r\n/** @typedef {import('./slide.js').SlideData} SlideData */\r\n/** @typedef {import('../core/base.js').default} PhotoSwipeBase */\r\n/** @typedef {import('../photoswipe.js').default} PhotoSwipe */\r\n\r\nconst MIN_SLIDES_TO_CACHE = 5;\r\n\r\n/**\r\n * Lazy-load an image\r\n * This function is used both by Lightbox and PhotoSwipe core,\r\n * thus it can be called before dialog is opened.\r\n *\r\n * @param {SlideData} itemData Data about the slide\r\n * @param {PhotoSwipeBase} instance PhotoSwipe or PhotoSwipeLightbox instance\r\n * @param {number} index\r\n * @returns {Content} Image that is being decoded or false.\r\n */\r\nexport function lazyLoadData(itemData, instance, index) {\r\n  const content = instance.createContentFromData(itemData, index);\r\n  /** @type {ZoomLevel | undefined} */\r\n  let zoomLevel;\r\n\r\n  const { options } = instance;\r\n\r\n  // We need to know dimensions of the image to preload it,\r\n  // as it might use srcset, and we need to define sizes\r\n  if (options) {\r\n    zoomLevel = new ZoomLevel(options, itemData, -1);\r\n\r\n    let viewportSize;\r\n    if (instance.pswp) {\r\n      viewportSize = instance.pswp.viewportSize;\r\n    } else {\r\n      viewportSize = getViewportSize(options, instance);\r\n    }\r\n\r\n    const panAreaSize = getPanAreaSize(options, viewportSize, itemData, index);\r\n    zoomLevel.update(content.width, content.height, panAreaSize);\r\n  }\r\n\r\n  content.lazyLoad();\r\n\r\n  if (zoomLevel) {\r\n    content.setDisplayedSize(\r\n      Math.ceil(content.width * zoomLevel.initial),\r\n      Math.ceil(content.height * zoomLevel.initial)\r\n    );\r\n  }\r\n\r\n  return content;\r\n}\r\n\r\n\r\n/**\r\n * Lazy-loads specific slide.\r\n * This function is used both by Lightbox and PhotoSwipe core,\r\n * thus it can be called before dialog is opened.\r\n *\r\n * By default, it loads image based on viewport size and initial zoom level.\r\n *\r\n * @param {number} index Slide index\r\n * @param {PhotoSwipeBase} instance PhotoSwipe or PhotoSwipeLightbox eventable instance\r\n * @returns {Content | undefined}\r\n */\r\nexport function lazyLoadSlide(index, instance) {\r\n  const itemData = instance.getItemData(index);\r\n\r\n  if (instance.dispatch('lazyLoadSlide', { index, itemData }).defaultPrevented) {\r\n    return;\r\n  }\r\n\r\n  return lazyLoadData(itemData, instance, index);\r\n}\r\n\r\nclass ContentLoader {\r\n  /**\r\n   * @param {PhotoSwipe} pswp\r\n   */\r\n  constructor(pswp) {\r\n    this.pswp = pswp;\r\n    // Total amount of cached images\r\n    this.limit = Math.max(\r\n      pswp.options.preload[0] + pswp.options.preload[1] + 1,\r\n      MIN_SLIDES_TO_CACHE\r\n    );\r\n    /** @type {Content[]} */\r\n    this._cachedItems = [];\r\n  }\r\n\r\n  /**\r\n   * Lazy load nearby slides based on `preload` option.\r\n   *\r\n   * @param {number} [diff] Difference between slide indexes that was changed recently, or 0.\r\n   */\r\n  updateLazy(diff) {\r\n    const { pswp } = this;\r\n\r\n    if (pswp.dispatch('lazyLoad').defaultPrevented) {\r\n      return;\r\n    }\r\n\r\n    const { preload } = pswp.options;\r\n    const isForward = diff === undefined ? true : (diff >= 0);\r\n    let i;\r\n\r\n    // preload[1] - num items to preload in forward direction\r\n    for (i = 0; i <= preload[1]; i++) {\r\n      this.loadSlideByIndex(pswp.currIndex + (isForward ? i : (-i)));\r\n    }\r\n\r\n    // preload[0] - num items to preload in backward direction\r\n    for (i = 1; i <= preload[0]; i++) {\r\n      this.loadSlideByIndex(pswp.currIndex + (isForward ? (-i) : i));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {number} initialIndex\r\n   */\r\n  loadSlideByIndex(initialIndex) {\r\n    const index = this.pswp.getLoopedIndex(initialIndex);\r\n    // try to get cached content\r\n    let content = this.getContentByIndex(index);\r\n    if (!content) {\r\n      // no cached content, so try to load from scratch:\r\n      content = lazyLoadSlide(index, this.pswp);\r\n      // if content can be loaded, add it to cache:\r\n      if (content) {\r\n        this.addToCache(content);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {Slide} slide\r\n   * @returns {Content}\r\n   */\r\n  getContentBySlide(slide) {\r\n    let content = this.getContentByIndex(slide.index);\r\n    if (!content) {\r\n      // create content if not found in cache\r\n      content = this.pswp.createContentFromData(slide.data, slide.index);\r\n      this.addToCache(content);\r\n    }\r\n\r\n    // assign slide to content\r\n    content.setSlide(slide);\r\n\r\n    return content;\r\n  }\r\n\r\n  /**\r\n   * @param {Content} content\r\n   */\r\n  addToCache(content) {\r\n    // move to the end of array\r\n    this.removeByIndex(content.index);\r\n    this._cachedItems.push(content);\r\n\r\n    if (this._cachedItems.length > this.limit) {\r\n      // Destroy the first content that's not attached\r\n      const indexToRemove = this._cachedItems.findIndex((item) => {\r\n        return !item.isAttached && !item.hasSlide;\r\n      });\r\n      if (indexToRemove !== -1) {\r\n        const removedItem = this._cachedItems.splice(indexToRemove, 1)[0];\r\n        removedItem.destroy();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Removes an image from cache, does not destroy() it, just removes.\r\n   *\r\n   * @param {number} index\r\n   */\r\n  removeByIndex(index) {\r\n    const indexToRemove = this._cachedItems.findIndex(item => item.index === index);\r\n    if (indexToRemove !== -1) {\r\n      this._cachedItems.splice(indexToRemove, 1);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {number} index\r\n   * @returns {Content | undefined}\r\n   */\r\n  getContentByIndex(index) {\r\n    return this._cachedItems.find(content => content.index === index);\r\n  }\r\n\r\n  destroy() {\r\n    this._cachedItems.forEach(content => content.destroy());\r\n    this._cachedItems = [];\r\n  }\r\n}\r\n\r\nexport default ContentLoader;\r\n", "import Eventable from './eventable.js';\r\nimport { getElementsFromOption } from '../util/util.js';\r\nimport Content from '../slide/content.js';\r\nimport { lazyLoadData } from '../slide/loader.js';\r\n\r\n/** @typedef {import(\"../photoswipe.js\").default} PhotoSwipe */\r\n/** @typedef {import(\"../slide/slide.js\").SlideData} SlideData */\r\n\r\n/**\r\n * PhotoSwipe base class that can retrieve data about every slide.\r\n * Shared by PhotoSwipe Core and PhotoSwipe Lightbox\r\n */\r\nclass PhotoSwipeBase extends Eventable {\r\n  /**\r\n   * Get total number of slides\r\n   *\r\n   * @returns {number}\r\n   */\r\n  getNumItems() {\r\n    let numItems = 0;\r\n    const dataSource = this.options?.dataSource;\r\n\r\n    if (dataSource && 'length' in dataSource) {\r\n      // may be an array or just object with length property\r\n      numItems = dataSource.length;\r\n    } else if (dataSource && 'gallery' in dataSource) {\r\n      // query DOM elements\r\n      if (!dataSource.items) {\r\n        dataSource.items = this._getGalleryDOMElements(dataSource.gallery);\r\n      }\r\n\r\n      if (dataSource.items) {\r\n        numItems = dataSource.items.length;\r\n      }\r\n    }\r\n\r\n    // legacy event, before filters were introduced\r\n    const event = this.dispatch('numItems', {\r\n      dataSource,\r\n      numItems\r\n    });\r\n    return this.applyFilters('numItems', event.numItems, dataSource);\r\n  }\r\n\r\n  /**\r\n   * @param {SlideData} slideData\r\n   * @param {number} index\r\n   * @returns {Content}\r\n   */\r\n  createContentFromData(slideData, index) {\r\n    return new Content(slideData, this, index);\r\n  }\r\n\r\n  /**\r\n   * Get item data by index.\r\n   *\r\n   * \"item data\" should contain normalized information that PhotoSwipe needs to generate a slide.\r\n   * For example, it may contain properties like\r\n   * `src`, `srcset`, `w`, `h`, which will be used to generate a slide with image.\r\n   *\r\n   * @param {number} index\r\n   * @returns {SlideData}\r\n   */\r\n  getItemData(index) {\r\n    const dataSource = this.options?.dataSource;\r\n    /** @type {SlideData | HTMLElement} */\r\n    let dataSourceItem = {};\r\n    if (Array.isArray(dataSource)) {\r\n      // Datasource is an array of elements\r\n      dataSourceItem = dataSource[index];\r\n    } else if (dataSource && 'gallery' in dataSource) {\r\n      // dataSource has gallery property,\r\n      // thus it was created by Lightbox, based on\r\n      // gallery and children options\r\n\r\n      // query DOM elements\r\n      if (!dataSource.items) {\r\n        dataSource.items = this._getGalleryDOMElements(dataSource.gallery);\r\n      }\r\n\r\n      dataSourceItem = dataSource.items[index];\r\n    }\r\n\r\n    let itemData = dataSourceItem;\r\n\r\n    if (itemData instanceof Element) {\r\n      itemData = this._domElementToItemData(itemData);\r\n    }\r\n\r\n    // Dispatching the itemData event,\r\n    // it's a legacy verion before filters were introduced\r\n    const event = this.dispatch('itemData', {\r\n      itemData: itemData || {},\r\n      index\r\n    });\r\n\r\n    return this.applyFilters('itemData', event.itemData, index);\r\n  }\r\n\r\n  /**\r\n   * Get array of gallery DOM elements,\r\n   * based on childSelector and gallery element.\r\n   *\r\n   * @param {HTMLElement} galleryElement\r\n   * @returns {HTMLElement[]}\r\n   */\r\n  _getGalleryDOMElements(galleryElement) {\r\n    if (this.options?.children || this.options?.childSelector) {\r\n      return getElementsFromOption(\r\n        this.options.children,\r\n        this.options.childSelector,\r\n        galleryElement\r\n      ) || [];\r\n    }\r\n\r\n    return [galleryElement];\r\n  }\r\n\r\n  /**\r\n   * Converts DOM element to item data object.\r\n   *\r\n   * @param {HTMLElement} element DOM element\r\n   * @returns {SlideData}\r\n   */\r\n  _domElementToItemData(element) {\r\n    /** @type {SlideData} */\r\n    const itemData = {\r\n      element\r\n    };\r\n\r\n    const linkEl = /** @type {HTMLAnchorElement} */ (\r\n      element.tagName === 'A'\r\n        ? element\r\n        : element.querySelector('a')\r\n    );\r\n\r\n    if (linkEl) {\r\n      // src comes from data-pswp-src attribute,\r\n      // if it's empty link href is used\r\n      itemData.src = linkEl.dataset.pswpSrc || linkEl.href;\r\n\r\n      if (linkEl.dataset.pswpSrcset) {\r\n        itemData.srcset = linkEl.dataset.pswpSrcset;\r\n      }\r\n\r\n      itemData.width = linkEl.dataset.pswpWidth ? parseInt(linkEl.dataset.pswpWidth, 10) : 0;\r\n      itemData.height = linkEl.dataset.pswpHeight ? parseInt(linkEl.dataset.pswpHeight, 10) : 0;\r\n\r\n      // support legacy w & h properties\r\n      itemData.w = itemData.width;\r\n      itemData.h = itemData.height;\r\n\r\n      if (linkEl.dataset.pswpType) {\r\n        itemData.type = linkEl.dataset.pswpType;\r\n      }\r\n\r\n      const thumbnailEl = element.querySelector('img');\r\n\r\n      if (thumbnailEl) {\r\n        // msrc is URL to placeholder image that's displayed before large image is loaded\r\n        // by default it's displayed only for the first slide\r\n        itemData.msrc = thumbnailEl.currentSrc || thumbnailEl.src;\r\n        itemData.alt = thumbnailEl.getAttribute('alt') ?? '';\r\n      }\r\n\r\n      if (linkEl.dataset.pswpCropped || linkEl.dataset.cropped) {\r\n        itemData.thumbCropped = true;\r\n      }\r\n    }\r\n\r\n    return this.applyFilters('domItemData', itemData, element, linkEl);\r\n  }\r\n\r\n  /**\r\n   * Lazy-load by slide data\r\n   *\r\n   * @param {SlideData} itemData Data about the slide\r\n   * @param {number} index\r\n   * @returns {Content} Image that is being decoded or false.\r\n   */\r\n  lazyLoadData(itemData, index) {\r\n    return lazyLoadData(itemData, this, index);\r\n  }\r\n}\r\n\r\nexport default PhotoSwipeBase;\r\n", "import {\r\n  specialKeyUsed,\r\n  getElementsFromOption,\r\n  isPswpClass\r\n} from '../util/util.js';\r\n\r\nimport PhotoSwipeBase from '../core/base.js';\r\nimport { lazyLoadSlide } from '../slide/loader.js';\r\n\r\n/**\r\n * @template T\r\n * @typedef {import('../types.js').Type<T>} Type<T>\r\n */\r\n\r\n/** @typedef {import('../photoswipe.js').default} PhotoSwipe */\r\n/** @typedef {import('../photoswipe.js').PhotoSwipeOptions} PhotoSwipeOptions */\r\n/** @typedef {import('../photoswipe.js').DataSource} DataSource */\r\n/** @typedef {import('../photoswipe.js').Point} Point */\r\n/** @typedef {import('../slide/content.js').default} Content */\r\n/** @typedef {import('../core/eventable.js').PhotoSwipeEventsMap} PhotoSwipeEventsMap */\r\n/** @typedef {import('../core/eventable.js').PhotoSwipeFiltersMap} PhotoSwipeFiltersMap */\r\n\r\n/**\r\n * @template {keyof PhotoSwipeEventsMap} T\r\n * @typedef {import('../core/eventable.js').EventCallback<T>} EventCallback<T>\r\n */\r\n\r\n/**\r\n * PhotoSwipe Lightbox\r\n *\r\n * - If user has unsupported browser it falls back to default browser action (just opens URL)\r\n * - Binds click event to links that should open PhotoSwipe\r\n * - parses DOM strcture for PhotoSwipe (retrieves large image URLs and sizes)\r\n * - Initializes PhotoSwipe\r\n *\r\n *\r\n * Loader options use the same object as PhotoSwipe, and supports such options:\r\n *\r\n * gallery - Element | Element[] | NodeList | string selector for the gallery element\r\n * children - Element | Element[] | NodeList | string selector for the gallery children\r\n *\r\n */\r\nclass PhotoSwipeLightbox extends PhotoSwipeBase {\r\n  /**\r\n   * @param {PhotoSwipeOptions} [options]\r\n   */\r\n  constructor(options) {\r\n    super();\r\n    /** @type {PhotoSwipeOptions} */\r\n    this.options = options || {};\r\n    this._uid = 0;\r\n    this.shouldOpen = false;\r\n    /**\r\n     * @private\r\n     * @type {Content | undefined}\r\n     */\r\n    this._preloadedContent = undefined;\r\n\r\n    this.onThumbnailsClick = this.onThumbnailsClick.bind(this);\r\n  }\r\n\r\n  /**\r\n   * Initialize lightbox, should be called only once.\r\n   * It's not included in the main constructor, so you may bind events before it.\r\n   */\r\n  init() {\r\n    // Bind click events to each gallery\r\n    getElementsFromOption(this.options.gallery, this.options.gallerySelector)\r\n      .forEach((galleryElement) => {\r\n        galleryElement.addEventListener('click', this.onThumbnailsClick, false);\r\n      });\r\n  }\r\n\r\n  /**\r\n   * @param {MouseEvent} e\r\n   */\r\n  onThumbnailsClick(e) {\r\n    // Exit and allow default browser action if:\r\n    if (specialKeyUsed(e) // ... if clicked with a special key (ctrl/cmd...)\r\n        || window.pswp) { // ... if PhotoSwipe is already open\r\n      return;\r\n    }\r\n\r\n    // If both clientX and clientY are 0 or not defined,\r\n    // the event is likely triggered by keyboard,\r\n    // so we do not pass the initialPoint\r\n    //\r\n    // Note that some screen readers emulate the mouse position,\r\n    // so it's not the ideal way to detect them.\r\n    //\r\n    /** @type {Point | null} */\r\n    let initialPoint = { x: e.clientX, y: e.clientY };\r\n\r\n    if (!initialPoint.x && !initialPoint.y) {\r\n      initialPoint = null;\r\n    }\r\n\r\n    let clickedIndex = this.getClickedIndex(e);\r\n    clickedIndex = this.applyFilters('clickedIndex', clickedIndex, e, this);\r\n    /** @type {DataSource} */\r\n    const dataSource = {\r\n      gallery: /** @type {HTMLElement} */ (e.currentTarget)\r\n    };\r\n\r\n    if (clickedIndex >= 0) {\r\n      e.preventDefault();\r\n      this.loadAndOpen(clickedIndex, dataSource, initialPoint);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get index of gallery item that was clicked.\r\n   *\r\n   * @param {MouseEvent} e click event\r\n   * @returns {number}\r\n   */\r\n  getClickedIndex(e) {\r\n    // legacy option\r\n    if (this.options.getClickedIndexFn) {\r\n      return this.options.getClickedIndexFn.call(this, e);\r\n    }\r\n\r\n    const clickedTarget = /** @type {HTMLElement} */ (e.target);\r\n    const childElements = getElementsFromOption(\r\n      this.options.children,\r\n      this.options.childSelector,\r\n      /** @type {HTMLElement} */ (e.currentTarget)\r\n    );\r\n    const clickedChildIndex = childElements.findIndex(\r\n      child => child === clickedTarget || child.contains(clickedTarget)\r\n    );\r\n\r\n    if (clickedChildIndex !== -1) {\r\n      return clickedChildIndex;\r\n    } else if (this.options.children || this.options.childSelector) {\r\n      // click wasn't on a child element\r\n      return -1;\r\n    }\r\n\r\n    // There is only one item (which is the gallery)\r\n    return 0;\r\n  }\r\n\r\n  /**\r\n   * Load and open PhotoSwipe\r\n   *\r\n   * @param {number} index\r\n   * @param {DataSource} [dataSource]\r\n   * @param {Point | null} [initialPoint]\r\n   * @returns {boolean}\r\n   */\r\n  loadAndOpen(index, dataSource, initialPoint) {\r\n    // Check if the gallery is already open\r\n    if (window.pswp || !this.options) {\r\n      return false;\r\n    }\r\n\r\n    // Use the first gallery element if dataSource is not provided\r\n    if (!dataSource && this.options.gallery && this.options.children) {\r\n      const galleryElements = getElementsFromOption(this.options.gallery);\r\n      if (galleryElements[0]) {\r\n        dataSource = {\r\n          gallery: galleryElements[0]\r\n        };\r\n      }\r\n    }\r\n\r\n    // set initial index\r\n    this.options.index = index;\r\n\r\n    // define options for PhotoSwipe constructor\r\n    this.options.initialPointerPos = initialPoint;\r\n\r\n    this.shouldOpen = true;\r\n    this.preload(index, dataSource);\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Load the main module and the slide content by index\r\n   *\r\n   * @param {number} index\r\n   * @param {DataSource} [dataSource]\r\n   */\r\n  preload(index, dataSource) {\r\n    const { options } = this;\r\n\r\n    if (dataSource) {\r\n      options.dataSource = dataSource;\r\n    }\r\n\r\n    // Add the main module\r\n    /** @type {Promise<Type<PhotoSwipe>>[]} */\r\n    const promiseArray = [];\r\n\r\n    const pswpModuleType = typeof options.pswpModule;\r\n    if (isPswpClass(options.pswpModule)) {\r\n      promiseArray.push(Promise.resolve(/** @type {Type<PhotoSwipe>} */ (options.pswpModule)));\r\n    } else if (pswpModuleType === 'string') {\r\n      throw new Error('pswpModule as string is no longer supported');\r\n    } else if (pswpModuleType === 'function') {\r\n      promiseArray.push(/** @type {() => Promise<Type<PhotoSwipe>>} */ (options.pswpModule)());\r\n    } else {\r\n      throw new Error('pswpModule is not valid');\r\n    }\r\n\r\n    // Add custom-defined promise, if any\r\n    if (typeof options.openPromise === 'function') {\r\n      // allow developers to perform some task before opening\r\n      promiseArray.push(options.openPromise());\r\n    }\r\n\r\n    if (options.preloadFirstSlide !== false && index >= 0) {\r\n      this._preloadedContent = lazyLoadSlide(index, this);\r\n    }\r\n\r\n    // Wait till all promises resolve and open PhotoSwipe\r\n    const uid = ++this._uid;\r\n    Promise.all(promiseArray).then((iterableModules) => {\r\n      if (this.shouldOpen) {\r\n        const mainModule = iterableModules[0];\r\n        this._openPhotoswipe(mainModule, uid);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * @param {Type<PhotoSwipe> | { default: Type<PhotoSwipe> }} module\r\n   * @param {number} uid\r\n   */\r\n  _openPhotoswipe(module, uid) {\r\n    // Cancel opening if UID doesn't match the current one\r\n    // (if user clicked on another gallery item before current was loaded).\r\n    //\r\n    // Or if shouldOpen flag is set to false\r\n    // (developer may modify it via public API)\r\n    if (uid !== this._uid && this.shouldOpen) {\r\n      return;\r\n    }\r\n\r\n    this.shouldOpen = false;\r\n\r\n    // PhotoSwipe is already open\r\n    if (window.pswp) {\r\n      return;\r\n    }\r\n\r\n    /**\r\n     * Pass data to PhotoSwipe and open init\r\n     *\r\n     * @type {PhotoSwipe}\r\n     */\r\n    const pswp = typeof module === 'object'\r\n        ? new module.default(this.options) // eslint-disable-line\r\n        : new module(this.options); // eslint-disable-line\r\n\r\n    this.pswp = pswp;\r\n    window.pswp = pswp;\r\n\r\n    // map listeners from Lightbox to PhotoSwipe Core\r\n    /** @type {(keyof PhotoSwipeEventsMap)[]} */\r\n    (Object.keys(this._listeners)).forEach((name) => {\r\n      this._listeners[name]?.forEach((fn) => {\r\n        pswp.on(name, /** @type {EventCallback<typeof name>} */(fn));\r\n      });\r\n    });\r\n\r\n    // same with filters\r\n    /** @type {(keyof PhotoSwipeFiltersMap)[]} */\r\n    (Object.keys(this._filters)).forEach((name) => {\r\n      this._filters[name]?.forEach((filter) => {\r\n        pswp.addFilter(name, filter.fn, filter.priority);\r\n      });\r\n    });\r\n\r\n    if (this._preloadedContent) {\r\n      pswp.contentLoader.addToCache(this._preloadedContent);\r\n      this._preloadedContent = undefined;\r\n    }\r\n\r\n    pswp.on('destroy', () => {\r\n      // clean up public variables\r\n      this.pswp = undefined;\r\n      delete window.pswp;\r\n    });\r\n\r\n    pswp.init();\r\n  }\r\n\r\n  /**\r\n   * Unbinds all events, closes PhotoSwipe if it's open.\r\n   */\r\n  destroy() {\r\n    this.pswp?.destroy();\r\n\r\n    this.shouldOpen = false;\r\n    this._listeners = {};\r\n\r\n    getElementsFromOption(this.options.gallery, this.options.gallerySelector)\r\n      .forEach((galleryElement) => {\r\n        galleryElement.removeEventListener('click', this.onThumbnailsClick, false);\r\n      });\r\n  }\r\n}\r\n\r\nexport default PhotoSwipeLightbox;\r\n", "import PhotoSwipeLightbox from 'photoswipe/lightbox';\n\nexport function lightbox() {\n  const arrow =  ' <svg aria-hidden=\"true\" class=\"pswp__icn\" viewBox=\"0 0 32 30\" width=\"32\" height=\"30\">\\\n    <path d=\"M26.667 14.667v2.667h-16L18 24.667l-1.893 1.893L5.547 16l10.56-10.56L18 7.333l-7.333 7.333h16z\"> \\\n    </path> </svg>';\n\n  const options = {\n    arrowPrevSVG: arrow,\n    arrowNextSVG: arrow,\n    zoom: false,\n    gallery: '.kg-image-card, .kg-gallery-card',\n    children: 'img',\n    bgOpacity: 0.8,\n    closeOnScroll: true,\n    Xpadding: { top: 40, bottom: 40, left: 0, right: 0 },\n    imageClickAction: 'close',\n    tapAction: 'close',\n    pswpModule: () => import('photoswipe')\n  };\n\n  const lightbox = new PhotoSwipeLightbox(options);\n\n  lightbox.init();\n\n  /* \n    modify the item data used by photoswipe based on the attributes on the card image.\n    For images without height and width variables (e.g from posts converted from wordpress \n    the attributes are retrieved from the image\n    */\n  lightbox.addFilter('domItemData', (itemData, element, linkEl) => {\n\n    if (itemData) {\n      itemData.w = element.getAttribute(\"width\");\n      itemData.h = element.getAttribute(\"height\");\n      if ( ! itemData.h || ! itemData.w ) {\n        // get the original image size\n        itemData.w = element.naturalWidth;\n        itemData.h = element.naturalHeight;\n      }\n      itemData.src = element.getAttribute(\"src\");\n      itemData.srcset = element.getAttribute(\"srcset\");\n    }\n    return itemData;\n  });\n}\n", "/* \n* create the <li> html structure under the <nav> element used in the site-header\n* the items are structured based on markup in the ghost navigation names:\n* names prefixed with - indicate a submenu and -- indicates a submenu item\n* for example\n*\n*  ghost navigation          rendered html\n*  -----------------         ------------------\n*  HOME                      <li class='menu-link-item'>\n*                              <a href='http://localhost:2368/'>HOME</a>\n*                            </li>\n*  -HONDA C90                <li class='menu-link-item has-submenu'>\n*                                <a href='#'>HONDA C90 \u2304</a>\n*                                <div class='submenu-links-container'>\n*                                    <div class='submenu-links-header'>\n*                                        <p class='submenu-links-title'>HONDA C90</p>\n*                                    </div>\n*                                    <ul class='submenu-links'>\n*  --introduction                        <li class='submenu-link-item'>\n*                                            <a href='http://localhost:2368/2019/11/16/honda-c90-introduction/'>introduction</a>\n*                                        </li>\n*  --engine                              <li class='submenu-link-item'>\n*                                            <a href='http://localhost:2368/tag/engine/'>engine</a>\n*                                        </li>\n*                                    </ul>\n*                                </div>\n*                            </li>\n*/\n\nexport function mainMenuSetup() {\n  const menuIndentRegex = /(^-{1,})(.*)/; // Match the -submenu and --submenu-link-item navigation entries\n\n  function createSubMenu(menuName) {\n      const div = document.createElement('div');\n      div.classList.add('submenu-links-container');\n\n      const div1 = document.createElement('div');\n      div1.classList.add('submenu-links-header');\n\n      const p1 = document.createElement('p');\n      p1.classList.add('submenu-links-title');\n      p1.appendChild(document.createTextNode(menuName));\n      div1.appendChild(p1);\n\n      div.appendChild(div1);\n\n      const ul = document.createElement('ul');\n      ul.classList.add('submenu-links');\n\n      div.appendChild(ul);\n\n      return div;\n  }\n\n  function processMenuItems() {\n      const menuItems = document.querySelectorAll('.menu-links .menu-link-item');\n      let submenu = null;\n\n      for (let i = 0; i < menuItems.length; ++i) {\n          const match = menuItems[i].lastElementChild.innerText.match(menuIndentRegex);\n\n          if (match) {\n              // Remove the submenu & submenu-link-item indent indicators (- --)\n              menuItems[i].lastElementChild.innerText = menuItems[i].lastElementChild.innerText.replace(menuIndentRegex,'$2').trim();\n              const menuName=menuItems[i].lastElementChild.innerText;\n\n              if (match[1].length == 1) { // Submenu (-)\n                  menuItems[i].classList.add('has-submenu');\n\n                  const anchor = document.createElement('a');\n                  anchor.setAttribute('href', '#');\n                  anchor.classList.add('tabindex=0');\n                  anchor.appendChild(document.createTextNode(menuName));\n          \n                  const sup = document.createElement('sup');\n                  sup.appendChild(document.createTextNode(' \u2304'));\n                  anchor.appendChild(sup);\n\n                  const div = createSubMenu(menuName);\n                  menuItems[i].replaceChildren(anchor);\n                  menuItems[i].appendChild(div);\n                  submenu = menuItems[i];\n              } else if (submenu) { // Submenu item (--)\n                  menuItems[i].classList.add('submenu-link-item');\n                  menuItems[i].classList.remove('menu-link-item');\n                  submenu.querySelector('.submenu-links').appendChild(menuItems[i]);\n              }\n          }\n      }\n      document.querySelector('.menu-links-container').classList.add('menu-links-ready');\n  }\n\n  processMenuItems();\n}\n\n/* \n * open/close nav (main) menu and submenus\n * .menu-links-container.menu-links-active is set when the nav is opened using the hamburger button \n * .submenu.submenu-links-active is set when an item with a submenu is opened\n*/\nexport function mainNavMenuToggle() {\n  const nav = document.querySelector('.menu-links-container');\n  const navToggle = document.querySelector('.menu-links-toggle');\n\n  function handleDocumentClick(event) {\n    let activeSubmenu = nav.querySelector('.submenu-links-active');\n    let clickedItem;\n\n\n    // when a submenu item is clicked no need to do anythng further (new page will open)\n    if (event.target.closest(\".submenu-link-item\")) {\n      return;\n    }\n    else if (event.target.closest(\".menu-link-item\") && ! event.target.closest(\".submenu-links-header\")) { // do not count a click on a submenu header as a clicked item\n      clickedItem= event.target.closest(\".menu-link-item\");\n    }\n\n    if (clickedItem) {\n      if (clickedItem.classList.contains('has-submenu')) {\n        event.preventDefault(); // prevent the page scrolling to the top when a menu item is clicked;\n      }\n\n      if (activeSubmenu) { // close any previously opened submenu\n        activeSubmenu.classList.remove('submenu-links-active');\n      }\n\n      if (! clickedItem.contains(activeSubmenu)) { // do not reopen the submenu item if it was closed by the statement above\n        if (clickedItem.classList.contains(\"has-submenu\")) {\n          clickedItem.querySelector(\".submenu-links-container\").classList.add('submenu-links-active');\n        }\n      }\n\n      return;\n    }\n\n    // toggle nav if the hamburger menu is clicked\n    if (event.target.closest('.menu-links-toggle')) {\n      nav.classList.toggle('menu-links-active');\n      return;\n    }\n\n    // when click is outside of menus, close the latest menu\n    if (activeSubmenu) { // close any previously opened submenu\n      activeSubmenu.classList.remove('submenu-links-active');\n    }\n    else if (nav.classList.contains('menu-links-active')) {\n        nav.classList.remove('menu-links-active');\n    }\n  }\n\n  document.addEventListener('click', handleDocumentClick);\n}\n\n/*\n * open/close nav link item menus when sidebar items are clicked \n * note the user decides whether to include internal tags or secondary links on the sidebar\n*/\nexport function sidebarSetup() {\n    const fillColor = getComputedStyle(document.documentElement).getPropertyValue('--icon-color').trim();\n    const internalTags = document.querySelector('.internal-tags');\n    const internalTagItems = internalTags ? internalTags.querySelectorAll('.sidebar-link-item') : null;\n    const regex = /^##[0-9]*-/;  // this is the pattern of internal nag names that are to be used for secondary navigation\n    const containers = {\n        share: document.querySelector('.share-links-container'),\n        secondary: document.querySelector('.secondary-links-container'),\n        sidebar: document.querySelector('.sidebar')\n    };\n\n    function toggle(container) {\n        container.classList.toggle('display-item-details');\n    }\n\n    document.addEventListener('click', function(event) {\n        const { share, secondary, sidebar } = containers;\n\n        const clickedLink = event.target.closest('a');\n        if (sidebar?.contains(event.target) && clickedLink) {\n            return;\n        }\n\n        if (share?.contains(event.target)) {\n            toggle(share);\n            if (secondary?.classList.contains('display-item-details')) toggle(secondary);\n            if (sidebar?.classList.contains('display-item-details')) toggle(sidebar);\n            return;\n        }\n\n        if (secondary?.contains(event.target)) {\n            toggle(secondary);\n            if (share?.classList.contains('display-item-details')) toggle(share);\n            if (sidebar?.classList.contains('display-item-details')) toggle(sidebar);\n            return;\n        }\n\n        if (sidebar?.contains(event.target)) {\n            toggle(sidebar);\n            if (share?.classList.contains('display-item-details')) toggle(share);\n            if (secondary?.classList.contains('display-item-details')) toggle(secondary);\n            return;\n        }\n\n        /* close open menus when clicking outside */\n        if (share?.classList.contains('display-item-details')) toggle(share);\n        if (secondary?.classList.contains('display-item-details')) toggle(secondary);\n    });\n\n    /* \n    * remove the secondary nav indicator (e.g ##1-) from internal tag names. The number is optional and there to sort the icons\n    *\n    * make the sidebar icons 20px x 20px:\n    *  the svg element is embeded from the tag's feature_post image into the HTML so that we can dynamically adjut the \n    *  color according to dark mode settings (see dark-mode-toggle.js). \n    *  as a consequence, we can't control the height /width with css and have to do it here instead\n    */\n\n    /* the icons are loaded by the user - update the size and color so they are displayed consistently in the sidebar*/\n    function updateInternalTagIcons (icon) {\n        try {\n            // get the doc content from inside the icon object element\n            const svgDoc = icon.contentDocument;\n            if (! svgDoc ) return;\n\n            const svgElement = svgDoc.querySelector('svg');\n            if (svgElement) {\n                const viewBox = svgElement.getAttribute('viewBox');\n                const naturalWidth = svgElement.getAttribute('width');\n                const naturalHeight = svgElement.getAttribute('height');\n                if (!viewBox) {\n                    if (!naturalWidth || !naturalHeight){\n                        const bbox = svgElement.getBBox(); // Returns the bounding box of the element\n                        svgElement.setAttribute('viewBox', `0 0 ${bbox.width} ${bbox.height}`);\n                    } else {\n                        svgElement.setAttribute('viewBox', `0 0 ${naturalWidth} ${naturalHeight}`);\n                    }\n                }\n                svgElement.setAttribute('height', '20px');\n                svgElement.setAttribute('width', '20px');\n            \n                const elements = svgElement.querySelectorAll('path, circle, rect, ellipse');\n                elements.forEach(element => {\n                    element.setAttribute('fill', fillColor);\n                    element.setAttribute('stroke', fillColor);\n                });\n            }\n        } catch (e) {\n            console.error('Error adjusting SVG:', e);\n        }\n    }\n\n    if (internalTagItems) {\n        internalTagItems.forEach(internalTag => {\n\n            // if the user has tagged multiple posts/pages with this tag, the element will contain multiple links\n            // we keep the first (most recent publication) link\n            const firstLink = internalTag.querySelector('a');\n            let sibling = firstLink.nextElementSibling;\n            while (sibling) {\n                const nextSibling = sibling.nextElementSibling;\n                sibling.remove();\n                sibling = nextSibling;\n            }\n\n            const description = firstLink.querySelector('.sidebar-link-description');\n            const icon = firstLink.querySelector('.sidebar-link-icon');\n\n            if (description) {\n                if (regex.test(description.textContent)) {\n                    description.textContent = description.textContent.replace(regex,'');\n                } else {\n                    internalTag.remove(); // standard internal tags (these start with a single #) are not used in the navigation\n                }\n            }\n\n            // the document content for the object is from an external svg so may load after the doc\n            const svgDoc = icon.contentDocument;\n            if (svgDoc && svgDoc.querySelector('svg')) {\n                updateInternalTagIcons(icon);\n            } else {\n                // SVG isn't loaded yet, wait for load event\n                icon.addEventListener('load', () => {\n                    updateInternalTagIcons(icon);\n                });\n            }\n\n        });\n        internalTags.classList.remove('hidden'); // only show the icons after they are resized.\n\n        // for the secondary link items we use the first two characters of the words in the description instead of an icon\n        const secondaryLinksItems = document.querySelectorAll('.secondary-links .sidebar-link-item');\n        if (secondaryLinksItems) {\n            secondaryLinksItems.forEach(item => {\n                const span = document.createElement('span');\n                const itemDescription = item.querySelector('.sidebar-link-description') ;\n                if (itemDescription) {\n                    const words = itemDescription.textContent.replace(/[^a-zA-Z0-9\\s]/g, ' ').trim().split(/\\s+/);\n\n                    let firstLetters = words.slice(0, 2).map(word => word.charAt(0).toUpperCase()).join('');\n\n                    if (words.length === 1) {\n                        firstLetters=(itemDescription.textContent.slice(0, 2)).toUpperCase();\n                    }\n\n                    span.textContent = firstLetters;\n                    span.classList.add('sidebar-link-icon');\n                    const link=item.querySelector('.sidebar-link');\n                    if (link) {\n                        link.insertBefore(span,link.firstChild);\n                    }\n                }\n            });\n        }\n    }\n}\n", "export function pagination(isInfinite, callback) {\n    var buttonElement = document.querySelector('.pagination');\n\n    // next link element\n    var nextElement = document.querySelector('link[rel=next]');\n    if (!nextElement && buttonElement) {\n        buttonElement.remove();\n        return;\n    }\n\n    // post list element\n    var currentArticleList = document.querySelector('.paginated');\n    if (!currentArticleList) {\n        return;\n    }\n\n    var buffer = 300;\n\n    var ticking = false;\n    var loading = false;\n\n    var lastScrollY = window.scrollY;\n    var lastWindowHeight = window.innerHeight;\n    var lastDocumentHeight = document.documentElement.scrollHeight;\n\n    function onPageLoad() {\n        if (this.status === 404) {\n            window.removeEventListener('scroll', onScroll);\n            window.removeEventListener('resize', onResize);\n            buttonElement.remove();\n            return;\n        }\n\n        // append next page of article-cards\n        // the next elements are organized as per index.hbs\n        var nextPageArticleList = this.response.querySelectorAll('.article-card');\n        var fragment = document.createDocumentFragment();\n        var elems = [];\n        nextPageArticleList.forEach(function (item) {\n            // document.importNode is important, without it the item's owner\n            // document will be different which can break resizing of\n            // `object-fit: cover` images in Safari\n\n            var clonedItem = document.importNode(item, true);\n\n            if (callback) {\n                clonedItem.style.position = 'absolute';\n                clonedItem.style.visibility = 'hidden';\n                elems.push(clonedItem);\n            }\n\n            fragment.appendChild(clonedItem);\n        });\n\n        currentArticleList.appendChild(fragment);\n\n        if (callback) {\n            callback(elems);\n        }\n\n        // set next link\n        var resNextElement = this.response.querySelector('link[rel=next]');\n        if (resNextElement) {\n            nextElement.href = resNextElement.href;\n        } else {\n            window.removeEventListener('scroll', onScroll);\n            window.removeEventListener('resize', onResize);\n            if (buttonElement) {\n                buttonElement.remove();\n            }\n        }\n\n        // sync status\n        lastDocumentHeight = document.documentElement.scrollHeight;\n        ticking = false;\n        loading = false;\n\n        if (isInfinite) {\n            imagesLoaded(currentArticleList, function () {\n                if (currentArticleList.getBoundingClientRect().bottom <= lastWindowHeight) {\n                    console.log(currentArticleList.getBoundingClientRect().bottom, lastWindowHeight)\n                    requestTick();\n                }\n            });\n        }\n    }\n\n    function onUpdate() {\n        // return if already loading\n        if (loading) {\n            return;\n        }\n\n        // return if not scroll to the bottom\n        if (isInfinite && lastScrollY + lastWindowHeight <= lastDocumentHeight - buffer) {\n            ticking = false;\n            return;\n        }\n\n        loading = true;\n\n        var xhr = new window.XMLHttpRequest();\n        xhr.responseType = 'document';\n\n        xhr.addEventListener('load', onPageLoad);\n\n        xhr.open('GET', nextElement.href);\n        xhr.send(null);\n    }\n\n    function requestTick() {\n        ticking || window.requestAnimationFrame(onUpdate);\n        ticking = true;\n    }\n\n    function onScroll() {\n        lastScrollY = window.scrollY;\n        requestTick();\n    }\n\n    function onResize() {\n        lastWindowHeight = window.innerHeight;\n        lastDocumentHeight = document.documentElement.scrollHeight;\n        requestTick();\n    }\n\n    if (isInfinite) {\n        window.addEventListener('scroll', onScroll, {passive: true});\n        window.addEventListener('resize', onResize);\n        requestTick();\n    } else {\n        buttonElement.addEventListener('click', requestTick);\n    }\n}\n", "/**\n * This file is responsible for building the DOM and updating DOM state.\n *\n * @author Tim Scanlin\n */\n\nexport default function (options) {\n  const forEach = [].forEach\n  const some = [].some\n  const body = typeof window !== 'undefined' && document.body\n  const SPACE_CHAR = ' '\n  let tocElement\n  let currentlyHighlighting = true\n\n  /**\n   * Create link and list elements.\n   * @param {Object} d\n   * @param {HTMLElement} container\n   * @return {HTMLElement}\n   */\n  function createEl (d, container) {\n    const link = container.appendChild(createLink(d))\n    if (d.children.length) {\n      const list = createList(d.isCollapsed)\n      d.children.forEach((child) => {\n        createEl(child, list)\n      })\n      link.appendChild(list)\n    }\n  }\n\n  /**\n   * Render nested heading array data into a given element.\n   * @param {HTMLElement} parent Optional. If provided updates the {@see tocElement} to match.\n   * @param {Array} data\n   * @return {HTMLElement}\n   */\n  function render (parent, data) {\n    const collapsed = false\n    const container = createList(collapsed)\n\n    data.forEach((d) => {\n      createEl(d, container)\n    })\n\n    // Return if no TOC element is provided or known.\n    tocElement = parent || tocElement\n    if (tocElement === null) {\n      return\n    }\n\n    // Remove existing child if it exists.\n    if (tocElement.firstChild) {\n      tocElement.removeChild(tocElement.firstChild)\n    }\n\n    // Just return the parent and don't append the list if no links are found.\n    if (data.length === 0) {\n      return tocElement\n    }\n\n    // Append the Elements that have been created\n    return tocElement.appendChild(container)\n  }\n\n  /**\n   * Create link element.\n   * @param {Object} data\n   * @return {HTMLElement}\n   */\n  function createLink (data) {\n    const item = document.createElement('li')\n    const a = document.createElement('a')\n    if (options.listItemClass) {\n      item.setAttribute('class', options.listItemClass)\n    }\n\n    if (options.onClick) {\n      a.onclick = options.onClick\n    }\n\n    if (options.includeTitleTags) {\n      a.setAttribute('title', data.textContent)\n    }\n\n    if (options.includeHtml && data.childNodes.length) {\n      forEach.call(data.childNodes, (node) => {\n        a.appendChild(node.cloneNode(true))\n      })\n    } else {\n      // Default behavior. Set to textContent to keep tests happy.\n      a.textContent = data.textContent\n    }\n    a.setAttribute('href', `${options.basePath}#${data.id}`)\n    a.setAttribute('class', `${options.linkClass +\n      SPACE_CHAR}node-name--${data.nodeName}${SPACE_CHAR}${options.extraLinkClasses}`)\n    item.appendChild(a)\n    return item\n  }\n\n  /**\n   * Create list element.\n   * @param {Boolean} isCollapsed\n   * @return {HTMLElement}\n   */\n  function createList (isCollapsed) {\n    const listElement = (options.orderedList) ? 'ol' : 'ul'\n    const list = document.createElement(listElement)\n    let classes = options.listClass + SPACE_CHAR + options.extraListClasses\n    if (isCollapsed) {\n      // No plus/equals here fixes compilation issue.\n      classes = classes + SPACE_CHAR + options.collapsibleClass\n      classes = classes + SPACE_CHAR + options.isCollapsedClass\n    }\n    list.setAttribute('class', classes)\n    return list\n  }\n\n  /**\n   * Update fixed sidebar class.\n   * @return {HTMLElement}\n   */\n  function updateFixedSidebarClass () {\n    const scrollTop = getScrollTop()\n\n    const posFixedEl = document.querySelector(options.positionFixedSelector)\n    if (options.fixedSidebarOffset === 'auto') {\n      options.fixedSidebarOffset = tocElement.offsetTop\n    }\n\n    if (scrollTop > options.fixedSidebarOffset) {\n      if (posFixedEl.className.indexOf(options.positionFixedClass) === -1) {\n        posFixedEl.className += SPACE_CHAR + options.positionFixedClass\n      }\n    } else {\n      posFixedEl.className = posFixedEl.className.replace(SPACE_CHAR + options.positionFixedClass, '')\n    }\n  }\n\n  /**\n   * Get top position of heading\n   * @param {HTMLElement} obj\n   * @return {int} position\n   */\n  function getHeadingTopPos (obj) {\n    let position = 0\n    if (obj !== null) {\n      position = obj.offsetTop\n      if (options.hasInnerContainers) { position += getHeadingTopPos(obj.offsetParent) }\n    }\n    return position\n  }\n\n  /**\n   * Update className only when changed.\n   * @param {HTMLElement} obj\n   * @param {string} className\n   * @return {HTMLElement} obj\n   */\n  function updateClassname (obj, className) {\n    if (obj && obj.className !== className) {\n      obj.className = className\n    }\n    return obj\n  }\n\n  /**\n   * Update TOC highlighting and collapsed groupings.\n   */\n  function updateToc (headingsArray) {\n    // Add fixed class at offset\n    if (options.positionFixedSelector) {\n      updateFixedSidebarClass()\n    }\n\n    // Get the top most heading currently visible on the page so we know what to highlight.\n    const headings = headingsArray\n    // Using some instead of each so that we can escape early.\n    if (currentlyHighlighting &&\n      !!tocElement &&\n      headings.length > 0) {\n      const topHeader = getTopHeader(headings)\n\n      const oldActiveTocLink = tocElement.querySelector(`.${options.activeLinkClass}`)\n      const activeTocLink = tocElement\n        .querySelector(`.${options.linkClass}.node-name--${topHeader.nodeName}[href=\"${options.basePath}#${topHeader.id.replace(/([ #;&,.+*~':\"!^$[\\]()=>|/\\\\@])/g, '\\\\$1')}\"]`)\n      // Performance improvement to only change the classes\n      // for the toc if a new link should be highlighted.\n      if (oldActiveTocLink === activeTocLink) {\n        return\n      }\n\n      // Remove the active class from the other tocLinks.\n      const tocLinks = tocElement\n        .querySelectorAll(`.${options.linkClass}`)\n      forEach.call(tocLinks, (tocLink) => {\n        updateClassname(tocLink, tocLink.className.replace(SPACE_CHAR + options.activeLinkClass, ''))\n      })\n      const tocLis = tocElement\n        .querySelectorAll(`.${options.listItemClass}`)\n      forEach.call(tocLis, (tocLi) => {\n        updateClassname(tocLi, tocLi.className.replace(SPACE_CHAR + options.activeListItemClass, ''))\n      })\n\n      // Add the active class to the active tocLink.\n      if (activeTocLink && activeTocLink.className.indexOf(options.activeLinkClass) === -1) {\n        activeTocLink.className += SPACE_CHAR + options.activeLinkClass\n      }\n      const li = activeTocLink?.parentNode\n      if (li && li.className.indexOf(options.activeListItemClass) === -1) {\n        li.className += SPACE_CHAR + options.activeListItemClass\n      }\n\n      const tocLists = tocElement\n        .querySelectorAll(`.${options.listClass}.${options.collapsibleClass}`)\n\n      // Collapse the other collapsible lists.\n      forEach.call(tocLists, (list) => {\n        if (list.className.indexOf(options.isCollapsedClass) === -1) {\n          list.className += SPACE_CHAR + options.isCollapsedClass\n        }\n      })\n\n      // Expand the active link's collapsible list and its sibling if applicable.\n      if (activeTocLink?.nextSibling && activeTocLink.nextSibling.className.indexOf(options.isCollapsedClass) !== -1) {\n        updateClassname(activeTocLink.nextSibling, activeTocLink.nextSibling.className.replace(SPACE_CHAR + options.isCollapsedClass, ''))\n      }\n      removeCollapsedFromParents(activeTocLink?.parentNode.parentNode)\n    }\n  }\n\n  /**\n   * Remove collapsed class from parent elements.\n   * @param {HTMLElement} element\n   * @return {HTMLElement}\n   */\n  function removeCollapsedFromParents (element) {\n    if (element && element.className.indexOf(options.collapsibleClass) !== -1 && element.className.indexOf(options.isCollapsedClass) !== -1) {\n      updateClassname(element, element.className.replace(SPACE_CHAR + options.isCollapsedClass, ''))\n      return removeCollapsedFromParents(element.parentNode.parentNode)\n    }\n    return element\n  }\n\n  /**\n   * Disable TOC Animation when a link is clicked.\n   * @param {Event} event\n   */\n  function disableTocAnimation (event) {\n    const target = event.target || event.srcElement\n    if (typeof target.className !== 'string' || target.className.indexOf(options.linkClass) === -1) {\n      return\n    }\n    // Bind to tocLink clicks to temporarily disable highlighting\n    // while smoothScroll is animating.\n    currentlyHighlighting = false\n  }\n\n  /**\n   * Enable TOC Animation.\n   */\n  function enableTocAnimation () {\n    currentlyHighlighting = true\n  }\n\n  /**\n   * Return currently highlighting status.\n   */\n  function getCurrentlyHighlighting () {\n    return currentlyHighlighting\n  }\n\n  function getScrollTop () {\n    // If a fixed content container was set\n    let top\n    if (options.scrollContainer && document.querySelector(options.scrollContainer)) {\n      top = document.querySelector(options.scrollContainer).scrollTop\n    } else {\n      top = document.documentElement.scrollTop || body.scrollTop\n    }\n    return top\n  }\n\n  function getTopHeader (headings, scrollTop = getScrollTop()) {\n    let topHeader\n    some.call(headings, (heading, i) => {\n      if (getHeadingTopPos(heading) > scrollTop + options.headingsOffset + 10) {\n        // Don't allow negative index value.\n        const index = (i === 0) ? i : i - 1\n        topHeader = headings[index]\n        return true\n      }\n      if (i === headings.length - 1) {\n        // This allows scrolling for the last heading on the page.\n        topHeader = headings[headings.length - 1]\n        return true\n      }\n    })\n    return topHeader\n  }\n\n  function updateUrlHashForHeader (headingsArray) {\n    const scrollTop = getScrollTop()\n    const topHeader = getTopHeader(headingsArray, scrollTop)\n    if (!topHeader || scrollTop < 5) {\n      if (!(window.location.hash === '#' || window.location.hash === '')) {\n        window.history.pushState(null, null, '#')\n      }\n    } else if (topHeader) {\n      const newHash = `#${topHeader.id}`\n      if (window.location.hash !== newHash) {\n        window.history.pushState(null, null, newHash)\n      }\n    }\n  }\n\n  return {\n    enableTocAnimation,\n    disableTocAnimation,\n    render,\n    updateToc,\n    getCurrentlyHighlighting,\n    getTopHeader,\n    getScrollTop,\n    updateUrlHashForHeader\n  }\n}\n", "export default {\n  // Where to render the table of contents.\n  tocSelector: '.js-toc',\n  // Or, you can pass in a DOM node instead\n  tocElement: null,\n  // Where to grab the headings to build the table of contents.\n  contentSelector: '.js-toc-content',\n  // Or, you can pass in a DOM node instead\n  contentElement: null,\n  // Which headings to grab inside of the contentSelector element.\n  headingSelector: 'h1, h2, h3',\n  // Headings that match the ignoreSelector will be skipped.\n  ignoreSelector: '.js-toc-ignore',\n  // For headings inside relative or absolute positioned\n  // containers within content.\n  hasInnerContainers: false,\n  // Main class to add to links.\n  linkClass: 'toc-link',\n  // Extra classes to add to links.\n  extraLinkClasses: '',\n  // Class to add to active links,\n  // the link corresponding to the top most heading on the page.\n  activeLinkClass: 'is-active-link',\n  // Main class to add to lists.\n  listClass: 'toc-list',\n  // Extra classes to add to lists.\n  extraListClasses: '',\n  // Class that gets added when a list should be collapsed.\n  isCollapsedClass: 'is-collapsed',\n  // Class that gets added when a list should be able\n  // to be collapsed but isn't necessarily collapsed.\n  collapsibleClass: 'is-collapsible',\n  // Class to add to list items.\n  listItemClass: 'toc-list-item',\n  // Class to add to active list items.\n  activeListItemClass: 'is-active-li',\n  // How many heading levels should not be collapsed.\n  // For example, number 6 will show everything since\n  // there are only 6 heading levels and number 0 will collapse them all.\n  // The sections that are hidden will open\n  // and close as you scroll to headings within them.\n  collapseDepth: 0,\n  // Smooth scrolling enabled.\n  scrollSmooth: true,\n  // Smooth scroll duration.\n  scrollSmoothDuration: 420,\n  // Smooth scroll offset.\n  scrollSmoothOffset: 0,\n  // Callback for scroll end.\n  scrollEndCallback: function (e) {},\n  // Headings offset between the headings and the top of\n  // the document (this is meant for minor adjustments).\n  headingsOffset: 1,\n  // Timeout between events firing to make sure it's\n  // not too rapid (for performance reasons).\n  throttleTimeout: 50,\n  // Element to add the positionFixedClass to.\n  positionFixedSelector: null,\n  // Fixed position class to add to make sidebar fixed after scrolling\n  // down past the fixedSidebarOffset.\n  positionFixedClass: 'is-position-fixed',\n  // fixedSidebarOffset can be any number but by default is set\n  // to auto which sets the fixedSidebarOffset to the sidebar\n  // element's offsetTop from the top of the document on init.\n  fixedSidebarOffset: 'auto',\n  // includeHtml can be set to true to include the HTML markup from the\n  // heading node instead of just including the innerText.\n  includeHtml: false,\n  // includeTitleTags automatically sets the html title tag of the link\n  // to match the title. This can be useful for SEO purposes or\n  // when truncating titles.\n  includeTitleTags: false,\n  // onclick function to apply to all links in toc. will be called with\n  // the event as the first parameter, and this can be used to stop,\n  // propagation, prevent default or perform action\n  onClick: function (e) {},\n  // orderedList can be set to false to generate unordered lists (ul)\n  // instead of ordered lists (ol)\n  orderedList: true,\n  // If there is a fixed article scroll container, set to calculate offset.\n  scrollContainer: null,\n  // prevent ToC DOM rendering if it's already rendered by an external system.\n  skipRendering: false,\n  // Optional callback to change heading labels.\n  // For example it can be used to cut down and put ellipses on multiline headings you deem too long.\n  // Called each time a heading is parsed. Expects a string and returns the modified label to display.\n  // Additionally, the attribute `data-heading-label` may be used on a heading to specify\n  // a shorter string to be used in the TOC.\n  // function (string) => string\n  headingLabelCallback: false,\n  // ignore headings that are hidden in DOM\n  ignoreHiddenElements: false,\n  // Optional callback to modify properties of parsed headings.\n  // The heading element is passed in node parameter and information\n  // parsed by default parser is provided in obj parameter.\n  // Function has to return the same or modified obj.\n  // The heading will be excluded from TOC if nothing is returned.\n  // function (object, HTMLElement) => object | void\n  headingObjectCallback: null,\n  // Set the base path, useful if you use a `base` tag in `head`.\n  basePath: '',\n  // Only takes affect when `tocSelector` is scrolling,\n  // keep the toc scroll position in sync with the content.\n  disableTocScrollSync: false,\n  // Offset for the toc scroll (top) position when scrolling the page.\n  // Only effective if `disableTocScrollSync` is false.\n  tocScrollOffset: 0,\n  // Enable the URL hash to update with the proper heading ID as\n  // a user scrolls the page.\n  enableUrlHashUpdateOnScroll: false\n}\n", "/**\n * This file is responsible for parsing the content from the DOM and making\n * sure data is nested properly.\n *\n * @author Tim Scanlin\n */\n\nexport default function parseContent (options) {\n  const reduce = [].reduce\n\n  /**\n   * Get the last item in an array and return a reference to it.\n   * @param {Array} array\n   * @return {Object}\n   */\n  function getLastItem (array) {\n    return array[array.length - 1]\n  }\n\n  /**\n   * Get heading level for a heading dom node.\n   * @param {HTMLElement} heading\n   * @return {Number}\n   */\n  function getHeadingLevel (heading) {\n    return +heading.nodeName.toUpperCase().replace('H', '')\n  }\n\n  /**\n   * Determine whether the object is an HTML Element.\n   * Also works inside iframes. HTML Elements might be created by the parent document.\n   * @param {Object} maybeElement\n   * @return {Number}\n   */\n  function isHTMLElement (maybeElement) {\n    try {\n      return (\n        maybeElement instanceof window.HTMLElement ||\n        maybeElement instanceof window.parent.HTMLElement\n      )\n    } catch (e) {\n      return maybeElement instanceof window.HTMLElement\n    }\n  }\n\n  /**\n   * Get important properties from a heading element and store in a plain object.\n   * @param {HTMLElement} heading\n   * @return {Object}\n   */\n  function getHeadingObject (heading) {\n    // each node is processed twice by this method because nestHeadingsArray() and addNode() calls it\n    // first time heading is real DOM node element, second time it is obj\n    // that is causing problem so I am processing only original DOM node\n    if (!isHTMLElement(heading)) return heading\n\n    if (options.ignoreHiddenElements && (!heading.offsetHeight || !heading.offsetParent)) {\n      return null\n    }\n\n    const headingLabel = heading.getAttribute('data-heading-label') ||\n      (options.headingLabelCallback ? String(options.headingLabelCallback(heading.innerText)) : (heading.innerText || heading.textContent).trim())\n    const obj = {\n      id: heading.id,\n      children: [],\n      nodeName: heading.nodeName,\n      headingLevel: getHeadingLevel(heading),\n      textContent: headingLabel\n    }\n\n    if (options.includeHtml) {\n      obj.childNodes = heading.childNodes\n    }\n\n    if (options.headingObjectCallback) {\n      return options.headingObjectCallback(obj, heading)\n    }\n\n    return obj\n  }\n\n  /**\n   * Add a node to the nested array.\n   * @param {Object} node\n   * @param {Array} nest\n   * @return {Array}\n   */\n  function addNode (node, nest) {\n    const obj = getHeadingObject(node)\n    const level = obj.headingLevel\n    let array = nest\n    let lastItem = getLastItem(array)\n    const lastItemLevel = lastItem\n      ? lastItem.headingLevel\n      : 0\n    let counter = level - lastItemLevel\n\n    while (counter > 0) {\n      lastItem = getLastItem(array)\n      // Handle case where there are multiple h5+ in a row.\n      if (lastItem && level === lastItem.headingLevel) {\n        break\n      } else if (lastItem && lastItem.children !== undefined) {\n        array = lastItem.children\n      }\n      counter--\n    }\n\n    if (level >= options.collapseDepth) {\n      obj.isCollapsed = true\n    }\n\n    array.push(obj)\n    return array\n  }\n\n  /**\n   * Select headings in content area, exclude any selector in options.ignoreSelector\n   * @param {HTMLElement} contentElement\n   * @param {Array} headingSelector\n   * @return {Array}\n   */\n  function selectHeadings (contentElement, headingSelector) {\n    let selectors = headingSelector\n    if (options.ignoreSelector) {\n      selectors = headingSelector.split(',')\n        .map(function mapSelectors (selector) {\n          return `${selector.trim()}:not(${options.ignoreSelector})`\n        })\n    }\n    try {\n      return contentElement.querySelectorAll(selectors)\n    } catch (e) {\n      console.warn(`Headers not found with selector: ${selectors}`); // eslint-disable-line\n      return null\n    }\n  }\n\n  /**\n   * Nest headings array into nested arrays with 'children' property.\n   * @param {Array} headingsArray\n   * @return {Object}\n   */\n  function nestHeadingsArray (headingsArray) {\n    return reduce.call(headingsArray, function reducer (prev, curr) {\n      const currentHeading = getHeadingObject(curr)\n      if (currentHeading) {\n        addNode(currentHeading, prev.nest)\n      }\n      return prev\n    }, {\n      nest: []\n    })\n  }\n\n  return {\n    nestHeadingsArray,\n    selectHeadings\n  }\n}\n", "/* eslint no-var: off */\n/* globals location, requestAnimationFrame */\n\nexport default function initSmoothScrolling (options) {\n  // if (isCssSmoothSCrollSupported()) { return }\n\n  var duration = options.duration\n  var offset = options.offset\n  if (typeof window === 'undefined' || typeof location === 'undefined') return\n\n  var pageUrl = location.hash\n    ? stripHash(location.href)\n    : location.href\n\n  delegatedLinkHijacking()\n\n  function delegatedLinkHijacking () {\n    document.body.addEventListener('click', onClick, false)\n\n    function onClick (e) {\n      if (\n        !isInPageLink(e.target) ||\n        e.target.className.indexOf('no-smooth-scroll') > -1 ||\n        (e.target.href.charAt(e.target.href.length - 2) === '#' &&\n        e.target.href.charAt(e.target.href.length - 1) === '!') ||\n        e.target.className.indexOf(options.linkClass) === -1) {\n        return\n      }\n\n      // Don't prevent default or hash doesn't change.\n      // e.preventDefault()\n\n      jump(e.target.hash, {\n        duration,\n        offset,\n        callback: function () {\n          setFocus(e.target.hash)\n        }\n      })\n    }\n  }\n\n  function isInPageLink (n) {\n    return n.tagName.toLowerCase() === 'a' &&\n      (n.hash.length > 0 || n.href.charAt(n.href.length - 1) === '#') &&\n      (stripHash(n.href) === pageUrl || stripHash(n.href) + '#' === pageUrl)\n  }\n\n  function stripHash (url) {\n    return url.slice(0, url.lastIndexOf('#'))\n  }\n\n  // function isCssSmoothSCrollSupported () {\n  //   return 'scrollBehavior' in document.documentElement.style\n  // }\n\n  // Adapted from:\n  // https://www.nczonline.net/blog/2013/01/15/fixing-skip-to-content-links/\n  function setFocus (hash) {\n    var element = document.getElementById(hash.substring(1))\n\n    if (element) {\n      if (!/^(?:a|select|input|button|textarea)$/i.test(element.tagName)) {\n        element.tabIndex = -1\n      }\n\n      element.focus()\n    }\n  }\n}\n\nfunction jump (target, options) {\n  var start = window.pageYOffset\n  var opt = {\n    duration: options.duration,\n    offset: options.offset || 0,\n    callback: options.callback,\n    easing: options.easing || easeInOutQuad\n  }\n  // This makes ids that start with a number work: ('[id=\"' + decodeURI(target).split('#').join('') + '\"]')\n  // DecodeURI for nonASCII hashes, they was encoded, but id was not encoded, it lead to not finding the tgt element by id.\n  // And this is for IE: document.body.scrollTop\n  // Handle decoded and non-decoded URIs since sometimes URLs automatically transform them (support for internation chars).\n  var tgt = document.querySelector('[id=\"' + decodeURI(target).split('#').join('') + '\"]') ||\n    document.querySelector('[id=\"' + (target).split('#').join('') + '\"]')\n  var distance = typeof target === 'string'\n    ? opt.offset + (\n      target\n        ? (tgt && tgt.getBoundingClientRect().top) || 0 // handle non-existent links better.\n        : -(document.documentElement.scrollTop || document.body.scrollTop))\n    : target\n  var duration = typeof opt.duration === 'function'\n    ? opt.duration(distance)\n    : opt.duration\n  var timeStart\n  var timeElapsed\n\n  requestAnimationFrame(function (time) { timeStart = time; loop(time) })\n  function loop (time) {\n    timeElapsed = time - timeStart\n\n    window.scrollTo(0, opt.easing(timeElapsed, start, distance, duration))\n\n    if (timeElapsed < duration) { requestAnimationFrame(loop) } else { end() }\n  }\n\n  function end () {\n    window.scrollTo(0, start + distance)\n\n    if (typeof opt.callback === 'function') { opt.callback() }\n  }\n\n  // Robert Penner's easeInOutQuad - http://robertpenner.com/easing/\n  function easeInOutQuad (t, b, c, d) {\n    t /= d / 2\n    if (t < 1) return c / 2 * t * t + b\n    t--\n    return -c / 2 * (t * (t - 2) - 1) + b\n  }\n}\n", "/* eslint no-var: off */\n\nconst SCROLL_LEEWAY = 30\nexport default function updateTocScroll (options) {\n  var toc = options.tocElement || document.querySelector(options.tocSelector)\n  if (toc && toc.scrollHeight > toc.clientHeight) {\n    var activeItem = toc.querySelector('.' + options.activeListItemClass)\n    if (activeItem) {\n      // Determine container top and bottom\n      var cTop = toc.scrollTop\n      var cBottom = cTop + toc.clientHeight\n\n      // Determine element top and bottom\n      var eTop = activeItem.offsetTop\n      var eBottom = eTop + activeItem.clientHeight\n\n      // Check if out of view\n      // Above scroll view\n      if (eTop < cTop + options.tocScrollOffset) {\n        toc.scrollTop -= (cTop - eTop) + options.tocScrollOffset\n      // Below scroll view\n      } else if (eBottom > cBottom - options.tocScrollOffset - SCROLL_LEEWAY) {\n        toc.scrollTop += (eBottom - cBottom) + options.tocScrollOffset + (2 * SCROLL_LEEWAY)\n      }\n    }\n  }\n}\n", "/* eslint no-var: off */\n/**\n * Tocbot\n * Tocbot creates a table of contents based on HTML headings on a page,\n * this allows users to easily jump to different sections of the document.\n * Tocbot was inspired by tocify (http://gregfranko.com/jquery.tocify.js/).\n * The main differences are that it works natively without any need for jquery or jquery UI).\n *\n * @author Tim Scanlin\n */\n\nimport BuildHtml from './build-html.js'\nimport defaultOptions from './default-options.js'\nimport ParseContent from './parse-content.js'\nimport initSmoothScrolling from './scroll-smooth/index.js'\nimport updateTocScroll from './update-toc-scroll.js'\n\n// For testing purposes.\nexport let _options = {} // Object to store current options.\nexport let _buildHtml\nexport let _parseContent\nexport let _headingsArray\nexport let _scrollListener\n\nlet clickListener\n\n/**\n * Initialize tocbot.\n * @param {object} customOptions\n */\nexport function init (customOptions) {\n  // Merge defaults with user options.\n  // Set to options variable at the top.\n  _options = extend(defaultOptions, customOptions || {})\n\n  // Init smooth scroll if enabled (default).\n  if (_options.scrollSmooth) {\n    _options.duration = _options.scrollSmoothDuration\n    _options.offset = _options.scrollSmoothOffset\n\n    initSmoothScrolling(_options)\n  }\n\n  // Pass options to these modules.\n  _buildHtml = BuildHtml(_options)\n  _parseContent = ParseContent(_options)\n\n  // Destroy it if it exists first.\n  destroy()\n\n  const contentElement = getContentElement(_options)\n  if (contentElement === null) {\n    return\n  }\n\n  const tocElement = getTocElement(_options)\n  if (tocElement === null) {\n    return\n  }\n\n  // Get headings array.\n  _headingsArray = _parseContent.selectHeadings(\n    contentElement,\n    _options.headingSelector\n  )\n\n  // Return if no headings are found.\n  if (_headingsArray === null) {\n    return\n  }\n\n  // Build nested headings array.\n  const nestedHeadingsObj = _parseContent.nestHeadingsArray(_headingsArray)\n  const nestedHeadings = nestedHeadingsObj.nest\n\n  // Render.\n  if (!_options.skipRendering) {\n    _buildHtml.render(tocElement, nestedHeadings)\n  } else {\n    // No need to attach listeners if skipRendering is true, this was causing errors.\n    return this\n  }\n\n  // Update Sidebar and bind listeners.\n  _scrollListener = throttle((e) => {\n    _buildHtml.updateToc(_headingsArray)\n    !_options.disableTocScrollSync && updateTocScroll(_options)\n\n    if (_options.enableUrlHashUpdateOnScroll) {\n      const enableUpdatingHash = _buildHtml.getCurrentlyHighlighting()\n      enableUpdatingHash && _buildHtml.updateUrlHashForHeader(_headingsArray)\n    }\n\n    const isTop =\n      e?.target?.scrollingElement &&\n      e.target.scrollingElement.scrollTop === 0\n    if ((e && (e.eventPhase === 0 || e.currentTarget === null)) || isTop) {\n      _buildHtml.updateToc(_headingsArray)\n      if (_options.scrollEndCallback) {\n        _options.scrollEndCallback(e)\n      }\n    }\n  }, _options.throttleTimeout)\n  _scrollListener()\n  if (\n    _options.scrollContainer &&\n    document.querySelector(_options.scrollContainer)\n  ) {\n    document\n      .querySelector(_options.scrollContainer)\n      .addEventListener('scroll', _scrollListener, false)\n    document\n      .querySelector(_options.scrollContainer)\n      .addEventListener('resize', _scrollListener, false)\n  } else {\n    document.addEventListener('scroll', _scrollListener, false)\n    document.addEventListener('resize', _scrollListener, false)\n  }\n\n  // Bind click listeners to disable animation.\n  let timeout = null\n  clickListener = throttle((event) => {\n    if (_options.scrollSmooth) {\n      _buildHtml.disableTocAnimation(event)\n    }\n    _buildHtml.updateToc(_headingsArray)\n    // Timeout to re-enable the animation.\n    timeout && clearTimeout(timeout)\n    timeout = setTimeout(() => {\n      _buildHtml.enableTocAnimation()\n    }, _options.scrollSmoothDuration)\n  }, _options.throttleTimeout)\n\n  if (\n    _options.scrollContainer &&\n    document.querySelector(_options.scrollContainer)\n  ) {\n    document\n      .querySelector(_options.scrollContainer)\n      .addEventListener('click', clickListener, false)\n  } else {\n    document.addEventListener('click', clickListener, false)\n  }\n}\n\n/**\n * Destroy tocbot.\n */\nexport function destroy () {\n  const tocElement = getTocElement(_options)\n  if (tocElement === null) {\n    return\n  }\n\n  if (!_options.skipRendering) {\n    // Clear HTML.\n    if (tocElement) {\n      tocElement.innerHTML = ''\n    }\n  }\n\n  // Remove event listeners.\n  if (\n    _options.scrollContainer &&\n    document.querySelector(_options.scrollContainer)\n  ) {\n    document\n      .querySelector(_options.scrollContainer)\n      .removeEventListener('scroll', _scrollListener, false)\n    document\n      .querySelector(_options.scrollContainer)\n      .removeEventListener('resize', _scrollListener, false)\n    if (_buildHtml) {\n      document\n        .querySelector(_options.scrollContainer)\n        .removeEventListener('click', clickListener, false)\n    }\n  } else {\n    document.removeEventListener('scroll', _scrollListener, false)\n    document.removeEventListener('resize', _scrollListener, false)\n    if (_buildHtml) {\n      document.removeEventListener('click', clickListener, false)\n    }\n  }\n}\n\n/**\n * Refresh tocbot.\n */\nexport function refresh (customOptions) {\n  destroy()\n  init(customOptions || _options)\n}\n\n// From: https://github.com/Raynos/xtend\nconst hasOwnProp = Object.prototype.hasOwnProperty\nfunction extend (...args) {\n  const target = {}\n  for (let i = 0; i < args.length; i++) {\n    const source = args[i]\n    for (const key in source) {\n      if (hasOwnProp.call(source, key)) {\n        target[key] = source[key]\n      }\n    }\n  }\n  return target\n}\n\n// From: https://remysharp.com/2010/07/21/throttling-function-calls\nfunction throttle (fn, threshold, scope) {\n  threshold || (threshold = 250)\n  let last\n  let deferTimer\n  return function (...args) {\n    const context = scope || this\n    const now = +new Date()\n    if (last && now < last + threshold) {\n      // hold on to it\n      clearTimeout(deferTimer)\n      deferTimer = setTimeout(() => {\n        last = now\n        fn.apply(context, args)\n      }, threshold)\n    } else {\n      last = now\n      fn.apply(context, args)\n    }\n  }\n}\n\nfunction getContentElement (options) {\n  try {\n    return (\n      options.contentElement || document.querySelector(options.contentSelector)\n    )\n  } catch (e) {\n    console.warn(`Contents element not found: ${options.contentSelector}`) // eslint-disable-line\n    return null\n  }\n}\n\nfunction getTocElement (options) {\n  try {\n    return options.tocElement || document.querySelector(options.tocSelector)\n  } catch (e) {\n    console.warn(`TOC element not found: ${options.tocSelector}`) // eslint-disable-line\n    return null\n  }\n}\n\n// Add default export for easier use.\nconst tocbot = {\n  _options,\n  _buildHtml,\n  _parseContent,\n  init,\n  destroy,\n  refresh\n}\n\nexport default tocbot\n", "import { destroy, init, refresh } from './src/js/index-esm.js'\nconst tocbot = { destroy, init, refresh }\n\nexport { destroy, init, refresh }\nexport default tocbot\n", "/*\n * table of contents initialistation\n*/\nimport tocbot from 'tocbot';\n\nexport function initialiseTocbot() {\n  tocbot.init({\n    tocSelector: '.toc',\n    contentSelector: '.article',\n    hasInnerContainers: true\n  })\n\n  // safari fix  - toc not showing without a forced repaint - todo - retest\n  window.onload = function() {\n    const toc = document.querySelector('.table-of-contents');\n    if (toc) {\n        // Force a repaint by triggering GPU acceleration\n        toc.style.transform = 'translateZ(0)';\n    }\n  };\n}\n/* \n * toggle mobile toc when toc icon is clicked\n*/\nexport function toggleToc() {\n  const tocButton = document.querySelector(\".toc-toggle\");\n  const tableOfContents = document.querySelector(\".table-of-contents\");\n\n  if (!tableOfContents) {\n    return;\n  }\n\n  function toggleTableOfContents(){\n      tableOfContents.classList.toggle(\"toc-open\");\n  }\n  if (!tocButton) {\n    return;\n  }\n\n  window.addEventListener('click', function(e){\n    let tocOpenElement = null;\n    tocOpenElement = tableOfContents.querySelector(\".toc-open\");\n\n    if (tocOpenElement && tocOpenElement.contains(e.target)) {\n        return;\n    }\n\n    // Close TOC when clicking outside the TOC\n    if (!tableOfContents.contains(e.target) && !tocButton.contains(e.target) && tableOfContents.classList.contains(\"toc-open\")) {\n        toggleTableOfContents();\n    }\n  });\n\n  /* Toggle mobile toc */\n  tocButton.addEventListener('click', toggleTableOfContents, false);\n}\n\n/*\n * update reading progress based on scroll position\n*/\nexport function updateTocReadingProgress() {\n  const tocToggleButton = document.querySelector('.toc-toggle');\n  if (!tocToggleButton) {\n    return;\n  }\n\n  function updateProgress() {\n    const totalHeight = document.body.clientHeight;\n    const windowHeight = document.documentElement.clientHeight;\n    const position = window.scrollY;\n    const progress = position / (totalHeight - windowHeight)*100;\n    tocToggleButton.setAttribute('data-progress', `${progress.toFixed(0)}%`);\n\n    // this is used to update the circular progress bar show around the toc button\n    tocToggleButton.style.setProperty(\n    '--conic-gradient',\n    `var(--reading-progress-color) 0deg 0%,  \n      var(--reading-progress-color) 0deg ${ progress.toFixed(3) }%,\n      var(--background-color) 0deg ${ 1 - progress.toFixed(3) }%,\n      var(--background-color) 0deg 360deg`,\n    );\n    requestAnimationFrame(updateProgress);\n  }\n  requestAnimationFrame(updateProgress);\n}\n", "import { demoOptionsPicker } from './demo.js';\nimport { copyLink } from './copy-link.js';\nimport { darkModeToggle } from './dark-mode-toggle.js';\nimport { enrolDialogModal } from './enrol-dialog.js';\nimport { lightbox } from './lightbox.js';\nimport { mainMenuSetup, mainNavMenuToggle, sidebarSetup } from './navigation.js'\nimport { pagination } from './pagination.js';\nimport { initialiseTocbot, toggleToc, updateTocReadingProgress } from './table-of-contents.js';\nimport { Prism } from 'prismjs';\nimport 'prismjs/components/prism-javascript.min.js';\nimport 'prismjs/components/prism-nginx.js';\nimport 'prismjs/components/prism-bash.min.js';\nimport 'prismjs/plugins/command-line/prism-command-line.js';\n\n// do the dom changes for the main navigation items first\nmainMenuSetup();\n\n// sets the initial dark mode for new visitors (written to local storage)\ndarkModeToggle();\ninitialiseTocbot();\n\n// set up interactive items\nenrolDialogModal();\nlightbox();\ndemoOptionsPicker(); // only runs on demo sites\npagination(false);\n\n// event listenrs\nmainNavMenuToggle();\ntoggleToc();\nupdateTocReadingProgress();\ncopyLink();\n\n// run this last as it has to modify the icons on the sidebar and has to wait until these are loaded via network requests\nsidebarSetup();", "Prism.languages.javascript=Prism.languages.extend(\"clike\",{\"class-name\":[Prism.languages.clike[\"class-name\"],{pattern:/(^|[^$\\w\\xA0-\\uFFFF])(?!\\s)[_$A-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\\})\\s*)catch\\b/,lookbehind:!0},{pattern:/(^|[^.]|\\.\\.\\.\\s*)\\b(?:as|assert(?=\\s*\\{)|async(?=\\s*(?:function\\b|\\(|[$\\w\\xA0-\\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\\s*(?:\\{|$))|for|from(?=\\s*(?:['\"]|$))|function|(?:get|set)(?=\\s*(?:[#\\[$\\w\\xA0-\\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\\b/,lookbehind:!0}],function:/#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*(?:\\.\\s*(?:apply|bind|call)\\s*)?\\()/,number:{pattern:RegExp(\"(^|[^\\\\w$])(?:NaN|Infinity|0[bB][01]+(?:_[01]+)*n?|0[oO][0-7]+(?:_[0-7]+)*n?|0[xX][\\\\dA-Fa-f]+(?:_[\\\\dA-Fa-f]+)*n?|\\\\d+(?:_\\\\d+)*n|(?:\\\\d+(?:_\\\\d+)*(?:\\\\.(?:\\\\d+(?:_\\\\d+)*)?)?|\\\\.\\\\d+(?:_\\\\d+)*)(?:[Ee][+-]?\\\\d+(?:_\\\\d+)*)?)(?![\\\\w$])\"),lookbehind:!0},operator:/--|\\+\\+|\\*\\*=?|=>|&&=?|\\|\\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\\.{3}|\\?\\?=?|\\?\\.?|[~:]/}),Prism.languages.javascript[\"class-name\"][0].pattern=/(\\b(?:class|extends|implements|instanceof|interface|new)\\s+)[\\w.\\\\]+/,Prism.languages.insertBefore(\"javascript\",\"keyword\",{regex:{pattern:RegExp(\"((?:^|[^$\\\\w\\\\xA0-\\\\uFFFF.\\\"'\\\\])\\\\s]|\\\\b(?:return|yield))\\\\s*)/(?:(?:\\\\[(?:[^\\\\]\\\\\\\\\\r\\n]|\\\\\\\\.)*\\\\]|\\\\\\\\.|[^/\\\\\\\\\\\\[\\r\\n])+/[dgimyus]{0,7}|(?:\\\\[(?:[^[\\\\]\\\\\\\\\\r\\n]|\\\\\\\\.|\\\\[(?:[^[\\\\]\\\\\\\\\\r\\n]|\\\\\\\\.|\\\\[(?:[^[\\\\]\\\\\\\\\\r\\n]|\\\\\\\\.)*\\\\])*\\\\])*\\\\]|\\\\\\\\.|[^/\\\\\\\\\\\\[\\r\\n])+/[dgimyus]{0,7}v[dgimyus]{0,7})(?=(?:\\\\s|/\\\\*(?:[^*]|\\\\*(?!/))*\\\\*/)*(?:$|[\\r\\n,.;:})\\\\]]|//))\"),lookbehind:!0,greedy:!0,inside:{\"regex-source\":{pattern:/^(\\/)[\\s\\S]+(?=\\/[a-z]*$)/,lookbehind:!0,alias:\"language-regex\",inside:Prism.languages.regex},\"regex-delimiter\":/^\\/|\\/$/,\"regex-flags\":/^[a-z]+$/}},\"function-variable\":{pattern:/#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*[=:]\\s*(?:async\\s*)?(?:\\bfunction\\b|(?:\\((?:[^()]|\\([^()]*\\))*\\)|(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*)\\s*=>))/,alias:\"function\"},parameter:[{pattern:/(function(?:\\s+(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*)?\\s*\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\\w\\xA0-\\uFFFF])(?!\\s)[_$a-z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\)\\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\\b|\\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\\w\\xA0-\\uFFFF]))(?:(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*\\s*)\\(\\s*|\\]\\s*\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\)\\s*\\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\\b[A-Z](?:[A-Z_]|\\dx?)*\\b/}),Prism.languages.insertBefore(\"javascript\",\"string\",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:\"comment\"},\"template-string\":{pattern:/`(?:\\\\[\\s\\S]|\\$\\{(?:[^{}]|\\{(?:[^{}]|\\{[^}]*\\})*\\})+\\}|(?!\\$\\{)[^\\\\`])*`/,greedy:!0,inside:{\"template-punctuation\":{pattern:/^`|`$/,alias:\"string\"},interpolation:{pattern:/((?:^|[^\\\\])(?:\\\\{2})*)\\$\\{(?:[^{}]|\\{(?:[^{}]|\\{[^}]*\\})*\\})+\\}/,lookbehind:!0,inside:{\"interpolation-punctuation\":{pattern:/^\\$\\{|\\}$/,alias:\"punctuation\"},rest:Prism.languages.javascript}},string:/[\\s\\S]+/}},\"string-property\":{pattern:/((?:^|[,{])[ \\t]*)([\"'])(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\2)[^\\\\\\r\\n])*\\2(?=\\s*:)/m,lookbehind:!0,greedy:!0,alias:\"property\"}}),Prism.languages.insertBefore(\"javascript\",\"operator\",{\"literal-property\":{pattern:/((?:^|[,{])[ \\t]*)(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*:)/m,lookbehind:!0,alias:\"property\"}}),Prism.languages.markup&&(Prism.languages.markup.tag.addInlined(\"script\",\"javascript\"),Prism.languages.markup.tag.addAttribute(\"on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)\",\"javascript\")),Prism.languages.js=Prism.languages.javascript;", "(function (Prism) {\n\n\tvar variable = /\\$(?:\\w[a-z\\d]*(?:_[^\\x00-\\x1F\\s\"'\\\\()$]*)?|\\{[^}\\s\"'\\\\]+\\})/i;\n\n\tPrism.languages.nginx = {\n\t\t'comment': {\n\t\t\tpattern: /(^|[\\s{};])#.*/,\n\t\t\tlookbehind: true,\n\t\t\tgreedy: true\n\t\t},\n\t\t'directive': {\n\t\t\tpattern: /(^|\\s)\\w(?:[^;{}\"'\\\\\\s]|\\\\.|\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|\\s+(?:#.*(?!.)|(?![#\\s])))*?(?=\\s*[;{])/,\n\t\t\tlookbehind: true,\n\t\t\tgreedy: true,\n\t\t\tinside: {\n\t\t\t\t'string': {\n\t\t\t\t\tpattern: /((?:^|[^\\\\])(?:\\\\\\\\)*)(?:\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*')/,\n\t\t\t\t\tlookbehind: true,\n\t\t\t\t\tgreedy: true,\n\t\t\t\t\tinside: {\n\t\t\t\t\t\t'escape': {\n\t\t\t\t\t\t\tpattern: /\\\\[\"'\\\\nrt]/,\n\t\t\t\t\t\t\talias: 'entity'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'variable': variable\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t'comment': {\n\t\t\t\t\tpattern: /(\\s)#.*/,\n\t\t\t\t\tlookbehind: true,\n\t\t\t\t\tgreedy: true\n\t\t\t\t},\n\t\t\t\t'keyword': {\n\t\t\t\t\tpattern: /^\\S+/,\n\t\t\t\t\tgreedy: true\n\t\t\t\t},\n\n\t\t\t\t// other patterns\n\n\t\t\t\t'boolean': {\n\t\t\t\t\tpattern: /(\\s)(?:off|on)(?!\\S)/,\n\t\t\t\t\tlookbehind: true\n\t\t\t\t},\n\t\t\t\t'number': {\n\t\t\t\t\tpattern: /(\\s)\\d+[a-z]*(?!\\S)/i,\n\t\t\t\t\tlookbehind: true\n\t\t\t\t},\n\t\t\t\t'variable': variable\n\t\t\t}\n\t\t},\n\t\t'punctuation': /[{};]/\n\t};\n\n}(Prism));\n", "!function(e){var t=\"\\\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\\\b\",a={pattern:/(^([\"']?)\\w+\\2)[ \\t]+\\S.*/,lookbehind:!0,alias:\"punctuation\",inside:null},n={bash:a,environment:{pattern:RegExp(\"\\\\$\"+t),alias:\"constant\"},variable:[{pattern:/\\$?\\(\\([\\s\\S]+?\\)\\)/,greedy:!0,inside:{variable:[{pattern:/(^\\$\\(\\([\\s\\S]+)\\)\\)/,lookbehind:!0},/^\\$\\(\\(/],number:/\\b0x[\\dA-Fa-f]+\\b|(?:\\b\\d+(?:\\.\\d*)?|\\B\\.\\d+)(?:[Ee]-?\\d+)?/,operator:/--|\\+\\+|\\*\\*=?|<<=?|>>=?|&&|\\|\\||[=!+\\-*/%<>^&|]=?|[?~:]/,punctuation:/\\(\\(?|\\)\\)?|,|;/}},{pattern:/\\$\\((?:\\([^)]+\\)|[^()])+\\)|`[^`]+`/,greedy:!0,inside:{variable:/^\\$\\(|^`|\\)$|`$/}},{pattern:/\\$\\{[^}]+\\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\\/]|##?|%%?|\\^\\^?|,,?/,punctuation:/[\\[\\]]/,environment:{pattern:RegExp(\"(\\\\{)\"+t),lookbehind:!0,alias:\"constant\"}}},/\\$(?:\\w+|[#?*!@$])/],entity:/\\\\(?:[abceEfnrtv\\\\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};e.languages.bash={shebang:{pattern:/^#!\\s*\\/.*/,alias:\"important\"},comment:{pattern:/(^|[^\"{\\\\$])#.*/,lookbehind:!0},\"function-name\":[{pattern:/(\\bfunction\\s+)[\\w-]+(?=(?:\\s*\\(?:\\s*\\))?\\s*\\{)/,lookbehind:!0,alias:\"function\"},{pattern:/\\b[\\w-]+(?=\\s*\\(\\s*\\)\\s*\\{)/,alias:\"function\"}],\"for-or-select\":{pattern:/(\\b(?:for|select)\\s+)\\w+(?=\\s+in\\s)/,alias:\"variable\",lookbehind:!0},\"assign-left\":{pattern:/(^|[\\s;|&]|[<>]\\()\\w+(?:\\.\\w+)*(?=\\+?=)/,inside:{environment:{pattern:RegExp(\"(^|[\\\\s;|&]|[<>]\\\\()\"+t),lookbehind:!0,alias:\"constant\"}},alias:\"variable\",lookbehind:!0},parameter:{pattern:/(^|\\s)-{1,2}(?:\\w+:[+-]?)?\\w+(?:\\.\\w+)*(?=[=\\s]|$)/,alias:\"variable\",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\\s*)(\\w+)\\s[\\s\\S]*?(?:\\r?\\n|\\r)\\2/,lookbehind:!0,greedy:!0,inside:n},{pattern:/((?:^|[^<])<<-?\\s*)([\"'])(\\w+)\\2\\s[\\s\\S]*?(?:\\r?\\n|\\r)\\3/,lookbehind:!0,greedy:!0,inside:{bash:a}},{pattern:/(^|[^\\\\](?:\\\\\\\\)*)\"(?:\\\\[\\s\\S]|\\$\\([^)]+\\)|\\$(?!\\()|`[^`]+`|[^\"\\\\`$])*\"/,lookbehind:!0,greedy:!0,inside:n},{pattern:/(^|[^$\\\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\\$'(?:[^'\\\\]|\\\\[\\s\\S])*'/,greedy:!0,inside:{entity:n.entity}}],environment:{pattern:RegExp(\"\\\\$?\"+t),alias:\"constant\"},variable:n.variable,function:{pattern:/(^|[\\s;|&]|[<>]\\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\\s;|&]|[<>]\\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\\s;|&]|[<>]\\()(?:\\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\\s;|&])/,lookbehind:!0,alias:\"class-name\"},boolean:{pattern:/(^|[\\s;|&]|[<>]\\()(?:false|true)(?=$|[)\\s;|&])/,lookbehind:!0},\"file-descriptor\":{pattern:/\\B&\\d\\b/,alias:\"important\"},operator:{pattern:/\\d?<>|>\\||\\+=|=[=~]?|!=?|<<[<-]?|[&\\d]?>>|\\d[<>]&?|[<>][&=]?|&[>&]?|\\|[&|]?/,inside:{\"file-descriptor\":{pattern:/^\\d/,alias:\"important\"}}},punctuation:/\\$?\\(\\(?|\\)\\)?|\\.\\.|[{}[\\];\\\\]/,number:{pattern:/(^|\\s)(?:[1-9]\\d*|0)(?:[.,]\\d+)?\\b/,lookbehind:!0}},a.inside=e.languages.bash;for(var s=[\"comment\",\"function-name\",\"for-or-select\",\"assign-left\",\"parameter\",\"string\",\"environment\",\"function\",\"keyword\",\"builtin\",\"boolean\",\"file-descriptor\",\"operator\",\"punctuation\",\"number\"],o=n.variable[1].inside,i=0;i<s.length;i++)o[s[i]]=e.languages.bash[s[i]];e.languages.sh=e.languages.bash,e.languages.shell=e.languages.bash}(Prism);", "(function () {\n\n\tif (typeof Prism === 'undefined' || typeof document === 'undefined') {\n\t\treturn;\n\t}\n\n\tvar CLASS_PATTERN = /(?:^|\\s)command-line(?:\\s|$)/;\n\tvar PROMPT_CLASS = 'command-line-prompt';\n\n\t/** @type {(str: string, prefix: string) => boolean} */\n\tvar startsWith = ''.startsWith\n\t\t? function (s, p) { return s.startsWith(p); }\n\t\t: function (s, p) { return s.indexOf(p) === 0; };\n\n\t// Support for IE11 that has no endsWith()\n\t/** @type {(str: string, suffix: string) => boolean} */\n\tvar endsWith = ''.endsWith\n\t\t? function (str, suffix) {\n\t\t\treturn str.endsWith(suffix);\n\t\t}\n\t\t: function (str, suffix) {\n\t\t\tvar len = str.length;\n\t\t\treturn str.substring(len - suffix.length, len) === suffix;\n\t\t};\n\n\t/**\n\t * Returns whether the given hook environment has a command line info object.\n\t *\n\t * @param {any} env\n\t * @returns {boolean}\n\t */\n\tfunction hasCommandLineInfo(env) {\n\t\tvar vars = env.vars = env.vars || {};\n\t\treturn 'command-line' in vars;\n\t}\n\t/**\n\t * Returns the command line info object from the given hook environment.\n\t *\n\t * @param {any} env\n\t * @returns {CommandLineInfo}\n\t *\n\t * @typedef CommandLineInfo\n\t * @property {boolean} [complete]\n\t * @property {number} [numberOfLines]\n\t * @property {string[]} [outputLines]\n\t */\n\tfunction getCommandLineInfo(env) {\n\t\tvar vars = env.vars = env.vars || {};\n\t\treturn vars['command-line'] = vars['command-line'] || {};\n\t}\n\n\n\tPrism.hooks.add('before-highlight', function (env) {\n\t\tvar commandLine = getCommandLineInfo(env);\n\n\t\tif (commandLine.complete || !env.code) {\n\t\t\tcommandLine.complete = true;\n\t\t\treturn;\n\t\t}\n\n\t\t// Works only for <code> wrapped inside <pre> (not inline).\n\t\tvar pre = env.element.parentElement;\n\t\tif (!pre || !/pre/i.test(pre.nodeName) || // Abort only if neither the <pre> nor the <code> have the class\n\t\t\t(!CLASS_PATTERN.test(pre.className) && !CLASS_PATTERN.test(env.element.className))) {\n\t\t\tcommandLine.complete = true;\n\t\t\treturn;\n\t\t}\n\n\t\t// The element might be highlighted multiple times, so we just remove the previous prompt\n\t\tvar existingPrompt = env.element.querySelector('.' + PROMPT_CLASS);\n\t\tif (existingPrompt) {\n\t\t\texistingPrompt.remove();\n\t\t}\n\n\t\tvar codeLines = env.code.split('\\n');\n\n\t\tcommandLine.numberOfLines = codeLines.length;\n\t\t/** @type {string[]} */\n\t\tvar outputLines = commandLine.outputLines = [];\n\n\t\tvar outputSections = pre.getAttribute('data-output');\n\t\tvar outputFilter = pre.getAttribute('data-filter-output');\n\t\tif (outputSections !== null) { // The user specified the output lines. -- cwells\n\t\t\toutputSections.split(',').forEach(function (section) {\n\t\t\t\tvar range = section.split('-');\n\t\t\t\tvar outputStart = parseInt(range[0], 10);\n\t\t\t\tvar outputEnd = range.length === 2 ? parseInt(range[1], 10) : outputStart;\n\n\t\t\t\tif (!isNaN(outputStart) && !isNaN(outputEnd)) {\n\t\t\t\t\tif (outputStart < 1) {\n\t\t\t\t\t\toutputStart = 1;\n\t\t\t\t\t}\n\t\t\t\t\tif (outputEnd > codeLines.length) {\n\t\t\t\t\t\toutputEnd = codeLines.length;\n\t\t\t\t\t}\n\t\t\t\t\t// Convert start and end to 0-based to simplify the arrays. -- cwells\n\t\t\t\t\toutputStart--;\n\t\t\t\t\toutputEnd--;\n\t\t\t\t\t// Save the output line in an array and clear it in the code so it's not highlighted. -- cwells\n\t\t\t\t\tfor (var j = outputStart; j <= outputEnd; j++) {\n\t\t\t\t\t\toutputLines[j] = codeLines[j];\n\t\t\t\t\t\tcodeLines[j] = '';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (outputFilter) { // Treat lines beginning with this string as output. -- cwells\n\t\t\tfor (var i = 0; i < codeLines.length; i++) {\n\t\t\t\tif (startsWith(codeLines[i], outputFilter)) { // This line is output. -- cwells\n\t\t\t\t\toutputLines[i] = codeLines[i].slice(outputFilter.length);\n\t\t\t\t\tcodeLines[i] = '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar continuationLineIndicies = commandLine.continuationLineIndicies = new Set();\n\t\tvar lineContinuationStr = pre.getAttribute('data-continuation-str');\n\t\tvar continuationFilter = pre.getAttribute('data-filter-continuation');\n\n\t\t// Identify code lines where the command has continued onto subsequent\n\t\t// lines and thus need a different prompt. Need to do this after the output\n\t\t// lines have been removed to ensure we don't pick up a continuation string\n\t\t// in an output line.\n\t\tfor (var j = 0; j < codeLines.length; j++) {\n\t\t\tvar line = codeLines[j];\n\t\t\tif (!line) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Record the next line as a continuation if this one ends in a continuation str.\n\t\t\tif (lineContinuationStr && endsWith(line, lineContinuationStr)) {\n\t\t\t\tcontinuationLineIndicies.add(j + 1);\n\t\t\t}\n\t\t\t// Record this line as a continuation if marked with a continuation prefix\n\t\t\t// (that we will remove).\n\t\t\tif (j > 0 && continuationFilter && startsWith(line, continuationFilter)) {\n\t\t\t\tcodeLines[j] = line.slice(continuationFilter.length);\n\t\t\t\tcontinuationLineIndicies.add(j);\n\t\t\t}\n\t\t}\n\n\t\tenv.code = codeLines.join('\\n');\n\t});\n\n\tPrism.hooks.add('before-insert', function (env) {\n\t\tvar commandLine = getCommandLineInfo(env);\n\n\t\tif (commandLine.complete) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Reinsert the output lines into the highlighted code. -- cwells\n\t\tvar codeLines = env.highlightedCode.split('\\n');\n\t\tvar outputLines = commandLine.outputLines || [];\n\t\tfor (var i = 0, l = codeLines.length; i < l; i++) {\n\t\t\t// Add spans to allow distinction of input/output text for styling\n\t\t\tif (outputLines.hasOwnProperty(i)) {\n\t\t\t\t// outputLines were removed from codeLines so missed out on escaping\n\t\t\t\t// of markup so do it here.\n\t\t\t\tcodeLines[i] = '<span class=\"token output\">'\n\t\t\t\t\t+ Prism.util.encode(outputLines[i]) + '</span>';\n\t\t\t} else {\n\t\t\t\tcodeLines[i] = '<span class=\"token command\">'\n\t\t\t\t\t+ codeLines[i] + '</span>';\n\t\t\t}\n\t\t}\n\t\tenv.highlightedCode = codeLines.join('\\n');\n\t});\n\n\tPrism.hooks.add('complete', function (env) {\n\t\tif (!hasCommandLineInfo(env)) {\n\t\t\t// the previous hooks never ran\n\t\t\treturn;\n\t\t}\n\n\t\tvar commandLine = getCommandLineInfo(env);\n\n\t\tif (commandLine.complete) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar pre = env.element.parentElement;\n\t\tif (CLASS_PATTERN.test(env.element.className)) { // Remove the class \"command-line\" from the <code>\n\t\t\tenv.element.className = env.element.className.replace(CLASS_PATTERN, ' ');\n\t\t}\n\t\tif (!CLASS_PATTERN.test(pre.className)) { // Add the class \"command-line\" to the <pre>\n\t\t\tpre.className += ' command-line';\n\t\t}\n\n\t\tfunction getAttribute(key, defaultValue) {\n\t\t\treturn (pre.getAttribute(key) || defaultValue).replace(/\"/g, '&quot');\n\t\t}\n\n\t\t// Create the \"rows\" that will become the command-line prompts. -- cwells\n\t\tvar promptLines = '';\n\t\tvar rowCount = commandLine.numberOfLines || 0;\n\t\tvar promptText = getAttribute('data-prompt', '');\n\t\tvar promptLine;\n\t\tif (promptText !== '') {\n\t\t\tpromptLine = '<span data-prompt=\"' + promptText + '\"></span>';\n\t\t} else {\n\t\t\tvar user = getAttribute('data-user', 'user');\n\t\t\tvar host = getAttribute('data-host', 'localhost');\n\t\t\tpromptLine = '<span data-user=\"' + user + '\" data-host=\"' + host + '\"></span>';\n\t\t}\n\n\t\tvar continuationLineIndicies = commandLine.continuationLineIndicies || new Set();\n\t\tvar continuationPromptText = getAttribute('data-continuation-prompt', '>');\n\t\tvar continuationPromptLine = '<span data-continuation-prompt=\"' + continuationPromptText + '\"></span>';\n\n\t\t// Assemble all the appropriate prompt/continuation lines\n\t\tfor (var j = 0; j < rowCount; j++) {\n\t\t\tif (continuationLineIndicies.has(j)) {\n\t\t\t\tpromptLines += continuationPromptLine;\n\t\t\t} else {\n\t\t\t\tpromptLines += promptLine;\n\t\t\t}\n\t\t}\n\n\t\t// Create the wrapper element. -- cwells\n\t\tvar prompt = document.createElement('span');\n\t\tprompt.className = PROMPT_CLASS;\n\t\tprompt.innerHTML = promptLines;\n\n\t\t// Remove the prompt from the output lines. -- cwells\n\t\tvar outputLines = commandLine.outputLines || [];\n\t\tfor (var i = 0, l = outputLines.length; i < l; i++) {\n\t\t\tif (outputLines.hasOwnProperty(i)) {\n\t\t\t\tvar node = prompt.children[i];\n\t\t\t\tnode.removeAttribute('data-user');\n\t\t\t\tnode.removeAttribute('data-host');\n\t\t\t\tnode.removeAttribute('data-prompt');\n\t\t\t}\n\t\t}\n\n\t\tenv.element.insertBefore(prompt, env.element.firstChild);\n\t\tcommandLine.complete = true;\n\t});\n\n}());\n"],
  "mappings": "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",
  "names": ["createElement", "className", "tagName", "appendToEl", "el", "document", "appendChild", "equalizePoints", "p1", "p2", "x", "y", "id", "undefined", "roundPoint", "p", "Math", "round", "getDistanceBetween", "abs", "sqrt", "pointsEqual", "clamp", "val", "min", "max", "toTransformString", "scale", "propValue", "setTransform", "style", "transform", "setTransitionStyle", "prop", "duration", "ease", "transition", "defaultCSSEasing", "setWidthHeight", "w", "h", "width", "height", "removeTransitionStyle", "decodeImage", "img", "decode", "catch", "complete", "Promise", "resolve", "reject", "onload", "onerror", "specialKeyUsed", "e", "button", "ctrlKey", "metaKey", "altKey", "shiftKey", "getElementsFromOption", "option", "legacySelector", "parent", "elements", "Element", "NodeList", "Array", "isArray", "from", "selector", "querySelectorAll", "isSafari", "navigator", "vendor", "match", "getViewportSize", "options", "pswp", "getViewportSizeFn", "newViewportSize", "documentElement", "clientWidth", "window", "innerHeight", "parsePaddingOption", "viewportSize", "itemData", "index", "paddingValue", "paddingFn", "padding", "legacyPropName", "toUpperCase", "slice", "Number", "getPanAreaSize", "project", "initialVelocity", "decelerationRate", "getZoomPointsCenter", "didTapOnMainContent", "event", "target", "closest", "addElementHTML", "htmlData", "isCustomSVG", "svgData", "out", "split", "join", "size", "outlineID", "inner", "initArrowButton", "element", "isNextButton", "classList", "add", "setAttribute", "on", "loop", "disabled", "currIndex", "getNumItems", "setZoomedIn", "isZoomedIn", "toggle", "getBoundsByElement", "thumbAreaRect", "getBoundingClientRect", "left", "top", "getCroppedBoundsByElement", "imageWidth", "imageHeight", "hRatio", "vRatio", "fillZoomLevel", "offsetX", "offsetY", "bounds", "innerRect", "getThumbBounds", "instance", "dispatch", "thumbBounds", "thumbnail", "thumbSelector", "matches", "querySelector", "applyFilters", "thumbCropped", "lazyLoadData", "content", "createContentFromData", "zoomLevel", "ZoomLevel", "panAreaSize", "update", "lazyLoad", "setDisplayedSize", "ceil", "initial", "lazyLoadSlide", "getItemData", "defaultPrevented", "LOAD_STATE", "supportsPassive", "DOMEvents", "PanBounds", "MAX_IMAGE_WIDTH", "Slide", "PAN_END_FRICTION", "VERTICAL_DRAG_FRICTION", "MIN_RATIO_TO_CLOSE", "MIN_NEXT_SLIDE_SPEED", "DragHandler", "UPPER_ZOOM_FRICTION", "LOWER_ZOOM_FRICTION", "ZoomHandler", "TapHandler", "AXIS_SWIPE_HYSTERISIS", "DOUBLE_TAP_DELAY", "MIN_TAP_DISTANCE", "Gestures", "MAIN_SCROLL_END_FRICTION", "MainScroll", "KeyboardKeyCodesMap", "getKeyboardEventKey", "Keyboard", "DEFAULT_EASING", "CSSAnimation", "DEFAULT_NATURAL_FREQUENCY", "DEFAULT_DAMPING_RATIO", "SpringEaser", "SpringAnimation", "Animations", "ScrollWheel", "UIElement", "arrowPrev", "arrowNext", "closeButton", "zoomButton", "loadingIndicator", "counterIndicator", "UI", "PhotoSwipeEvent", "Eventable", "Placeholder", "Content", "MIN_SLIDES_TO_CACHE", "ContentLoader", "PhotoSwipeBase", "MIN_OPACITY", "Opener", "defaultOptions", "PhotoSwipe", "IDLE", "LOADING", "LOADED", "ERROR", "addEventListener", "Object", "defineProperty", "get", "constructor", "_pool", "type", "listener", "passive", "_toggleListener", "remove", "removeAll", "forEach", "poolItem", "unbind", "skipPool", "methodName", "eType", "filter", "push", "eventOptions", "slide", "currZoomLevel", "center", "_updateAxis", "reset", "axis", "elSize", "data", "correctPan", "panOffset", "elementSize", "fit", "fill", "vFill", "secondary", "maxWidth", "maxHeight", "_getInitial", "_getSecondary", "_getMax", "zoomLevels", "slideData", "_parseZoomLevelOption", "optionPrefix", "optionName", "optionValue", "isActive", "currentResolution", "pan", "isFirstSlide", "opener", "isOpen", "contentLoader", "getContentBySlide", "container", "holderElement", "heavyAppended", "prevDisplayedWidth", "prevDisplayedHeight", "setIsActive", "activate", "deactivate", "append", "transformOrigin", "calculateSize", "load", "updateContentSize", "appendHeavy", "zoomAndPanToInitial", "applyCurrentZoomPan", "mainScroll", "isShifted", "destroy", "hasSlide", "resize", "panTo", "force", "scaleMultiplier", "sizeChanged", "getPlaceholderElement", "_this$content$placeho", "placeholder", "zoomTo", "destZoomLevel", "centerPoint", "transitionDuration", "ignoreBounds", "isZoomable", "animations", "stopAllPan", "prevZoomLevel", "setZoomLevel", "calculateZoomToPanOffset", "finishTransition", "_setResolution", "startTransition", "isPan", "name", "getCurrentTransform", "onComplete", "easing", "toggleZoom", "zoomAnimationDuration", "point", "getViewportCenterPoint", "zoomFactor", "panX", "panY", "isPannable", "Boolean", "_applyZoomTransform", "currSlide", "zoom", "newResolution", "gestures", "startPan", "start", "stopAll", "change", "prevP1", "dragAxis", "closeOnVerticalDrag", "isMultitouch", "_setPanWithFriction", "bgOpacity", "_getVerticalDragRatio", "applyBgOpacity", "_panOrMoveMainScroll", "end", "velocity", "indexDiff", "currentSlideVisibilityRatio", "getCurrSlideX", "moveIndexBy", "correctZoomPan", "_finishPanGestureForAxis", "panPos", "restoreBgOpacity", "projectedPosition", "vDragRatio", "projectedVDragRatio", "close", "correctedPanPosition", "dampingRatio", "initialBgOpacity", "totalPanDist", "startSpring", "onUpdate", "pos", "animationProgressRatio", "floor", "delta", "newMainScrollX", "moveTo", "newPan", "allowPanToNext", "currSlideMainScrollX", "mainScrollShiftDiff", "isLeftToRight", "isRightToLeft", "_this$pswp$currSlide$", "_this$pswp$currSlide", "potentialPan", "customFriction", "_startPan", "_startZoomPoint", "_zoomPoint", "_wasOverFitZoomLevel", "_startZoomLevel", "startP1", "startP2", "minZoomLevel", "maxZoomLevel", "pinchToClose", "_calculatePanForZoomLevel", "ignoreGesture", "destinationZoomLevel", "currZoomLevelNeedsChange", "initialPan", "destinationPan", "panNeedsChange", "naturalFrequency", "now", "newZoomLevel", "click", "originalEvent", "targetClassList", "isImageClick", "contains", "isBackgroundClick", "_doClickOrTapAction", "tap", "doubleTap", "actionName", "_this$gestures$pswp$e", "actionFullName", "call", "clickToCloseNonZoomable", "prevP2", "_lastStartP1", "_intervalP1", "_numActivePoints", "_ongoingPointers", "_touchEventEnabled", "_pointerEventEnabled", "PointerEvent", "supportsTouch", "maxTouchPoints", "_intervalTime", "_velocityCalculated", "isDragging", "isZooming", "raf", "_tapTimer", "drag", "tapHandler", "events", "scrollWrap", "_onClick", "bind", "_bindEvents", "ontouchmove", "ontouchend", "pref", "down", "up", "cancel", "cancelEvent", "onPointerDown", "onPointerMove", "onPointerUp", "isMousePointer", "pointerType", "preventDefault", "mouseDetected", "_preventPointerEventBehaviour", "_updatePoints", "_clearTapTimer", "_calculateDragDirection", "_updateStartPoints", "Date", "_rafStopLoop", "_rafRenderLoop", "_finishDrag", "_updateVelocity", "_finishTap", "_updatePrevPoints", "requestAnimationFrame", "time", "_getVelocity", "indexOf", "tapDelay", "doubleTapAction", "setTimeout", "clearTimeout", "displacement", "cancelAnimationFrame", "pointerEvent", "pointerIndex", "findIndex", "ongoingPointer", "pointerId", "splice", "_convertEventPosToPoint", "length", "touchEvent", "touches", "diff", "axisToCheck", "pageX", "offset", "pageY", "identifier", "stopPropagation", "slideWidth", "_currPositionIndex", "_prevPositionIndex", "_containerShiftIndex", "itemHolders", "resizeSlides", "newSlideWidth", "spacing", "slideWidthChanged", "itemHolder", "resetPosition", "appendHolders", "i", "display", "canBeSwiped", "animate", "velocityX", "newIndex", "potentialIndex", "numSlides", "canLoop", "getLoopedIndex", "distance", "stopMainScroll", "destinationX", "updateCurrItem", "isMainScroll", "currDiff", "currDistance", "_this$itemHolders$", "positionDifference", "diffAbs", "tempHolder", "_itemHolder$slide", "shift", "setContent", "pop", "unshift", "updateLazy", "dragging", "newSlideIndexOffset", "Escape", "z", "ArrowLeft", "ArrowUp", "ArrowRight", "ArrowDown", "Tab", "key", "isKeySupported", "_wasFocused", "trapFocus", "initialPointerPos", "_focusRoot", "_onFocusIn", "_onKeyDown", "lastActiveElement", "activeElement", "returnFocus", "focus", "keydownAction", "isForward", "keyCode", "escKey", "arrowKeys", "template", "props", "_props$prop", "onFinish", "_target", "_onComplete", "_finished", "_onTransitionEnd", "_helperTimeout", "_finalizeAnimation", "removeEventListener", "_dampingRatio", "_naturalFrequency", "_dampedFrequency", "easeFrame", "deltaPosition", "deltaTime", "coeff", "naturalDumpingPow", "E", "dumpedFCos", "cos", "dumpedFSin", "sin", "_raf", "easer", "prevTime", "animationLoop", "activeAnimations", "_start", "isSpring", "animation", "stop", "isPanRunning", "some", "_onWheel", "deltaX", "deltaY", "wheelToZoom", "deltaMode", "clientX", "clientY", "_container", "elementHTML", "html", "isButton", "toLowerCase", "title", "ariaLabel", "ariaText", "innerHTML", "onInit", "onClick", "onclick", "appendTo", "topBar", "order", "indicatorElement", "isVisible", "delayTimeout", "toggleIndicatorClass", "setIndicatorVisibility", "visible", "updatePreloaderVisibility", "_pswp$currSlide", "isLoading", "_pswp$currSlide2", "preloaderDelay", "ui", "counterElement", "innerText", "indexIndicatorSep", "isRegistered", "uiElementsData", "items", "_lastUpdatedZoomLevel", "init", "sort", "a", "b", "uiElementData", "registerElement", "_pswp$element", "_onZoomPanUpdate", "elementData", "isClosing", "currZoomLevelDiff", "potentialZoomLevel", "imageClickAction", "details", "assign", "_listeners", "_filters", "addFilter", "fn", "priority", "_this$_filters$name", "_this$_filters$name2", "_this$pswp", "f1", "f2", "removeFilter", "args", "_this$_filters$name3", "apply", "_this$_listeners$name", "_this$pswp2", "off", "_this$pswp3", "_this$_listeners$name2", "imageSrc", "imgEl", "decoding", "alt", "src", "_this$element", "parentNode", "displayedImageWidth", "displayedImageHeight", "isAttached", "isDecoding", "state", "removePlaceholder", "keepPlaceholder", "isLazy", "reload", "usePlaceholder", "placeholderEl", "parentElement", "prepend", "placeholderSrc", "msrc", "isImageContent", "loadImage", "_this$data$src", "_this$data$alt", "imageElement", "updateSrcsetSizes", "srcset", "onLoaded", "onError", "setSlide", "displayError", "isError", "isInitialSizeUpdate", "image", "sizesWidth", "dataset", "largestUsedSize", "parseInt", "sizes", "String", "_this$instance$option", "_this$instance$option2", "errorMsgEl", "errorMsg", "supportsDecode", "finally", "appendImage", "limit", "preload", "_cachedItems", "loadSlideByIndex", "initialIndex", "getContentByIndex", "addToCache", "removeByIndex", "indexToRemove", "item", "find", "_this$options", "numItems", "dataSource", "_getGalleryDOMElements", "gallery", "_this$options2", "dataSourceItem", "_domElementToItemData", "galleryElement", "_this$options3", "_this$options4", "children", "childSelector", "linkEl", "pswpSrc", "href", "pswpSrcset", "pswpWidth", "pswpHeight", "pswpType", "thumbnailEl", "_thumbnailEl$getAttri", "currentSrc", "getAttribute", "pswpCropped", "cropped", "isClosed", "isOpening", "_duration", "_useAnimation", "_croppedZoom", "_animateRootOpacity", "_animateBgOpacity", "_placeholder", "_opacityElement", "_cropContainer1", "_cropContainer2", "_thumbBounds", "_prepareOpen", "open", "hideAnimationDuration", "maxWidthToAnimate", "_applyStartProps", "showAnimationDuration", "showHideAnimationType", "showHideOpacity", "_initialThumbBounds", "_animateZoom", "_options$showHideOpac", "bg", "opacity", "overflow", "_setClosedStateZoomPan", "willChange", "decoded", "isDelaying", "_initiate", "_this$pswp$element", "_this$pswp$element2", "setProperty", "_animateToOpenState", "_animateToClosedState", "_onAnimationComplete", "_animateTo", "containerOnePanX", "containerOnePanY", "containerTwoPanX", "containerTwoPanY", "animProps", "bgClickAction", "tapAction", "_prepareOptions", "_prevViewportSize", "isDestroying", "hasMouse", "_initialItemData", "keyboard", "_createMainStructure", "rootClasses", "mainClass", "scrollWheel", "isNaN", "updateSize", "pageYOffset", "_handlePageResize", "_updatePageScrollOffset", "goTo", "next", "prev", "_this$currSlide", "_this$currSlide2", "_itemHolder$slide2", "refreshSlideContent", "slideIndex", "_this$currSlide$index", "_this$currSlide3", "potentialHolderIndex", "_itemHolder$slide3", "holder", "matchMedia", "_this$element2", "test", "userAgent", "setScrollOffset", "body", "require_prism", "__commonJSMin", "exports", "module", "_self", "Prism", "lang", "uniqueId", "plainTextGrammar", "_", "encode", "tokens", "Token", "o", "obj", "deepClone", "visited", "clone", "id", "key", "v", "i", "element", "m", "language", "err", "src", "scripts", "className", "defaultActivation", "no", "classList", "redef", "inside", "before", "insert", "root", "grammar", "ret", "token", "newToken", "old", "value", "DFS", "callback", "type", "objId", "property", "propertyType", "async", "container", "env", "parent", "code", "insertHighlightedCode", "highlightedCode", "worker", "evt", "text", "rest", "tokenList", "LinkedList", "addAfter", "matchGrammar", "toArray", "name", "hooks", "callbacks", "content", "alias", "matchedStr", "stringify", "s", "e", "aliases", "attributes", "matchPattern", "pattern", "pos", "lookbehind", "match", "lookbehindLength", "startNode", "startPos", "rematch", "patterns", "j", "patternObj", "greedy", "flags", "currentNode", "str", "removeCount", "from", "to", "p", "k", "matchStr", "after", "reach", "removeFrom", "removeRange", "wrapped", "nestedRematch", "head", "tail", "list", "node", "next", "newNode", "count", "array", "message", "immediateClose", "script", "highlightAutomaticallyCallback", "readyState", "tagName", "includedCdataInside", "def", "attrName", "string", "markup", "LOADING_MESSAGE", "FAILURE_MESSAGE", "status", "FAILURE_EMPTY_MESSAGE", "EXTENSIONS", "STATUS_ATTR", "STATUS_LOADING", "STATUS_LOADED", "STATUS_FAILED", "SELECTOR", "loadFile", "success", "error", "xhr", "parseRange", "range", "start", "comma", "end", "pre", "extension", "autoloader", "lines", "elements", "logged", "demoOptionsPicker", "demoSite", "downloadIcon", "gearIcon", "downloadURL", "classAlternatives", "updateSiteClass", "property", "className", "section", "validClasses", "cls", "createDemoOptions", "demoOptions", "demoOptionsButton", "optionsPickerContainer", "createOptionsPickerContainer", "hr", "downloadLink", "container", "form", "sectionName", "properties", "fieldset", "legend", "pretifiedSectionName", "options", "formGroup", "label", "select", "placeholderOption", "optionValue", "option", "details", "summary", "e", "d", "copyLink", "copyLinkElement", "sidebar", "handleCopyLinkClick", "tooltip", "darkModeToggle", "darkModeButton", "lightModeButton", "icons", "storedDataColorScheme", "systemSchemePreference", "updateIconColor", "fillColor", "icon", "svgDoc", "element", "onClick", "event", "currentScheme", "targetDataColorScheme", "commentsScript", "enrolDialogModal", "dialog", "closeButton", "form", "mutations", "mutation", "createElement", "className", "tagName", "appendToEl", "el", "document", "appendChild", "toTransformString", "x", "y", "scale", "propValue", "undefined", "setWidthHeight", "w", "h", "style", "width", "height", "LOAD_STATE", "IDLE", "LOADING", "LOADED", "ERROR", "specialKeyUsed", "e", "button", "ctrlKey", "metaKey", "altKey", "shiftKey", "getElementsFromOption", "option", "legacySelector", "parent", "elements", "Element", "NodeList", "Array", "isArray", "from", "selector", "querySelectorAll", "isPswpClass", "fn", "prototype", "goTo", "isSafari", "navigator", "vendor", "match", "PhotoSwipeEvent", "constructor", "type", "details", "defaultPrevented", "Object", "assign", "preventDefault", "Eventable", "_listeners", "_filters", "pswp", "options", "addFilter", "name", "priority", "_this$_filters$name", "_this$_filters$name2", "_this$pswp", "push", "sort", "f1", "f2", "removeFilter", "filter", "applyFilters", "args", "_this$_filters$name3", "forEach", "apply", "on", "_this$_listeners$name", "_this$pswp2", "off", "_this$pswp3", "listener", "dispatch", "_this$_listeners$name2", "event", "call", "Placeholder", "imageSrc", "container", "element", "imgEl", "decoding", "alt", "src", "setAttribute", "setDisplayedSize", "transformOrigin", "transform", "destroy", "_this$element", "parentNode", "remove", "Content", "itemData", "instance", "index", "data", "placeholder", "slide", "displayedImageWidth", "displayedImageHeight", "Number", "isAttached", "hasSlide", "isDecoding", "state", "content", "removePlaceholder", "keepPlaceholder", "setTimeout", "load", "isLazy", "reload", "usePlaceholder", "placeholderEl", "parentElement", "prepend", "placeholderSrc", "msrc", "isFirstSlide", "isImageContent", "loadImage", "innerHTML", "html", "updateContentSize", "_this$data$src", "_this$data$alt", "imageElement", "updateSrcsetSizes", "srcset", "complete", "onLoaded", "onload", "onerror", "onError", "setSlide", "isActive", "heavyAppended", "append", "displayError", "isError", "isLoading", "isInitialSizeUpdate", "isZoomable", "image", "sizesWidth", "dataset", "largestUsedSize", "parseInt", "sizes", "String", "lazyLoad", "_this$instance$option", "_this$instance$option2", "errorMsgEl", "innerText", "errorMsg", "supportsDecode", "decode", "catch", "finally", "appendImage", "activate", "holderElement", "deactivate", "getViewportSize", "getViewportSizeFn", "newViewportSize", "documentElement", "clientWidth", "window", "innerHeight", "parsePaddingOption", "prop", "viewportSize", "paddingValue", "paddingFn", "padding", "legacyPropName", "toUpperCase", "slice", "getPanAreaSize", "MAX_IMAGE_WIDTH", "ZoomLevel", "panAreaSize", "elementSize", "fit", "fill", "vFill", "initial", "secondary", "max", "min", "update", "maxWidth", "maxHeight", "hRatio", "vRatio", "Math", "_getInitial", "_getSecondary", "_getMax", "zoomLevels", "slideData", "_parseZoomLevelOption", "optionPrefix", "optionName", "optionValue", "currZoomLevel", "lazyLoadData", "createContentFromData", "zoomLevel", "ceil", "lazyLoadSlide", "getItemData", "PhotoSwipeBase", "getNumItems", "_this$options", "numItems", "dataSource", "length", "items", "_getGalleryDOMElements", "gallery", "_this$options2", "dataSourceItem", "_domElementToItemData", "galleryElement", "_this$options3", "_this$options4", "children", "childSelector", "linkEl", "querySelector", "pswpSrc", "href", "pswpSrcset", "pswpWidth", "pswpHeight", "pswpType", "thumbnailEl", "_thumbnailEl$getAttri", "currentSrc", "getAttribute", "pswpCropped", "cropped", "thumbCropped", "PhotoSwipeLightbox", "_uid", "shouldOpen", "_preloadedContent", "onThumbnailsClick", "bind", "init", "gallerySelector", "addEventListener", "initialPoint", "clientX", "clientY", "clickedIndex", "getClickedIndex", "currentTarget", "loadAndOpen", "getClickedIndexFn", "clickedTarget", "target", "clickedChildIndex", "findIndex", "child", "contains", "galleryElements", "initialPointerPos", "preload", "promiseArray", "pswpModuleType", "pswpModule", "Promise", "resolve", "Error", "openPromise", "preloadFirstSlide", "uid", "all", "then", "iterableModules", "mainModule", "_openPhotoswipe", "module", "default", "keys", "contentLoader", "addToCache", "removeEventListener", "lightbox", "arrow", "options", "PhotoSwipeLightbox", "itemData", "element", "linkEl", "mainMenuSetup", "menuIndentRegex", "createSubMenu", "menuName", "div", "div1", "p1", "ul", "processMenuItems", "menuItems", "submenu", "i", "match", "anchor", "sup", "mainNavMenuToggle", "nav", "navToggle", "handleDocumentClick", "event", "activeSubmenu", "clickedItem", "sidebarSetup", "fillColor", "internalTags", "internalTagItems", "regex", "containers", "toggle", "container", "share", "secondary", "sidebar", "clickedLink", "updateInternalTagIcons", "icon", "svgDoc", "svgElement", "viewBox", "naturalWidth", "naturalHeight", "bbox", "element", "e", "internalTag", "firstLink", "sibling", "nextSibling", "description", "secondaryLinksItems", "item", "span", "itemDescription", "words", "firstLetters", "word", "link", "pagination", "isInfinite", "callback", "buttonElement", "nextElement", "currentArticleList", "buffer", "ticking", "loading", "lastScrollY", "lastWindowHeight", "lastDocumentHeight", "onPageLoad", "onScroll", "onResize", "nextPageArticleList", "fragment", "elems", "item", "clonedItem", "resNextElement", "requestTick", "onUpdate", "xhr", "build_html_default", "options", "forEach", "some", "body", "SPACE_CHAR", "tocElement", "currentlyHighlighting", "createEl", "d", "container", "link", "createLink", "list", "createList", "child", "render", "parent", "data", "item", "a", "node", "isCollapsed", "listElement", "classes", "updateFixedSidebarClass", "scrollTop", "getScrollTop", "posFixedEl", "getHeadingTopPos", "obj", "position", "updateClassname", "className", "updateToc", "headingsArray", "headings", "topHeader", "getTopHeader", "oldActiveTocLink", "activeTocLink", "tocLinks", "tocLink", "tocLis", "tocLi", "li", "tocLists", "removeCollapsedFromParents", "element", "disableTocAnimation", "event", "target", "enableTocAnimation", "getCurrentlyHighlighting", "top", "heading", "i", "index", "updateUrlHashForHeader", "newHash", "default_options_default", "e", "parseContent", "options", "reduce", "getLastItem", "array", "getHeadingLevel", "heading", "isHTMLElement", "maybeElement", "getHeadingObject", "headingLabel", "obj", "addNode", "node", "nest", "level", "lastItem", "lastItemLevel", "counter", "selectHeadings", "contentElement", "headingSelector", "selectors", "selector", "nestHeadingsArray", "headingsArray", "prev", "curr", "currentHeading", "initSmoothScrolling", "options", "duration", "offset", "pageUrl", "stripHash", "delegatedLinkHijacking", "onClick", "e", "isInPageLink", "jump", "setFocus", "n", "url", "hash", "element", "target", "start", "opt", "easeInOutQuad", "tgt", "distance", "timeStart", "timeElapsed", "time", "loop", "end", "t", "b", "c", "updateTocScroll", "options", "toc", "activeItem", "cTop", "cBottom", "eTop", "eBottom", "_options", "_buildHtml", "_parseContent", "_headingsArray", "_scrollListener", "clickListener", "init", "customOptions", "extend", "default_options_default", "initSmoothScrolling", "build_html_default", "parseContent", "destroy", "contentElement", "getContentElement", "tocElement", "getTocElement", "nestedHeadings", "throttle", "e", "updateTocScroll", "isTop", "timeout", "event", "refresh", "hasOwnProp", "args", "target", "i", "source", "key", "fn", "threshold", "scope", "last", "deferTimer", "context", "now", "options", "tocbot", "destroy", "init", "refresh", "tocbot_default", "tocbot", "initialiseTocbot", "tocbot_default", "toc", "toggleToc", "tocButton", "tableOfContents", "toggleTableOfContents", "e", "tocOpenElement", "updateTocReadingProgress", "tocToggleButton", "updateProgress", "totalHeight", "windowHeight", "progress", "import_prismjs", "Prism", "variable", "e", "a", "n", "i", "CLASS_PATTERN", "PROMPT_CLASS", "startsWith", "s", "p", "endsWith", "str", "suffix", "len", "hasCommandLineInfo", "env", "vars", "getCommandLineInfo", "commandLine", "pre", "existingPrompt", "codeLines", "outputLines", "outputSections", "outputFilter", "section", "range", "outputStart", "outputEnd", "j", "i", "continuationLineIndicies", "lineContinuationStr", "continuationFilter", "line", "l", "getAttribute", "key", "defaultValue", "promptLines", "rowCount", "promptText", "promptLine", "user", "host", "continuationPromptText", "continuationPromptLine", "prompt", "node", "mainMenuSetup", "darkModeToggle", "initialiseTocbot", "enrolDialogModal", "lightbox", "demoOptionsPicker", "pagination", "mainNavMenuToggle", "toggleToc", "updateTocReadingProgress", "copyLink", "sidebarSetup"]
}
